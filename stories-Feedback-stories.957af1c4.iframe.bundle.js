"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1782],{"./src/common/components/LoaderScreen.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _home_runner_work_app_app_node_modules_babel_runtime_helpers_esm_extends_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),_home_runner_work_app_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_chakra_ui_react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@chakra-ui/layout/dist/chunk-6CSUKJP7.mjs"),_chakra_ui_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@chakra-ui/image/dist/chunk-E3YVMML4.mjs"),prop_types__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_6__),_hooks_useStyle__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/common/hooks/useStyle.js"),_excluded=["width","height","objectFit","background"],__jsx=react__WEBPACK_IMPORTED_MODULE_0__.createElement;function LoaderScreen(_ref){var width=_ref.width,height=_ref.height,objectFit=_ref.objectFit,background=_ref.background,rest=(0,_home_runner_work_app_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_2__.A)(_ref,_excluded),backgroundColor=(0,_hooks_useStyle__WEBPACK_IMPORTED_MODULE_1__.A)().backgroundColor;return __jsx(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_3__.az,(0,_home_runner_work_app_app_node_modules_babel_runtime_helpers_esm_extends_js__WEBPACK_IMPORTED_MODULE_4__.A)({display:"flex",alignItems:"center",position:"absolute",background:background||backgroundColor,justifyContent:"center",width:"100%",height:"100%",style:{zIndex:50},top:"0px",left:"0px"},rest),__jsx(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_5__.E,{src:"/static/images/loader.gif",width,height,objectFit,alt:"loader"}))}LoaderScreen.displayName="LoaderScreen",LoaderScreen.propTypes={width:prop_types__WEBPACK_IMPORTED_MODULE_6___default().string,height:prop_types__WEBPACK_IMPORTED_MODULE_6___default().string,objectFit:prop_types__WEBPACK_IMPORTED_MODULE_6___default().string,background:prop_types__WEBPACK_IMPORTED_MODULE_6___default().string},LoaderScreen.defaultProps={width:"200px",height:"200px",objectFit:"cover",background:void 0};const __WEBPACK_DEFAULT_EXPORT__=LoaderScreen;LoaderScreen.__docgenInfo={description:"",methods:[],displayName:"LoaderScreen",props:{width:{defaultValue:{value:"'200px'",computed:!1},description:"",type:{name:"string"},required:!1},height:{defaultValue:{value:"'200px'",computed:!1},description:"",type:{name:"string"},required:!1},objectFit:{defaultValue:{value:"'cover'",computed:!1},description:"",type:{name:"string"},required:!1},background:{defaultValue:{value:"undefined",computed:!0},description:"",type:{name:"string"},required:!1}}}},"./src/stories/Feedback.stories.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>Feedback_stories});var defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),chunk_6CSUKJP7=__webpack_require__("./node_modules/@chakra-ui/layout/dist/chunk-6CSUKJP7.mjs"),asyncToGenerator=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),regenerator=__webpack_require__("./node_modules/@babel/runtime/regenerator/index.js"),regenerator_default=__webpack_require__.n(regenerator),chunk_NAA7TEES=__webpack_require__("./node_modules/@chakra-ui/button/dist/chunk-NAA7TEES.mjs"),chunk_MPFPK3CX=__webpack_require__("./node_modules/@chakra-ui/layout/dist/chunk-MPFPK3CX.mjs"),chunk_YTV6DHKL=__webpack_require__("./node_modules/@chakra-ui/layout/dist/chunk-YTV6DHKL.mjs"),chunk_WPAIWTI3=__webpack_require__("./node_modules/@chakra-ui/avatar/dist/chunk-WPAIWTI3.mjs"),useTranslation=__webpack_require__("./node_modules/next-translate/lib/esm/useTranslation.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),format=__webpack_require__("./node_modules/date-fns/esm/format/index.js"),breathecode=__webpack_require__("./src/common/services/breathecode.js"),utils=__webpack_require__("./src/utils/index.js"),esm_extends=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),objectWithoutProperties=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),chunk_OEQDSMWZ=__webpack_require__("./node_modules/@chakra-ui/textarea/dist/chunk-OEQDSMWZ.mjs"),chunk_UUGUEMMH=__webpack_require__("./node_modules/@chakra-ui/modal/dist/chunk-UUGUEMMH.mjs"),chunk_OWW5MU75=__webpack_require__("./node_modules/@chakra-ui/modal/dist/chunk-OWW5MU75.mjs"),chunk_66WFFNY3=__webpack_require__("./node_modules/@chakra-ui/modal/dist/chunk-66WFFNY3.mjs"),chunk_YBA5A33G=__webpack_require__("./node_modules/@chakra-ui/modal/dist/chunk-YBA5A33G.mjs"),chunk_YLPWWAYV=__webpack_require__("./node_modules/@chakra-ui/modal/dist/chunk-YLPWWAYV.mjs"),chunk_PVJ72NKC=__webpack_require__("./node_modules/@chakra-ui/modal/dist/chunk-PVJ72NKC.mjs"),useStyle=__webpack_require__("./src/common/hooks/useStyle.js"),_excluded=["isOpen","title","size","leftButton","isCentered","children","onClose","bodyStyles","forceHandler","hideCloseButton","headerStyles","closeOnOverlayClick","onMouseUp","closeButtonStyles"],__jsx=react.createElement;function SimpleModal(_ref){var isOpen=_ref.isOpen,title=_ref.title,size=_ref.size,leftButton=_ref.leftButton,isCentered=_ref.isCentered,children=_ref.children,onClose=_ref.onClose,bodyStyles=_ref.bodyStyles,forceHandler=_ref.forceHandler,hideCloseButton=_ref.hideCloseButton,headerStyles=_ref.headerStyles,closeOnOverlayClick=_ref.closeOnOverlayClick,onMouseUp=_ref.onMouseUp,closeButtonStyles=_ref.closeButtonStyles,rest=(0,objectWithoutProperties.A)(_ref,_excluded),_useStyle=(0,useStyle.A)(),modal=_useStyle.modal,borderColor2=_useStyle.borderColor2;return __jsx(chunk_UUGUEMMH.aF,{size,isOpen,isCentered,onClose:function closeHandler(){forceHandler||onClose()},closeOnOverlayClick},__jsx(chunk_OWW5MU75.m,null),__jsx(chunk_6CSUKJP7.az,{onMouseUp},__jsx(chunk_66WFFNY3.$,(0,esm_extends.A)({background:modal.background2,style:{marginTop:isCentered?"":"10vh"}},rest),leftButton&&leftButton,title&&__jsx(chunk_YBA5A33G.r,(0,esm_extends.A)({borderBottom:1,borderStyle:"solid",borderColor:borderColor2},headerStyles),title),!hideCloseButton&&!forceHandler&&__jsx(chunk_YLPWWAYV.s,closeButtonStyles),__jsx(chunk_PVJ72NKC.c,bodyStyles,children))))}SimpleModal.displayName="SimpleModal",SimpleModal.propTypes={isOpen:prop_types_default().bool.isRequired,title:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().node]),size:prop_types_default().string,children:prop_types_default().node.isRequired,onClose:prop_types_default().func,bodyStyles:prop_types_default().objectOf(prop_types_default().oneOfType([prop_types_default().any])),forceHandler:prop_types_default().bool,hideCloseButton:prop_types_default().bool,headerStyles:prop_types_default().objectOf(prop_types_default().oneOfType([prop_types_default().string,prop_types_default().number])),closeOnOverlayClick:prop_types_default().bool,onMouseUp:prop_types_default().func,isCentered:prop_types_default().bool,leftButton:prop_types_default().node,closeButtonStyles:prop_types_default().objectOf(prop_types_default().oneOfType([prop_types_default().string,prop_types_default().number]))},SimpleModal.defaultProps={title:"",size:null,bodyStyles:{},forceHandler:!1,hideCloseButton:!1,onClose:function onClose(){},headerStyles:{},closeOnOverlayClick:!0,onMouseUp:function onMouseUp(){},isCentered:!1,leftButton:null,closeButtonStyles:{}};const components_SimpleModal=SimpleModal;SimpleModal.__docgenInfo={description:"",methods:[],displayName:"SimpleModal",props:{title:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"union",value:[{name:"string"},{name:"node"}]},required:!1},size:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"string"},required:!1},bodyStyles:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"objectOf",value:{name:"union",value:[{name:"any"}]}},required:!1},forceHandler:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},hideCloseButton:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},onClose:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"func"},required:!1},headerStyles:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"objectOf",value:{name:"union",value:[{name:"string"},{name:"number"}]}},required:!1},closeOnOverlayClick:{defaultValue:{value:"true",computed:!1},description:"",type:{name:"bool"},required:!1},onMouseUp:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"func"},required:!1},isCentered:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},leftButton:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"node"},required:!1},closeButtonStyles:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"objectOf",value:{name:"union",value:[{name:"string"},{name:"number"}]}},required:!1},isOpen:{description:"",type:{name:"bool"},required:!0},children:{description:"",type:{name:"node"},required:!0}}};var Text=__webpack_require__("./src/common/components/Text.jsx"),toConsumableArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),chunk_YGVX4ESO=__webpack_require__("./node_modules/@chakra-ui/layout/dist/chunk-YGVX4ESO.mjs"),prism=__webpack_require__("./node_modules/react-syntax-highlighter/dist/esm/prism.js"),Icon=__webpack_require__("./src/common/components/Icon/index.jsx"),Heading=(__webpack_require__("./node_modules/@uiw/react-markdown-editor/markdown-editor.css"),__webpack_require__("./node_modules/@uiw/react-markdown-preview/markdown.css"),__webpack_require__("./src/common/components/Heading.jsx")),MarkDownParser=__webpack_require__("./src/common/components/MarkDownParser/index.jsx"),tomorrow=__webpack_require__("./src/common/components/MarkDownParser/syntaxHighlighter/tomorrow.js"),requests=__webpack_require__("./src/utils/requests.js"),useAuth=__webpack_require__("./src/common/hooks/useAuth.js"),useCustomToast=__webpack_require__("./src/common/hooks/useCustomToast.jsx"),console=__webpack_require__("./node_modules/console-browserify/index.js"),CodeReview_jsx=react.createElement;function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){(0,defineProperty.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var views_initial="initial",views_started_revision="started_revision",views_success="success";function CodeReview(_ref){var _revisionContent$revi,_revisionContent$revi2,_revisionContent$code,_translation$common,isExternal=_ref.isExternal,onClose=_ref.onClose,disableRate=_ref.disableRate,isStudent=_ref.isStudent,handleResetFlow=_ref.handleResetFlow,contextData=_ref.contextData,setContextData=_ref.setContextData,setStage=_ref.setStage,selectedText=_ref.selectedText,handleSelectedText=_ref.handleSelectedText,t=(0,useTranslation.A)("assignments").t,_useState=(0,react.useState)({}),repoData=_useState[0],setRepoData=_useState[1],user=(0,useAuth.A)().user,_useState2=(0,react.useState)(views_initial),view=_useState2[0],setView=_useState2[1],_useState3=(0,react.useState)(!1),isLoading=_useState3[0],setIsLoading=_useState3[1],_useState4=(0,react.useState)({code:"",comment:"",isSubmitting:!1}),codeReview=_useState4[0],setCodeReview=_useState4[1],createToast=(0,useCustomToast.A)({toastId:"code-review-error"}).createToast,hexColor=(0,useStyle.A)().hexColor,_useState5=(0,react.useState)({status:null,comment:"",isSubmitting:!1,submited:!1,submitType:null}),reviewRateData=_useState5[0],setReviewRateData=_useState5[1],commitData=null==contextData?void 0:contextData.commitFile,revisionContent=null==contextData?void 0:contextData.revision_content,hasRevision=void 0!==revisionContent,reviewRateStatus=null==reviewRateData?void 0:reviewRateData.status,myRevisions=(null==contextData?void 0:contextData.my_revisions)||[],codeRevisions=(null==contextData?void 0:contextData.code_revisions)||[],translation=(null==contextData?void 0:contextData.translation)||{},reviewerName=(null==revisionContent||null===(_revisionContent$revi=revisionContent.reviewer)||void 0===_revisionContent$revi?void 0:_revisionContent$revi.name)||(null==revisionContent||null===(_revisionContent$revi2=revisionContent.reviewer)||void 0===_revisionContent$revi2?void 0:_revisionContent$revi2.username);(0,react.useEffect)((function(){!function prepareCommitData(){try{var _commitData$path,extensionLanguage=null==commitData||null===(_commitData$path=commitData.path)||void 0===_commitData$path?void 0:_commitData$path.split(".").pop().replace(/\?.*$/,""),codeRaw=commitData.code;setRepoData({raw:codeRaw,extensionLanguage,pathname:null==commitData?void 0:commitData.path,url:null==commitData?void 0:commitData.html_url,error:!1})}catch(error){console.error(error),setRepoData({msg:"No content found",error:!0})}}()}),[commitData]);var handleKeyUp=function handleKeyUp(){view===views_initial&&handleSelectedText()};(0,react.useEffect)((function(){return document.addEventListener("keyup",handleKeyUp),function(){document.removeEventListener("keyup",handleKeyUp)}}),[]);var goBack=function goBack(){isExternal&&reviewRateData.submited?onClose():(isStudent&&reviewRateData.submited&&function resetView(){setReviewRateData({status:null,comment:"",isSubmitting:!1,submited:!1,submitType:null}),setContextData((function(prevState){return _objectSpread(_objectSpread({},prevState),{},{revision_content:void 0})})),isStudent&&setStage("review_code_revision")}(),isStudent&&null!==reviewRateData.status&&setReviewRateData((function(prev){return _objectSpread(_objectSpread({},prev),{},{status:null,comment:""})})),null===reviewRateData.status&&(view===views_started_revision&&setView(views_initial),view!==views_started_revision&&(setStage(isStudent?"review_code_revision":"file_list"),setCodeReview({code:"",comments:""}),handleResetFlow())))},handleSelectReviewRate=function handleSelectReviewRate(status){setReviewRateData((function(prev){return _objectSpread(_objectSpread({},prev),{},{status})}))},onChangeRateComment=function onChangeRateComment(e){e.target.value.length<=100&&setReviewRateData((function(prev){return _objectSpread(_objectSpread({},prev),{},{comment:e.target.value})}))},submitReviewRate=function submitReviewRate(type){setReviewRateData((function(prev){return _objectSpread(_objectSpread({},prev),{},{isSubmitting:!0,submitType:type})}));var argsData={send:{is_good:"like"===reviewRateData.status,comment:reviewRateData.comment},skip:{is_good:"like"===reviewRateData.status,comment:null}};(0,requests.A$)({dataLayer:{event:"feedback_student_reaction",feedback_id:null==revisionContent?void 0:revisionContent.id,reaction:null==reviewRateData?void 0:reviewRateData.status,reaction_comment:"skip"===type?"":null==reviewRateData?void 0:reviewRateData.comment,repository:null==revisionContent?void 0:revisionContent.repository,user_id:user.id,agent:(0,utils.VK)()}}),breathecode.A.assignments().rateCodeRevision(null==revisionContent?void 0:revisionContent.id,argsData[type]).then((function(_ref2){var respData=_ref2.data;setReviewRateData((function(prev){return _objectSpread(_objectSpread({},prev),{},{submited:!0})}));var updatedRevisionContent=_objectSpread(_objectSpread({},respData),{},{is_good:"string"==typeof(null==respData?void 0:respData.is_good)?"True"===(null==respData?void 0:respData.is_good):null==respData?void 0:respData.is_good,hasBeenReviewed:!0}),updateCodeRevisions=codeRevisions.map((function(revision){return revision.id===revisionContent.id?updatedRevisionContent:revision}));setContextData((function(prevState){return _objectSpread(_objectSpread({},prevState),{},{code_revisions:updateCodeRevisions})}))})).finally((function(){setReviewRateData((function(prev){return _objectSpread(_objectSpread({},prev),{},{isSubmitting:!1})}))}))};return console.log(selectedText),CodeReview_jsx(react.Fragment,null,CodeReview_jsx(chunk_6CSUKJP7.az,{flex:.6,maxHeight:"76vh",overflow:"auto",onMouseUp:isStudent||view!==views_initial?function(){}:handleSelectedText},null!=repoData&&repoData.raw?CodeReview_jsx(prism.A,{language:repoData.extensionLanguage,style:tomorrow.A,customStyle:{margin:0,padding:"16px",background:"rgb(45, 45, 45)",border:"none",height:"100%",minWidth:"100%"},showLineNumbers:!1,wrapLines:!0},repoData.raw):"Loading..."),CodeReview_jsx(chunk_6CSUKJP7.az,null,CodeReview_jsx(chunk_YGVX4ESO.c,{orientation:"vertical"})),CodeReview_jsx(chunk_6CSUKJP7.az,{maxWidth:isStudent?"455px":"",maxHeight:"76vh",overflow:"auto",flex:isStudent?.5:.4},view===views_success?CodeReview_jsx(chunk_MPFPK3CX.s,{flexDirection:"column",height:"100%",alignItems:"center",justifyContent:"center",gridGap:"24px"},CodeReview_jsx(Text.A,{size:"26px",fontWeight:700,textAlign:"center",lineHeight:"34px"},t("code-review.code-review-successfully-sent")),CodeReview_jsx(Text.A,{size:"18px"},t("code-review.submited-assignments-count",{count:null==myRevisions?void 0:myRevisions.length})),CodeReview_jsx(chunk_NAA7TEES.$,{variant:"default",gridGap:"10px",mt:"10px",onClick:goBack,fontSize:"13px",fontWeight:700,textTransform:"uppercase",width:"100%",height:"48px"},CodeReview_jsx(Icon.A,{icon:"code-comment",size:"23px",color:"#fff"}),CodeReview_jsx(Text.A,null,t("code-review.start-other-code-review")))):CodeReview_jsx(react.Fragment,null,view===views_initial&&!reviewRateData.submited&&null!==reviewRateStatus&&CodeReview_jsx(chunk_6CSUKJP7.az,{mb:"1rem"},CodeReview_jsx(Icon.A,{"aria-label":"Go back",icon:"arrowLeft",width:"24px",height:"16px",color:hexColor.black,onClick:goBack,cursor:"pointer"})),CodeReview_jsx(Heading.A,{size:"sm",mb:isStudent?"3rem":"24px",textAlign:isStudent&&"center"},isStudent?t("code-review.teacher-has-reviewed-your-code",{name:reviewerName}):t("code-review.code-review")),CodeReview_jsx(chunk_6CSUKJP7.az,{padding:"9px 0",borderRadius:"8px",overflow:"auto"},!isStudent&&CodeReview_jsx(Text.A,{fontSize:"14px",fontWeight:700,mb:"8px"},t("code-review.reviewing")),!isStudent&&CodeReview_jsx(chunk_MPFPK3CX.s,{gridGap:"10px",alignItems:"center",mb:"24px"},CodeReview_jsx(Icon.A,{"aria-label":"Go back",icon:"arrowLeft",width:"17px",height:"11px",color:hexColor.black,onClick:goBack,cursor:"pointer"}),CodeReview_jsx(chunk_MPFPK3CX.s,{alignItems:"center",width:"100%",gridGap:"9px",padding:"9px 8px",border:"1px solid",borderColor:hexColor.borderColor,borderRadius:"8px"},CodeReview_jsx(Icon.A,{icon:"folder",width:"14px",height:"14px",color:hexColor.black}),CodeReview_jsx(chunk_6CSUKJP7.az,{minInlineSize:"max-content"},repoData.pathname))),view===views_initial&&!isStudent&&CodeReview_jsx(react.Fragment,null,CodeReview_jsx(chunk_MPFPK3CX.s,{gridGap:"15px",alignItems:"start"},(null==selectedText?void 0:selectedText.length)>0?CodeReview_jsx(Text.A,{size:"14px"},t("code-review.selection-code-text")):CodeReview_jsx(react.Fragment,null,CodeReview_jsx(Icon.A,{icon:"code-comment",size:"23px",color:hexColor.blueDefault,mt:"5px"}),CodeReview_jsx(Text.A,{size:"18px"},t("code-review.use-your-mouse-to-select-code")))),(null==selectedText?void 0:selectedText.length)>0&&CodeReview_jsx(chunk_6CSUKJP7.az,{fontSize:"13px",color:"#fff",mt:"2rem",padding:"6px 16px",borderRadius:"6px",whiteSpace:"pre-wrap",overflow:"auto",background:"rgb(45, 45, 45)",mb:"24px"},CodeReview_jsx(Text.A,{fontSize:"18px",color:"#fff",fontWeight:700,mb:"14px"},t("code-review.you-selected-the-code")),CodeReview_jsx(prism.A,{language:(null==commitData?void 0:commitData.language)||repoData.extensionLanguage,style:tomorrow.A,customStyle:{padding:"16px",background:"rgb(45, 45, 45)",border:"none"},codeTagProps:{className:""},PreTag:"div"},selectedText.replace(/\n$/,""))),selectedText.length>0&&CodeReview_jsx(chunk_NAA7TEES.$,{variant:"default",gridGap:"10px",onClick:function startCodeReview(){var value=selectedText.replace(/[^\t\n\r\x20-\x7E\x80-\xBF\xC0-\xFD\xFE\xFF]/g,""),encodedText=btoa(value);setCodeReview({code:encodedText,comment:""}),setView(views_started_revision)},fontSize:"13px",fontWeight:700,textTransform:"uppercase",width:"100%",height:"48px"},CodeReview_jsx(Icon.A,{icon:"code-comment",size:"23px",color:"#fff"}),CodeReview_jsx(Text.A,null,t("code-review.start-code-review")))),view===views_initial&&isStudent&&!reviewRateData.submited&&CodeReview_jsx(chunk_MPFPK3CX.s,{flexDirection:"column",gridGap:"16px"},null===reviewRateStatus?CodeReview_jsx(react.Fragment,null,CodeReview_jsx(MarkDownParser.A,{content:null==revisionContent?void 0:revisionContent.comment}),CodeReview_jsx(chunk_6CSUKJP7.az,{fontSize:"13px",color:"#fff",padding:"6px 16px",borderRadius:"6px",whiteSpace:"pre-wrap",overflow:"auto",background:"rgb(45, 45, 45)"},CodeReview_jsx(prism.A,{language:(null==revisionContent?void 0:revisionContent.language)||repoData.extensionLanguage,style:tomorrow.A,customStyle:{padding:"16px",background:"rgb(45, 45, 45)",border:"none"},codeTagProps:{className:""},PreTag:"div"},null==revisionContent||null===(_revisionContent$code=revisionContent.code)||void 0===_revisionContent$code?void 0:_revisionContent$code.replace(/```+$/,"")))):CodeReview_jsx(react.Fragment,null,CodeReview_jsx(Text.A,{size:"14px",mb:"-6px"},t("code-review.write-comment")),CodeReview_jsx(chunk_6CSUKJP7.az,{position:"relative"},CodeReview_jsx(chunk_OEQDSMWZ.T,{value:null==reviewRateData?void 0:reviewRateData.comment,"aria-label":"feedback input",fontSize:"14px",onChange:onChangeRateComment,minHeight:"130px",placeholder:"Start you review here..."}),CodeReview_jsx(chunk_6CSUKJP7.az,{position:"absolute",bottom:1.5,right:3,color:reviewRateData.comment.length<10?"yellow.default":"currentColor"},"".concat(reviewRateData.comment.length,"/ ").concat(100))),CodeReview_jsx(chunk_MPFPK3CX.s,{gridGap:"9px",mt:"0.7rem"},CodeReview_jsx(chunk_NAA7TEES.$,{flex:.7,variant:"default",isLoading:reviewRateData.isSubmitting&&"send"===reviewRateData.submitType,gridGap:"10px",isDisabled:reviewRateData.comment.length<10,onClick:function onClick(){return submitReviewRate("send")},fontSize:"13px",fontWeight:700,textTransform:"uppercase",width:"100%",height:"48px"},CodeReview_jsx(Text.A,null,t("code-review.send"))),CodeReview_jsx(chunk_NAA7TEES.$,{flex:.3,variant:"outline",isLoading:reviewRateData.isSubmitting&&"skip"===reviewRateData.submitType,borderColor:"blue.default",gridGap:"10px",onClick:function onClick(){return submitReviewRate("skip")},fontSize:"13px",fontWeight:700,textTransform:"uppercase",width:"100%",height:"48px"},CodeReview_jsx(Text.A,{color:"blue.default"},t("code-review.skip"))))),!disableRate&&CodeReview_jsx(chunk_MPFPK3CX.s,{flexDirection:"column",gridGap:"24px",mt:"2rem"},!(null!=revisionContent&&revisionContent.hasBeenReviewed)&&CodeReview_jsx(react.Fragment,null,reviewRateStatus?CodeReview_jsx(chunk_YGVX4ESO.c,{margin:"18px 0 -8px 0"}):CodeReview_jsx(chunk_6CSUKJP7.az,{fontSize:"18px",textAlign:"center"},t("code-review.did-feedback-useful"))),CodeReview_jsx(chunk_6CSUKJP7.az,{fontSize:"14px",textAlign:"center"},null===reviewRateStatus&&!(null!=revisionContent&&revisionContent.hasBeenReviewed)&&t("code-review.rate-comment"),("like"===reviewRateStatus||null===reviewRateStatus&&(null==revisionContent?void 0:revisionContent.is_good))&&t("code-review.you-liked-this-comment"),("dislike"===reviewRateStatus||null===reviewRateStatus&&!(null!=revisionContent&&revisionContent.is_good))&&t("code-review.you-disliked-this-comment")),CodeReview_jsx(chunk_MPFPK3CX.s,{justifyContent:"center",gridGap:"3.5rem"},CodeReview_jsx(chunk_NAA7TEES.$,{opacity:"dislike"!==reviewRateStatus&&null!=revisionContent&&revisionContent.hasBeenReviewed&&null!=revisionContent&&revisionContent.is_good||"like"===reviewRateStatus?1:.5,onClick:function onClick(){return handleSelectReviewRate("like")},variant:"unstyled",_hover:{opacity:1},height:"auto",gridGap:"10px","aria-label":"Mark as Useful"},CodeReview_jsx(Icon.A,{icon:"feedback-like",width:"54px",height:"54px"})),CodeReview_jsx(chunk_NAA7TEES.$,{opacity:"like"!==reviewRateStatus&&null!=revisionContent&&revisionContent.hasBeenReviewed&&!1===(null==revisionContent?void 0:revisionContent.is_good)||"dislike"===reviewRateStatus?1:.5,onClick:function onClick(){return handleSelectReviewRate("dislike")},variant:"unstyled",_hover:{opacity:1},height:"auto",gridGap:"10px","aria-label":"Mark as not useful"},CodeReview_jsx(Icon.A,{icon:"feedback-dislike",width:"54px",height:"54px"}))))),hasRevision&&reviewRateData.submited&&CodeReview_jsx(chunk_MPFPK3CX.s,{flexDirection:"column",gridGap:"16px"},CodeReview_jsx(chunk_MPFPK3CX.s,{flexDirection:"column",gridGap:"24px",borderRadius:"3px",alignItems:"center",background:"like"===reviewRateStatus?"green.light":"red.light2",padding:"16px 8px"},CodeReview_jsx(Icon.A,{icon:"like"===reviewRateStatus?"feedback-like":"feedback-dislike",width:"60px",height:"60px"}),CodeReview_jsx(Text.A,{size:"14px",fontWeight:700,textAlign:"center",color:"black"},t("code-review.comment-was-sent-successfully"))),(null==reviewRateData?void 0:reviewRateData.comment.length)>0&&"send"===(null==reviewRateData?void 0:reviewRateData.submitType)&&CodeReview_jsx(chunk_6CSUKJP7.az,{position:"relative"},CodeReview_jsx(chunk_OEQDSMWZ.T,{readOnly:!0,opacity:.7,value:null==reviewRateData?void 0:reviewRateData.comment,"aria-label":"feedback input",fontSize:"12px",onChange:onChangeRateComment,minHeight:"130px",placeholder:""})),CodeReview_jsx(chunk_NAA7TEES.$,{variant:"outline",borderColor:"blue.default",color:"blue.default",onClick:goBack,fontSize:"17px",gridGap:"15px"},isExternal?(null==translation||null===(_translation$common=translation.common)||void 0===_translation$common?void 0:_translation$common.close)||t("common:close"):t("code-review.back-to-comments"))),view===views_started_revision&&CodeReview_jsx(chunk_MPFPK3CX.s,{flexDirection:"column",gridGap:"24px"},CodeReview_jsx(Text.A,{size:"14px"},t("code-review.code-review-started-msg")," ",CodeReview_jsx(chunk_YTV6DHKL.N,{variant:"default",href:"/",fontSize:"14px",target:"_blank",rel:"noopener noreferer"},t("code-review.here")),"."),CodeReview_jsx(chunk_6CSUKJP7.az,{position:"relative"},CodeReview_jsx(Text.A,{fontSize:"14px",fontWeight:700,mb:"18px"},t("code-review.write-feedback-msg")),CodeReview_jsx(chunk_OEQDSMWZ.T,{value:codeReview.comment,"aria-label":"feedback input",fontSize:"12px",onChange:function onChangeCodeReview(e){e.target.value.length<=380&&setCodeReview((function(prev){return _objectSpread(_objectSpread({},prev),{},{comment:e.target.value})}))},minHeight:"134",placeholder:"Start you review here..."}),CodeReview_jsx(chunk_6CSUKJP7.az,{position:"absolute",bottom:1.5,right:3,color:codeReview.comment.length<10?"#EB5757":"currentColor"},"".concat(codeReview.comment.length,"/ ").concat(380))),CodeReview_jsx(chunk_NAA7TEES.$,{variant:"default",isLoading,gridGap:"10px",isDisabled:codeReview.comment.length<10,onClick:function submitCodeReview(){var _commitData$committer,_commitData$committer2,_commitData$committer3;(setIsLoading(!0),(0,requests.A$)({dataLayer:{event:"submit_code_review",user_id:null==user?void 0:user.id,repository:null==commitData?void 0:commitData.repository,comment:codeReview.comment,user_reviewed:{id:null==commitData||null===(_commitData$committer=commitData.committer)||void 0===_commitData$committer?void 0:_commitData$committer.id,username:null==commitData||null===(_commitData$committer2=commitData.committer)||void 0===_commitData$committer2?void 0:_commitData$committer2.github_username,commitfile_id:null==commitData?void 0:commitData.id},agent:(0,utils.VK)()}}),setCodeReview((function(prev){return _objectSpread(_objectSpread({},prev),{},{isSubmitting:!0})})),codeReview.comment.length>=10)&&breathecode.A.assignments().createCodeRevision(commitData.task.id,{commitfile_id:null==commitData?void 0:commitData.id,content_for_review:codeReview.code,comments:codeReview.comment,github_username:null==commitData||null===(_commitData$committer3=commitData.committer)||void 0===_commitData$committer3?void 0:_commitData$committer3.github_username}).then((function(resp){var _resp$data$comment;(null===(_resp$data$comment=resp.data.comment)||void 0===_resp$data$comment?void 0:_resp$data$comment.length)>0&&(setContextData((function(prev){return _objectSpread(_objectSpread({},prev),{},{code_revisions:[].concat((0,toConsumableArray.A)(prev.code_revisions),[resp.data]),my_revisions:[].concat((0,toConsumableArray.A)(prev.my_revisions),[resp.data])})})),setView(views_success))})).catch((function(error){createToast({title:t("alert-message:error-creating-code-review"),description:null==error?void 0:error.message,status:"error",duration:5e3,isClosable:!0})})).finally((function(){setCodeReview((function(prev){return _objectSpread(_objectSpread({},prev),{},{isSubmitting:!1})}))}))},fontSize:"13px",fontWeight:700,textTransform:"uppercase",width:"100%",height:"48px"},CodeReview_jsx(Icon.A,{icon:"code-comment",size:"23px",color:codeReview.comment.length<10?"#606060":"#fff"}),CodeReview_jsx(Text.A,null,t("code-review.submit-code-review"))))))))}CodeReview.propTypes={setStage:prop_types_default().func.isRequired,selectedText:prop_types_default().string,handleSelectedText:prop_types_default().func,contextData:prop_types_default().objectOf(prop_types_default().oneOfType([prop_types_default().any])).isRequired,setContextData:prop_types_default().func.isRequired,handleResetFlow:prop_types_default().func.isRequired,isStudent:prop_types_default().bool,disableRate:prop_types_default().bool,isExternal:prop_types_default().bool,onClose:prop_types_default().func.isRequired},CodeReview.defaultProps={selectedText:"",handleSelectedText:function handleSelectedText(){},isStudent:!1,disableRate:!1,isExternal:!1};const ReviewModal_CodeReview=CodeReview;CodeReview.__docgenInfo={description:"",methods:[],displayName:"CodeReview",props:{selectedText:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},handleSelectedText:{defaultValue:{value:"() => { }",computed:!1},description:"",type:{name:"func"},required:!1},isStudent:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},disableRate:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},isExternal:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},setStage:{description:"",type:{name:"func"},required:!0},contextData:{description:"",type:{name:"objectOf",value:{name:"union",value:[{name:"any"}]}},required:!0},setContextData:{description:"",type:{name:"func"},required:!0},handleResetFlow:{description:"",type:{name:"func"},required:!0},onClose:{description:"",type:{name:"func"},required:!0}}};var chunk_7NLW6UB6=__webpack_require__("./node_modules/@chakra-ui/color-mode/dist/chunk-7NLW6UB6.mjs"),chunk_P74GIWPW=__webpack_require__("./node_modules/@chakra-ui/layout/dist/chunk-P74GIWPW.mjs"),chunk_RN6VKE3K=__webpack_require__("./node_modules/@chakra-ui/form-control/dist/chunk-RN6VKE3K.mjs"),chunk_GYFRIY2Z=__webpack_require__("./node_modules/@chakra-ui/input/dist/chunk-GYFRIY2Z.mjs"),chunk_YI7XFFAC=__webpack_require__("./node_modules/@chakra-ui/modal/dist/chunk-YI7XFFAC.mjs"),DeliverModalContent_console=__webpack_require__("./node_modules/console-browserify/index.js"),DeliverModalContent_jsx=react.createElement;function DeliverModalContent_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function DeliverModalContent_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?DeliverModalContent_ownKeys(Object(t),!0).forEach((function(r){(0,defineProperty.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):DeliverModalContent_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function DeliverModalContent(_ref){var _currentTask$user,_currentTask$user2,isStudent=_ref.isStudent,currentTask=_ref.currentTask,projectLink=_ref.projectLink,updpateAssignment=_ref.updpateAssignment,deliveryUrl=_ref.deliveryUrl,onClose=_ref.onClose,readOnly=_ref.readOnly,showCodeReviews=_ref.showCodeReviews,contextData=_ref.contextData,setStage=_ref.setStage,loaders=_ref.loaders,proceedToCommitFiles=_ref.proceedToCommitFiles,t=(0,useTranslation.A)("assignments").t,_useStyle=(0,useStyle.A)(),modal=_useStyle.modal,borderColor2=_useStyle.borderColor2,featuredColor=_useStyle.featuredColor,hexColor=_useStyle.hexColor,_useState=(0,react.useState)(!1),openIgnoreTask=_useState[0],setOpenIgnoreTask=_useState[1],createToast=(0,useCustomToast.A)({toastId:" review-assignment-task-error"}).createToast,_useState2=(0,react.useState)(!1),copied=_useState2[0],setCopied=_useState2[1],textAreaRef=(0,react.useRef)(null),fullName="".concat(null==currentTask||null===(_currentTask$user=currentTask.user)||void 0===_currentTask$user?void 0:_currentTask$user.first_name," ").concat(null==currentTask||null===(_currentTask$user2=currentTask.user)||void 0===_currentTask$user2?void 0:_currentTask$user2.last_name),fontColor=(0,chunk_7NLW6UB6.dU)("gra.dark","gray.250"),labelColor=(0,chunk_7NLW6UB6.dU)("gray.600","gray.200"),taskIsIgnored="IGNORED"===(null==currentTask?void 0:currentTask.revision_status),codeRevisions=(null==contextData?void 0:contextData.code_revisions)||[];return(0,react.useEffect)((function(){copied&&setTimeout((function(){setCopied(!1)}),3e3)}),[copied]),DeliverModalContent_jsx(react.Fragment,null,DeliverModalContent_jsx(chunk_6CSUKJP7.az,{px:{base:"10px"},width:"100%"},DeliverModalContent_jsx(chunk_6CSUKJP7.az,{display:"flex",flexDirection:"column",pb:6},DeliverModalContent_jsx(chunk_P74GIWPW.E,{color:fontColor},fullName),DeliverModalContent_jsx(chunk_YTV6DHKL.N,{href:projectLink,fontWeight:"700",letterSpacing:"0.05em",width:"fit-content",target:"_blank",rel:"noopener noreferrer",color:"blue.default"},null==currentTask?void 0:currentTask.title)),DeliverModalContent_jsx(chunk_RN6VKE3K.l,{fontSize:"12px",letterSpacing:"0.05em",color:labelColor},t("deliver-assignment.label")),DeliverModalContent_jsx(chunk_6CSUKJP7.az,{display:"flex",flexDirection:"row"},DeliverModalContent_jsx(chunk_GYFRIY2Z.p,{ref:textAreaRef,onClick:function onClick(){textAreaRef.current.select(),navigator.clipboard.writeText(deliveryUrl),setCopied(!0)},type:"text",background:(0,chunk_7NLW6UB6.dU)("gray.250","featuredDark"),value:deliveryUrl,readOnly:!0,borderTopRightRadius:"0",borderBottomRightRadius:"0"}),DeliverModalContent_jsx(chunk_NAA7TEES.$,{variant:"default",minWidth:"auto",background:copied?"success":"blue.default",_hover:{background:copied?"success":"blue.default"},onClick:function onClick(){!1===copied&&(navigator.clipboard.writeText(deliveryUrl),setCopied(!0))},borderTopLeftRadius:"0",borderBottomLeftRadius:"0",textTransform:"uppercase",fontSize:"13px",fontWeight:"700",p:"12px 16px"},t(copied?"deliver-assignment.copied":"deliver-assignment.copy"))),DeliverModalContent_jsx(chunk_P74GIWPW.E,{fontSize:"12px",letterSpacing:"0.05em",pt:"8px",color:labelColor},t("deliver-assignment.hint")),(null==currentTask?void 0:currentTask.description)&&DeliverModalContent_jsx(chunk_6CSUKJP7.az,{marginBottom:"10px"},DeliverModalContent_jsx(chunk_P74GIWPW.E,{fontSize:"12px",letterSpacing:"0.05em",pt:"8px",color:labelColor},t("deliver-assignment.feedback")),DeliverModalContent_jsx(chunk_P74GIWPW.E,null,currentTask.description)),showCodeReviews&&DeliverModalContent_jsx(chunk_MPFPK3CX.s,{padding:"8px",flexDirection:"column",gridGap:"16px",background:featuredColor,borderRadius:"4px"},DeliverModalContent_jsx(chunk_MPFPK3CX.s,{alignItems:"center",gridGap:"10px"},DeliverModalContent_jsx(Icon.A,{icon:"code",width:"18.5px",height:"17px",color:"currentColor"}),DeliverModalContent_jsx(chunk_P74GIWPW.E,{size:"14px",fontWeight:700},t("code-review.count-code-reviews",{count:codeRevisions.length||0})),!isStudent&&codeRevisions.length>0&&DeliverModalContent_jsx(chunk_NAA7TEES.$,{height:"auto",width:"fit-content",onClick:function onClick(){return setStage("review_code_revision")},isLoading:loaders.isFetchingCommitFiles,variant:"link",display:"flex",alignItems:"center",gridGap:"10px",justifyContent:"start"},t("code-review.read-code-reviews"))),DeliverModalContent_jsx(chunk_NAA7TEES.$,{height:"auto",width:"fit-content",onClick:proceedToCommitFiles,isLoading:loaders.isFetchingCommitFiles,variant:"link",display:"flex",alignItems:"center",gridGap:"10px",justifyContent:"start"},t("code-review.start-code-review"),DeliverModalContent_jsx(Icon.A,{icon:"longArrowRight",width:"24px",height:"10px",color:hexColor.blueDefault}))),!readOnly&&DeliverModalContent_jsx(chunk_YI7XFFAC.j,{mt:"10px",paddingTop:"1.5rem",justifyContent:"center",borderTop:"1px solid",borderColor:borderColor2},DeliverModalContent_jsx(chunk_NAA7TEES.$,{onClick:function onClick(){return setOpenIgnoreTask(!0)},variant:taskIsIgnored?"default":"outline",textTransform:"uppercase"},t(taskIsIgnored?"deliver-assignment.mark-as-pending":"deliver-assignment.ignore-task")))),DeliverModalContent_jsx(chunk_UUGUEMMH.aF,{isOpen:openIgnoreTask,onClose:function onClose(){return setOpenIgnoreTask(!1)},size:"lg"},DeliverModalContent_jsx(chunk_OWW5MU75.m,null),DeliverModalContent_jsx(chunk_66WFFNY3.$,{background:modal.background2,borderRadius:"md",marginTop:"10%"},DeliverModalContent_jsx(chunk_YBA5A33G.r,{fontSize:"15px",color:labelColor,textAlign:"center",letterSpacing:"0.05em",borderBottom:"1px solid",borderColor:borderColor2,fontWeight:"bold",textTransform:"uppercase"},t("deliver-assignment.title")),DeliverModalContent_jsx(chunk_YLPWWAYV.s,null),DeliverModalContent_jsx(chunk_PVJ72NKC.c,{pt:"2rem",pb:"2rem",px:{base:"20px",md:"15%"}},DeliverModalContent_jsx(chunk_P74GIWPW.E,{fontSize:"22px",fontWeight:"700",textAlign:"center"},t("deliver-assignment.confirm-ignore",{student:fullName}))),DeliverModalContent_jsx(chunk_YI7XFFAC.j,{margin:"0 1.5rem",padding:"1.5rem 0",justifyContent:"center",borderTop:"1px solid",borderColor:borderColor2},DeliverModalContent_jsx(chunk_NAA7TEES.$,{onClick:function onClick(){breathecode.A.todo().update({id:currentTask.id,revision_status:taskIsIgnored?"PENDING":"IGNORED"}).then((function(){createToast({position:"top",title:t("alert-message:review-assignment-ignored-task"),status:"success",duration:5e3,isClosable:!0}),updpateAssignment(DeliverModalContent_objectSpread(DeliverModalContent_objectSpread({},currentTask),{},{id:currentTask.id,revision_status:taskIsIgnored?"PENDING":"IGNORED"})),setOpenIgnoreTask(!1),onClose()})).catch((function(e){DeliverModalContent_console.log(e),createToast({position:"top",title:t("alert-message:review-assignment-error"),status:"error",duration:5e3,isClosable:!0})}))},variant:taskIsIgnored?"default":"outline",textTransform:"uppercase"},t(taskIsIgnored?"deliver-assignment.mark-as-pending":"deliver-assignment.ignore-task"))))))}DeliverModalContent.propTypes={isStudent:prop_types_default().bool,currentTask:prop_types_default().objectOf(prop_types_default().oneOfType([prop_types_default().any])).isRequired,projectLink:prop_types_default().string.isRequired,deliveryUrl:prop_types_default().string.isRequired,readOnly:prop_types_default().bool,updpateAssignment:prop_types_default().func.isRequired,onClose:prop_types_default().func.isRequired,showCodeReviews:prop_types_default().bool,contextData:prop_types_default().objectOf(prop_types_default().oneOfType([prop_types_default().any])),setStage:prop_types_default().func,loaders:prop_types_default().objectOf(prop_types_default().oneOfType([prop_types_default().any])),proceedToCommitFiles:prop_types_default().func},DeliverModalContent.defaultProps={isStudent:!1,readOnly:!1,showCodeReviews:!1,contextData:{},setStage:function setStage(){},loaders:{},proceedToCommitFiles:function proceedToCommitFiles(){}};const ReviewModal_DeliverModalContent=DeliverModalContent;DeliverModalContent.__docgenInfo={description:"",methods:[],displayName:"DeliverModalContent",props:{isStudent:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},readOnly:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},showCodeReviews:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},contextData:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"objectOf",value:{name:"union",value:[{name:"any"}]}},required:!1},setStage:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"func"},required:!1},loaders:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"objectOf",value:{name:"union",value:[{name:"any"}]}},required:!1},proceedToCommitFiles:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"func"},required:!1},currentTask:{description:"",type:{name:"objectOf",value:{name:"union",value:[{name:"any"}]}},required:!0},projectLink:{description:"",type:{name:"string"},required:!0},deliveryUrl:{description:"",type:{name:"string"},required:!0},updpateAssignment:{description:"",type:{name:"func"},required:!0},onClose:{description:"",type:{name:"func"},required:!0}}};var logging=__webpack_require__("./src/utils/logging.js"),UndoApprovalModal_console=__webpack_require__("./node_modules/console-browserify/index.js"),UndoApprovalModal_jsx=react.createElement;function UndoApprovalModal_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function UndoApprovalModal_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?UndoApprovalModal_ownKeys(Object(t),!0).forEach((function(r){(0,defineProperty.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):UndoApprovalModal_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function UndoApprovalModal(_ref){var _currentTask$user,_currentTask$user2,isOpen=_ref.isOpen,currentTask=_ref.currentTask,onSuccess=_ref.onSuccess,onClose=_ref.onClose,updpateAssignment=_ref.updpateAssignment,_useStyle=(0,useStyle.A)(),modal=_useStyle.modal,borderColor2=_useStyle.borderColor2,_useState=(0,react.useState)(!1),isRequesting=_useState[0],setIsRequesting=_useState[1],labelColor=(0,chunk_7NLW6UB6.dU)("gray.600","gray.200"),t=(0,useTranslation.A)("assignments").t,createToast=(0,useCustomToast.A)({toastId:" review-assignment-updated-and-error"}).createToast,fullName="".concat(null==currentTask||null===(_currentTask$user=currentTask.user)||void 0===_currentTask$user?void 0:_currentTask$user.first_name," ").concat(null==currentTask||null===(_currentTask$user2=currentTask.user)||void 0===_currentTask$user2?void 0:_currentTask$user2.last_name),taskIsIgnored="IGNORED"===(null==currentTask?void 0:currentTask.revision_status);return UndoApprovalModal_jsx(chunk_UUGUEMMH.aF,{isOpen,onClose,size:"lg"},UndoApprovalModal_jsx(chunk_OWW5MU75.m,null),UndoApprovalModal_jsx(chunk_66WFFNY3.$,{background:modal.background2,borderRadius:"md",marginTop:"10%"},UndoApprovalModal_jsx(chunk_YBA5A33G.r,{fontSize:"15px",color:labelColor,textAlign:"center",letterSpacing:"0.05em",borderBottom:"1px solid",borderColor:borderColor2,fontWeight:"bold",textTransform:"uppercase"},t("deliver-assignment.title")),UndoApprovalModal_jsx(chunk_YLPWWAYV.s,null),UndoApprovalModal_jsx(chunk_PVJ72NKC.c,{pt:"2rem",pb:"2rem",px:{base:"20px",md:"15%"}},UndoApprovalModal_jsx(Text.A,{fontSize:"22px",fontWeight:"700",textAlign:"center"},t("task-handler.confirm-undo",{student:fullName}))),UndoApprovalModal_jsx(chunk_YI7XFFAC.j,{margin:"0 1.5rem",padding:"1.5rem 0",justifyContent:"center",borderTop:"1px solid",borderColor:borderColor2},UndoApprovalModal_jsx(chunk_NAA7TEES.$,{isLoading:isRequesting,onClick:function onClick(){setIsRequesting(!0),breathecode.A.todo().update({id:currentTask.id,revision_status:"PENDING",description:""}).then((function(){updpateAssignment(UndoApprovalModal_objectSpread(UndoApprovalModal_objectSpread({},currentTask),{},{id:currentTask.id,revision_status:"PENDING",description:""})),onSuccess(),onClose(),createToast({position:"top",title:t("alert-message:review-assignment-updated"),status:"success",duration:5e3,isClosable:!0})})).catch((function(e){UndoApprovalModal_console.log(e),createToast({position:"top",title:t("alert-message:review-assignment-error"),status:"error",duration:5e3,isClosable:!0})})).finally((function(){return setIsRequesting(!1)}))},variant:taskIsIgnored?"default":"outline",textTransform:"uppercase"},t("task-handler.undo-approval")))))}UndoApprovalModal.displayName="UndoApprovalModal",UndoApprovalModal.propTypes={isOpen:prop_types_default().bool.isRequired,onClose:prop_types_default().func.isRequired,currentTask:prop_types_default().objectOf(prop_types_default().oneOfType([prop_types_default().any])).isRequired,updpateAssignment:prop_types_default().func.isRequired,onSuccess:prop_types_default().func},UndoApprovalModal.defaultProps={onSuccess:function onSuccess(){}};const components_UndoApprovalModal=UndoApprovalModal;UndoApprovalModal.__docgenInfo={description:"",methods:[],displayName:"UndoApprovalModal",props:{onSuccess:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"func"},required:!1},isOpen:{description:"",type:{name:"bool"},required:!0},onClose:{description:"",type:{name:"func"},required:!0},currentTask:{description:"",type:{name:"objectOf",value:{name:"union",value:[{name:"any"}]}},required:!0},updpateAssignment:{description:"",type:{name:"func"},required:!0}}};var FileList_jsx=react.createElement;function FileList_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function FileList_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?FileList_ownKeys(Object(t),!0).forEach((function(r){(0,defineProperty.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):FileList_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function FileList(_ref){var _commitFiles$task,isStudent=_ref.isStudent,currentTask=_ref.currentTask,contextData=_ref.contextData,updpateAssignment=_ref.updpateAssignment,setContextData=_ref.setContextData,stage=_ref.stage,stages=_ref.stages,setStage=_ref.setStage,setReviewStatus=_ref.setReviewStatus,t=(0,useTranslation.A)("assignments").t,_useState=(0,react.useState)(!1),openUndoApproval=_useState[0],setOpenUndoApproval=_useState[1],_useStyle=(0,useStyle.A)(),fontColor=_useStyle.fontColor,borderColor=_useStyle.borderColor,lightColor=_useStyle.lightColor,hexColor=_useStyle.hexColor,featuredLight=_useStyle.featuredLight,commitFiles=(null==contextData?void 0:contextData.commitFiles)||{},codeRevisions=(null==contextData?void 0:contextData.code_revisions)||[],fileList=(null==commitFiles?void 0:commitFiles.fileList)||[],hasBeenApproved="APPROVED"===(null==currentTask?void 0:currentTask.revision_status),buttonText={approve:t("review-assignment.approve"),reject:t("review-assignment.reject")},buttonColor={approve:"success",reject:"danger"};(0,logging.Rm)("fileList:",fileList);var openCommitFile=function openCommitFile(commitData){!function proceedToCodeReview(commitData){var content=null==commitData?void 0:commitData.content;setContextData((function(prevState){return FileList_objectSpread(FileList_objectSpread({},prevState),{},{commitFile:FileList_objectSpread(FileList_objectSpread({path:null==commitData?void 0:commitData.name},commitData),{},{task:(null==commitFiles?void 0:commitFiles.task)||{},code:content})})})),setStage(stages.code_review)}(commitData)};return FileList_jsx(chunk_MPFPK3CX.s,{display:stage!==stages.file_list&&"none",flexDirection:"column",gridGap:"24px",width:"100%"},(null==fileList?void 0:fileList.length)>0?FileList_jsx(react.Fragment,null,FileList_jsx(chunk_MPFPK3CX.s,{mb:"15px",gridGap:"2px",flexDirection:"column"},FileList_jsx(Heading.A,{size:"18px",color:lightColor,fontWeight:400},t("code-review.select-file-to-review")),FileList_jsx(Heading.A,{size:"18px",fontWeight:700},null==commitFiles||null===(_commitFiles$task=commitFiles.task)||void 0===_commitFiles$task?void 0:_commitFiles$task.title)),FileList_jsx(chunk_MPFPK3CX.s,{my:"10px",py:"10px",px:"10px",borderRadius:"10px",background:featuredLight},FileList_jsx(chunk_6CSUKJP7.az,{fontSize:"12px",flex:.33},t("code-review.filename")),FileList_jsx(chunk_6CSUKJP7.az,{fontSize:"12px",flex:.33},t("code-review.feedback-status")),FileList_jsx(chunk_6CSUKJP7.az,{fontSize:"12px",flex:.33},t("code-review.reviews"))),FileList_jsx(chunk_MPFPK3CX.s,{flexDirection:"column",gridGap:"12px"},fileList.map((function(file){var _file$committer,_file$committer2,revisionsRelated=(null==codeRevisions?void 0:codeRevisions.length)>0?codeRevisions.filter((function(revision){var _revision$file;return(null==revision||null===(_revision$file=revision.file)||void 0===_revision$file?void 0:_revision$file.id)===(null==file?void 0:file.id)})).sort((function(a,b){return new Date(b.updated_at)-new Date(a.updated_at)})):[],lastUpdatedRevision=(null==revisionsRelated?void 0:revisionsRelated[0])||{},feedbackHasBeenRated="boolean"==typeof(null==lastUpdatedRevision?void 0:lastUpdatedRevision.is_good),rateIcon=null!=lastUpdatedRevision&&lastUpdatedRevision.is_good?"feedback-like":"feedback-dislike";return FileList_jsx(chunk_MPFPK3CX.s,{border:"1px solid",borderColor,justifyContent:"center",alignItems:"center",minHeight:"48px",padding:"4px 8px",borderRadius:"8px"},FileList_jsx(Icon.A,{icon:"file2",width:"22px",height:"22px",display:"flex",alignItems:"center",color:fontColor,flex:.1}),FileList_jsx(chunk_MPFPK3CX.s,{flexDirection:"column",flex:.4,maxWidth:"102px"},FileList_jsx(chunk_MPFPK3CX.s,{flexDirection:"column",gridGap:"0px"},FileList_jsx(Text.A,{fontSize:"12px",fontWeight:700,style:{textWrap:"nowrap"}},null==file?void 0:file.name),FileList_jsx(Text.A,{fontSize:"12px",fontWeight:400,title:null==file?void 0:file.commit_hash},"".concat(null==file?void 0:file.commit_hash.slice(0,10),"..."))),(null==file||null===(_file$committer=file.committer)||void 0===_file$committer?void 0:_file$committer.github_username)&&FileList_jsx(chunk_6CSUKJP7.az,{fontSize:"12px"},null==file||null===(_file$committer2=file.committer)||void 0===_file$committer2?void 0:_file$committer2.github_username)),FileList_jsx(chunk_MPFPK3CX.s,{flex:.3,alignItems:"center",justifyContent:"center",opacity:null!==lastUpdatedRevision.is_good?1:.5},FileList_jsx(Icon.A,{icon:feedbackHasBeenRated&&null!==lastUpdatedRevision.is_good?rateIcon:"unchecked",width:"24px",height:"24px"})),FileList_jsx(chunk_MPFPK3CX.s,{flex:.3,justifyContent:"center",alignItems:"center"},FileList_jsx(chunk_MPFPK3CX.s,{width:"auto",position:"relative",justifyContent:"center"},FileList_jsx(chunk_6CSUKJP7.az,{position:"absolute",top:-1.5,right:-2,background:"blue.default",fontSize:"10px",padding:"1px 5px",fontWeight:700,height:"auto",borderRadius:"50%"},(null==revisionsRelated?void 0:revisionsRelated.length)||0),FileList_jsx(Icon.A,{icon:"code-comment",width:"20px",height:"20px",color:hexColor.black}))),FileList_jsx(chunk_NAA7TEES.$,{variant:"default",isDisabled:!(null!=file&&file.content),flex:.2,height:"40px",onClick:function onClick(){null!=file&&file.content&&openCommitFile(file)},display:"flex",alignItems:"center",gridGap:"10px"},t("code-review.start-review")))})))):FileList_jsx(chunk_MPFPK3CX.s,{alignItems:"center",justifyContent:"center",padding:"0 0 1.5rem 0",height:"100%",width:"500px",flexDirection:"column",margin:"1rem auto",gridGap:"0.7rem"},FileList_jsx(Heading.A,{size:"xsm"},t("code-review.no-files-to-review")),FileList_jsx(Text.A,{size:"14px",textAlign:"center",style:{textWrap:"balance"}},t(hasBeenApproved?"code-review.student-has-no-files-but-has-been-approved":"code-review.student-has-no-files-to-review")),!hasBeenApproved&&FileList_jsx(chunk_MPFPK3CX.s,{width:"100%",justifyContent:"space-between",mt:"3rem"},["reject","approve"].map((function(type){return FileList_jsx(chunk_NAA7TEES.$,{minWidth:"128px",background:buttonColor[type],_hover:{background:buttonColor[type]},onClick:function onClick(){setStage(stages.approve_or_reject_code_revision),setReviewStatus(type)},color:"white",borderRadius:"3px",fontSize:"13px",textTransform:"uppercase"},buttonText[type])}))),!isStudent&&hasBeenApproved&&FileList_jsx(react.Fragment,null,FileList_jsx(chunk_NAA7TEES.$,{minWidth:"128px",mt:"8px",onClick:function onClick(){return setOpenUndoApproval(!0)},color:"currentColor",borderRadius:"3px",fontSize:"13px",textTransform:"uppercase",variant:"outline",width:"fit-content",alignSelf:"center"},t("task-handler.undo-approval")),FileList_jsx(components_UndoApprovalModal,{isOpen:openUndoApproval,onClose:function onClose(){return setOpenUndoApproval(!1)},updpateAssignment,currentTask}))))}FileList.displayName="FileList",FileList.propTypes={stage:prop_types_default().string,stages:prop_types_default().shape({initial:prop_types_default().string,file_list:prop_types_default().string,code_review:prop_types_default().string,approve_or_reject_code_revision:prop_types_default().string}),setStage:prop_types_default().func,contextData:prop_types_default().arrayOf(prop_types_default().oneOfType([prop_types_default().any])).isRequired,setContextData:prop_types_default().func,setReviewStatus:prop_types_default().func.isRequired,isStudent:prop_types_default().bool.isRequired,updpateAssignment:prop_types_default().func,currentTask:prop_types_default().objectOf(prop_types_default().oneOfType([prop_types_default().any])).isRequired},FileList.defaultProps={stage:"",stages:{initial:"initial",file_list:"file_list",code_review:"code_review"},setStage:function setStage(){},setContextData:function setContextData(){},updpateAssignment:function updpateAssignment(){}};const ReviewModal_FileList=FileList;FileList.__docgenInfo={description:"",methods:[],displayName:"FileList",props:{stage:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},stages:{defaultValue:{value:"{\n  initial: 'initial',\n  file_list: 'file_list',\n  code_review: 'code_review',\n}",computed:!1},description:"",type:{name:"shape",value:{initial:{name:"string",required:!1},file_list:{name:"string",required:!1},code_review:{name:"string",required:!1},approve_or_reject_code_revision:{name:"string",required:!1}}},required:!1},setStage:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"func"},required:!1},setContextData:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"func"},required:!1},updpateAssignment:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"func"},required:!1},contextData:{description:"",type:{name:"arrayOf",value:{name:"union",value:[{name:"any"}]}},required:!0},setReviewStatus:{description:"",type:{name:"func"},required:!0},isStudent:{description:"",type:{name:"bool"},required:!0},currentTask:{description:"",type:{name:"objectOf",value:{name:"union",value:[{name:"any"}]}},required:!0}}};var CodeRevisionsList_excluded=["codeRevisions","revisionContent","selectCodeRevision"],CodeRevisionsList_jsx=react.createElement;function CodeRevisionsList_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function CodeRevisionsList_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?CodeRevisionsList_ownKeys(Object(t),!0).forEach((function(r){(0,defineProperty.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):CodeRevisionsList_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function CodeRevisionsList(_ref){var codeRevisions=_ref.codeRevisions,revisionContent=_ref.revisionContent,selectCodeRevision=_ref.selectCodeRevision,rest=(0,objectWithoutProperties.A)(_ref,CodeRevisionsList_excluded),_useStyle=(0,useStyle.A)(),fontColor=_useStyle.fontColor,borderColor=_useStyle.borderColor,hexColor=_useStyle.hexColor,featuredLight=_useStyle.featuredLight,t=(0,useTranslation.A)("assignments").t;return CodeRevisionsList_jsx(chunk_MPFPK3CX.s,(0,esm_extends.A)({overflow:"auto",height:"24rem",py:"0.5rem",flexDirection:"column",gridGap:"12px"},rest),codeRevisions.map((function(commit){var _commit$file,_commit$file2,_commit$file3,_commit$committer,_commit$committer2,isSelected=(null==revisionContent?void 0:revisionContent.id)===(null==commit?void 0:commit.id),hasBeenReviewed="boolean"==typeof(null==commit?void 0:commit.is_good),dataStruct=CodeRevisionsList_objectSpread(CodeRevisionsList_objectSpread({},commit),{},{revision_rating:null==commit?void 0:commit.revision_rating,hasBeenReviewed});return CodeRevisionsList_jsx(chunk_MPFPK3CX.s,{key:commit.id,cursor:"pointer",onClick:function onClick(){return selectCodeRevision(dataStruct)},_hover:{background:featuredLight},border:"1px solid",borderColor:isSelected?"blue.default":borderColor,justifyContent:"space-between",alignItems:"center",height:"48px",padding:"4px 8px",borderRadius:"8px"},CodeRevisionsList_jsx(chunk_MPFPK3CX.s,{flex:.3,gridGap:"10px"},CodeRevisionsList_jsx(Icon.A,{icon:"file2",width:"22px",height:"22px",display:"flex",alignItems:"center",color:fontColor}),CodeRevisionsList_jsx(chunk_MPFPK3CX.s,{flexDirection:"column",justifyContent:"center",gridGap:"9px",maxWidth:"102px"},CodeRevisionsList_jsx(chunk_MPFPK3CX.s,{flexDirection:"column",gridGap:"0px"},CodeRevisionsList_jsx(Text.A,{fontSize:"12px",fontWeight:700,style:{textWrap:"nowrap",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},null==commit||null===(_commit$file=commit.file)||void 0===_commit$file?void 0:_commit$file.name),CodeRevisionsList_jsx(Text.A,{fontSize:"12px",fontWeight:400,title:null==commit||null===(_commit$file2=commit.file)||void 0===_commit$file2?void 0:_commit$file2.commit_hash},"".concat(null==commit||null===(_commit$file3=commit.file)||void 0===_commit$file3||null===(_commit$file3=_commit$file3.commit_hash)||void 0===_commit$file3?void 0:_commit$file3.slice(0,10),"..."))),(null==commit||null===(_commit$committer=commit.committer)||void 0===_commit$committer?void 0:_commit$committer.github_username)&&CodeRevisionsList_jsx(chunk_6CSUKJP7.az,{fontSize:"12px"},null==commit||null===(_commit$committer2=commit.committer)||void 0===_commit$committer2?void 0:_commit$committer2.github_username))),CodeRevisionsList_jsx(chunk_MPFPK3CX.s,{flex:.3,justifyContent:"center",alignItems:"center"},hasBeenReviewed?CodeRevisionsList_jsx(chunk_6CSUKJP7.az,{background:commit.is_good?hexColor.greenLight3:"red.light",borderRadius:"full"},CodeRevisionsList_jsx(Icon.A,{icon:"feedback-".concat(commit.is_good?"like":"dislike"),width:"20px",height:"20px"})):CodeRevisionsList_jsx(chunk_MPFPK3CX.s,{width:"auto",position:"relative",justifyContent:"center"},CodeRevisionsList_jsx(chunk_6CSUKJP7.az,{position:"absolute",top:-1.5,right:-2,background:"yellow.default",fontSize:"10px",padding:"3px",fontWeight:700,height:"auto",borderRadius:"50%"},CodeRevisionsList_jsx(Icon.A,{icon:"asterisk",width:"8px",height:"8px"})),CodeRevisionsList_jsx(Icon.A,{icon:"code-comment",width:"20px",height:"20px",color:hexColor.black}))),CodeRevisionsList_jsx(chunk_NAA7TEES.$,{variant:"link",flex:.3,height:"40px",onClick:function onClick(){return selectCodeRevision(dataStruct)},display:"flex",width:"fit-content",justifyContent:"flex-end",alignItems:"center",padding:"0 1rem 0 0",gridGap:"10px"},t("code-review.review")))})))}CodeRevisionsList.displayName="CodeRevisionsList",CodeRevisionsList.propTypes={selectCodeRevision:prop_types_default().func,revisionContent:prop_types_default().objectOf(prop_types_default().oneOfType([prop_types_default().any])),codeRevisions:prop_types_default().arrayOf(prop_types_default().oneOfType([prop_types_default().any]))},CodeRevisionsList.defaultProps={selectCodeRevision:function selectCodeRevision(){},revisionContent:null,codeRevisions:[]};const ReviewModal_CodeRevisionsList=CodeRevisionsList;CodeRevisionsList.__docgenInfo={description:"",methods:[],displayName:"CodeRevisionsList",props:{selectCodeRevision:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"func"},required:!1},revisionContent:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"objectOf",value:{name:"union",value:[{name:"any"}]}},required:!1},codeRevisions:{defaultValue:{value:"[]",computed:!1},description:"",type:{name:"arrayOf",value:{name:"union",value:[{name:"any"}]}},required:!1}}};var ReviewCodeRevision_jsx=react.createElement;function ReviewCodeRevision_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function ReviewCodeRevision_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ReviewCodeRevision_ownKeys(Object(t),!0).forEach((function(r){(0,defineProperty.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ReviewCodeRevision_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var defaultReviewRateData={status:null,comment:"",isSubmitting:!1,submited:!1,submitType:null,revision_rating:null};function ReviewCodeRevision(_ref){var _commitFiles$task,_revisionContent$file,_revisionContent$revi,_revisionContent$file2,contextData=_ref.contextData,setContextData=_ref.setContextData,stages=_ref.stages,setStage=_ref.setStage,disableRate=_ref.disableRate,_useStyle=(0,useStyle.A)(),lightColor=_useStyle.lightColor,hexColor=_useStyle.hexColor,featuredLight=_useStyle.featuredLight,_useState=(0,react.useState)(defaultReviewRateData),reviewRateData=_useState[0],setReviewRateData=_useState[1],t=(0,useTranslation.A)("assignments").t,reviewRateStatus=null==reviewRateData?void 0:reviewRateData.status,commitFiles=(null==contextData?void 0:contextData.commitFiles)||{},commitFile=(null==contextData?void 0:contextData.commitFile)||{},codeRevisions=(null==contextData?void 0:contextData.code_revisions)||[],revisionContent=null==contextData?void 0:contextData.revision_content,hasRevision=void 0!==revisionContent,selectCodeRevision=function selectCodeRevision(revision){var _commitFiles$fileList,resetReviewRate=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],content=null==revision?void 0:revision.original_code,fileContent=(null==commitFiles||null===(_commitFiles$fileList=commitFiles.fileList)||void 0===_commitFiles$fileList?void 0:_commitFiles$fileList.length)>0?commitFiles.fileList.find((function(l){var _revision$file;return l.id===(null==revision||null===(_revision$file=revision.file)||void 0===_revision$file?void 0:_revision$file.id)})):{},decodedReviewCodeContent=atob(content);resetReviewRate&&setReviewRateData(defaultReviewRateData),setContextData((function(prevState){var _revision$file2;return ReviewCodeRevision_objectSpread(ReviewCodeRevision_objectSpread({},prevState),{},{commitFile:ReviewCodeRevision_objectSpread(ReviewCodeRevision_objectSpread({},fileContent),{},{task:(null==commitFiles?void 0:commitFiles.task)||{},code:null==fileContent?void 0:fileContent.content}),revision_content:ReviewCodeRevision_objectSpread(ReviewCodeRevision_objectSpread({path:null==revision||null===(_revision$file2=revision.file)||void 0===_revision$file2?void 0:_revision$file2.name},revision),{},{task:(null==commitFiles?void 0:commitFiles.task)||{},code:decodedReviewCodeContent})})}))};(0,react.useEffect)((function(){if((null==codeRevisions?void 0:codeRevisions.length)>0&&(null==revisionContent||!revisionContent.id)){var firstCodeRevision=(null==codeRevisions?void 0:codeRevisions[0])||{},hasBeenReviewed=(null==firstCodeRevision?void 0:firstCodeRevision.revision_rating)>0||null!==(null==firstCodeRevision?void 0:firstCodeRevision.revision_rating);selectCodeRevision(ReviewCodeRevision_objectSpread(ReviewCodeRevision_objectSpread({},firstCodeRevision),{},{revision_rating:null==firstCodeRevision?void 0:firstCodeRevision.revision_rating,hasBeenReviewed}))}}),[codeRevisions,revisionContent]);var handleSelectReviewRate=function handleSelectReviewRate(status){setReviewRateData((function(prev){return ReviewCodeRevision_objectSpread(ReviewCodeRevision_objectSpread({},prev),{},{status})}))},onChangeRateComment=function onChangeRateComment(e){e.target.value.length<=100&&setReviewRateData((function(prev){return ReviewCodeRevision_objectSpread(ReviewCodeRevision_objectSpread({},prev),{},{comment:e.target.value})}))},submitReviewRate=function submitReviewRate(type){setReviewRateData((function(prev){return ReviewCodeRevision_objectSpread(ReviewCodeRevision_objectSpread({},prev),{},{isSubmitting:!0,submitType:type})}));var argsData={send:{is_good:"like"===reviewRateData.status,comment:reviewRateData.comment},skip:{is_good:"like"===reviewRateData.status,comment:null}};breathecode.A.assignments().rateCodeRevision(null==revisionContent?void 0:revisionContent.id,argsData[type]).then((function(_ref2){var respData=_ref2.data;setReviewRateData((function(prev){return ReviewCodeRevision_objectSpread(ReviewCodeRevision_objectSpread({},prev),{},{submited:!0})}));var updatedRevisionContent=ReviewCodeRevision_objectSpread(ReviewCodeRevision_objectSpread({},respData),{},{is_good:"string"==typeof(null==respData?void 0:respData.is_good)?"True"===(null==respData?void 0:respData.is_good):null==respData?void 0:respData.is_good,hasBeenReviewed:!0}),updateCodeRevisions=codeRevisions.map((function(revision){return revision.id===revisionContent.id?updatedRevisionContent:revision}));selectCodeRevision(updatedRevisionContent,!1),setContextData((function(prevState){return ReviewCodeRevision_objectSpread(ReviewCodeRevision_objectSpread({},prevState),{},{code_revisions:updateCodeRevisions})}))})).finally((function(){setReviewRateData((function(prev){return ReviewCodeRevision_objectSpread(ReviewCodeRevision_objectSpread({},prev),{},{isSubmitting:!1})}))}))};return ReviewCodeRevision_jsx(chunk_MPFPK3CX.s,{flexDirection:"row",height:"30rem",justifyContent:"center",gridGap:"6px",width:"100%",maxHeight:reviewRateStatus?"auto":"30rem"},(null==codeRevisions?void 0:codeRevisions.length)>0?ReviewCodeRevision_jsx(react.Fragment,null,ReviewCodeRevision_jsx(chunk_6CSUKJP7.az,{width:"100%",flex:.65},ReviewCodeRevision_jsx(chunk_MPFPK3CX.s,{mb:"15px",gridGap:"2px",flexDirection:"column"},ReviewCodeRevision_jsx(Heading.A,{size:"18px",color:lightColor,fontWeight:400},t("code-review.select-file-to-review")),ReviewCodeRevision_jsx(Heading.A,{size:"18px",fontWeight:700},null==commitFiles||null===(_commitFiles$task=commitFiles.task)||void 0===_commitFiles$task?void 0:_commitFiles$task.title)),ReviewCodeRevision_jsx(chunk_MPFPK3CX.s,{my:"10px",py:"10px",px:"10px",borderRadius:"10px",background:featuredLight},ReviewCodeRevision_jsx(chunk_6CSUKJP7.az,{fontSize:"12px",flex:.33},t("code-review.filename")),ReviewCodeRevision_jsx(chunk_6CSUKJP7.az,{fontSize:"12px",flex:.33,textAlign:"center"},t("code-review.feedback-status"))),ReviewCodeRevision_jsx(ReviewModal_CodeRevisionsList,{codeRevisions,revisionContent,selectCodeRevision})),(null==revisionContent?void 0:revisionContent.id)&&ReviewCodeRevision_jsx(chunk_MPFPK3CX.s,{flexDirection:"column",overflow:"auto",gridGap:"12px",flex:.35,width:"100%",padding:"8px",mt:!hasRevision&&"3.4rem"},ReviewCodeRevision_jsx(chunk_6CSUKJP7.az,{fontSize:"14px",fontWeight:700,letterSpacing:"0.08em"},null==revisionContent||null===(_revisionContent$file=revisionContent.file)||void 0===_revisionContent$file?void 0:_revisionContent$file.name),ReviewCodeRevision_jsx(chunk_YGVX4ESO.c,null),hasRevision&&!reviewRateData.submited&&ReviewCodeRevision_jsx(chunk_MPFPK3CX.s,{flexDirection:"column",gridGap:"16px"},null===reviewRateStatus?ReviewCodeRevision_jsx(react.Fragment,null,ReviewCodeRevision_jsx(chunk_MPFPK3CX.s,{flexDirection:"column",gridGap:"8px"},ReviewCodeRevision_jsx(Heading.A,{fontSize:"12px",fontWeight:700},t("code-review.person-has-commented",{name:null==revisionContent||null===(_revisionContent$revi=revisionContent.reviewer)||void 0===_revisionContent$revi?void 0:_revisionContent$revi.name})),ReviewCodeRevision_jsx(Text.A,{size:"12px"},null==revisionContent?void 0:revisionContent.comment),ReviewCodeRevision_jsx(chunk_6CSUKJP7.az,{fontSize:"13px",color:"#fff",borderRadius:"6px",whiteSpace:"pre-wrap",overflow:"auto"},ReviewCodeRevision_jsx(MarkDownParser.A,{content:"```".concat((null==revisionContent||null===(_revisionContent$file2=revisionContent.file)||void 0===_revisionContent$file2?void 0:_revisionContent$file2.language)||"bash","\n").concat(null==revisionContent?void 0:revisionContent.code,"\n```")}))),ReviewCodeRevision_jsx(chunk_NAA7TEES.$,{isDisabled:null==commitFile?void 0:commitFile.id,onClick:function onClick(){return setStage(stages.code_review)},color:(null==commitFile?void 0:commitFile.id)&&"white",variant:"link",fontSize:"17px",gridGap:"15px"},(null==commitFile?void 0:commitFile.id)&&ReviewCodeRevision_jsx(Icon.A,{icon:"longArrowRight",width:"20px",height:"20px",color:hexColor.blueDefault}),null!=commitFile&&commitFile.id?t("code-review.go-to-review"):"No commit file found"),ReviewCodeRevision_jsx(chunk_YGVX4ESO.c,{mt:"-8px"})):ReviewCodeRevision_jsx(react.Fragment,null,ReviewCodeRevision_jsx(Text.A,{size:"14px",mb:"-6px"},t("code-review.write-comment")),ReviewCodeRevision_jsx(chunk_6CSUKJP7.az,{position:"relative"},ReviewCodeRevision_jsx(chunk_OEQDSMWZ.T,{value:null==reviewRateData?void 0:reviewRateData.comment,"aria-label":"feedback input",fontSize:"12px",onChange:onChangeRateComment,minHeight:"130px",placeholder:t("code-review.start-review-here")}),ReviewCodeRevision_jsx(chunk_6CSUKJP7.az,{position:"absolute",bottom:1.5,right:3,color:reviewRateData.comment.length<10?"yellow.default":"currentColor"},"".concat(reviewRateData.comment.length,"/ ").concat(100))),ReviewCodeRevision_jsx(chunk_MPFPK3CX.s,{gridGap:"9px",mt:"0.7rem"},ReviewCodeRevision_jsx(chunk_NAA7TEES.$,{flex:.7,variant:"default",isLoading:reviewRateData.isSubmitting&&"send"===reviewRateData.submitType,gridGap:"10px",isDisabled:reviewRateData.comment.length<10,onClick:function onClick(){return submitReviewRate("send")},fontSize:"13px",fontWeight:700,textTransform:"uppercase",width:"100%",height:"48px"},ReviewCodeRevision_jsx(Text.A,null,t("code-review.send"))),ReviewCodeRevision_jsx(chunk_NAA7TEES.$,{flex:.3,variant:"outline",isLoading:reviewRateData.isSubmitting&&"skip"===reviewRateData.submitType,borderColor:"blue.default",gridGap:"10px",onClick:function onClick(){return submitReviewRate("skip")},fontSize:"13px",fontWeight:700,textTransform:"uppercase",width:"100%",height:"48px"},ReviewCodeRevision_jsx(Text.A,{color:"blue.default"},t("code-review.skip"))))),!disableRate&&ReviewCodeRevision_jsx(chunk_MPFPK3CX.s,{flexDirection:"column",gridGap:"24px"},reviewRateStatus&&ReviewCodeRevision_jsx(chunk_YGVX4ESO.c,{margin:"18px 0 -8px 0"}),ReviewCodeRevision_jsx(chunk_6CSUKJP7.az,{fontSize:"14px",textAlign:"center"},null===reviewRateStatus&&!(null!=revisionContent&&revisionContent.hasBeenReviewed)&&t("code-review.rate-comment"),("like"===reviewRateStatus||null===reviewRateStatus&&(null==revisionContent?void 0:revisionContent.is_good))&&t("code-review.you-liked-this-comment"),("dislike"===reviewRateStatus||null===reviewRateStatus&&!(null!=revisionContent&&revisionContent.is_good))&&t("code-review.you-disliked-this-comment")),ReviewCodeRevision_jsx(chunk_MPFPK3CX.s,{justifyContent:"center",gridGap:"3.5rem"},ReviewCodeRevision_jsx(chunk_NAA7TEES.$,{opacity:"dislike"!==reviewRateStatus&&null!=revisionContent&&revisionContent.hasBeenReviewed&&null!=revisionContent&&revisionContent.is_good||"like"===reviewRateStatus?1:.5,onClick:function onClick(){return handleSelectReviewRate("like")},variant:"unstyled",height:"auto",gridGap:"10px","aria-label":"Mark as Useful",_hover:{opacity:1}},ReviewCodeRevision_jsx(Icon.A,{icon:"feedback-like",width:"54px",height:"54px"})),ReviewCodeRevision_jsx(chunk_NAA7TEES.$,{opacity:"like"!==reviewRateStatus&&null!=revisionContent&&revisionContent.hasBeenReviewed&&!1===(null==revisionContent?void 0:revisionContent.is_good)||"dislike"===reviewRateStatus?1:.5,onClick:function onClick(){return handleSelectReviewRate("dislike")},variant:"unstyled",height:"auto",gridGap:"10px","aria-label":"Mark as not useful",_hover:{opacity:1}},ReviewCodeRevision_jsx(Icon.A,{icon:"feedback-dislike",width:"54px",height:"54px"}))))),hasRevision&&reviewRateData.submited&&ReviewCodeRevision_jsx(chunk_MPFPK3CX.s,{flexDirection:"column",gridGap:"16px"},ReviewCodeRevision_jsx(chunk_MPFPK3CX.s,{flexDirection:"column",gridGap:"24px",borderRadius:"3px",alignItems:"center",background:"like"===reviewRateStatus?"green.light":"red.light2",padding:"16px 8px"},ReviewCodeRevision_jsx(Icon.A,{icon:"like"===reviewRateStatus?"feedback-like":"feedback-dislike",width:"60px",height:"60px"}),ReviewCodeRevision_jsx(Text.A,{size:"14px",fontWeight:700,textAlign:"center",color:"black"},t("code-review.comment-was-sent-successfully"))),(null==reviewRateData?void 0:reviewRateData.comment.length)>0&&"send"===(null==reviewRateData?void 0:reviewRateData.submitType)&&ReviewCodeRevision_jsx(chunk_6CSUKJP7.az,{position:"relative"},ReviewCodeRevision_jsx(chunk_OEQDSMWZ.T,{readOnly:!0,opacity:.7,value:null==reviewRateData?void 0:reviewRateData.comment,"aria-label":"feedback input",fontSize:"12px",onChange:onChangeRateComment,minHeight:"130px",placeholder:""})),ReviewCodeRevision_jsx(chunk_NAA7TEES.$,{variant:"outline",borderColor:"blue.default",color:"blue.default",onClick:function goBack(){reviewRateData.submited&&function resetView(){setReviewRateData({status:null,comment:"",isSubmitting:!1,submited:!1,submitType:null})}(),null!==reviewRateData.status?setReviewRateData((function(prev){return ReviewCodeRevision_objectSpread(ReviewCodeRevision_objectSpread({},prev),{},{status:null,comment:""})})):setContextData((function(prevState){return ReviewCodeRevision_objectSpread(ReviewCodeRevision_objectSpread({},prevState),{},{revision_content:void 0})}))},fontSize:"17px",gridGap:"15px"},t("code-review.back-to-comments"))))):ReviewCodeRevision_jsx(chunk_MPFPK3CX.s,{alignItems:"center",flexDirection:"column",my:"4rem",gridGap:"0.7rem"},ReviewCodeRevision_jsx(Heading.A,{size:"xsm"},t("code-review.no-files-to-review")),ReviewCodeRevision_jsx(Text.A,{size:"14px"},t("code-review.teacher-has-not-reviewed-files"))))}ReviewCodeRevision.displayName="ReviewCodeRevision",ReviewCodeRevision.propTypes={stages:prop_types_default().shape({initial:prop_types_default().string,file_list:prop_types_default().string,code_review:prop_types_default().string,review_code_revision:prop_types_default().string}),setStage:prop_types_default().func,contextData:prop_types_default().arrayOf(prop_types_default().oneOfType([prop_types_default().any])).isRequired,setContextData:prop_types_default().func,disableRate:prop_types_default().bool},ReviewCodeRevision.defaultProps={stages:{initial:"initial",file_list:"file_list",code_review:"code_review",review_code_revision:"review_code_revision"},setStage:function setStage(){},setContextData:function setContextData(){},disableRate:!1};const ReviewModal_ReviewCodeRevision=ReviewCodeRevision;ReviewCodeRevision.__docgenInfo={description:"",methods:[],displayName:"ReviewCodeRevision",props:{stages:{defaultValue:{value:"{\n  initial: 'initial',\n  file_list: 'file_list',\n  code_review: 'code_review',\n  review_code_revision: 'review_code_revision',\n}",computed:!1},description:"",type:{name:"shape",value:{initial:{name:"string",required:!1},file_list:{name:"string",required:!1},code_review:{name:"string",required:!1},review_code_revision:{name:"string",required:!1}}},required:!1},setStage:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"func"},required:!1},setContextData:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"func"},required:!1},disableRate:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},contextData:{description:"",type:{name:"arrayOf",value:{name:"union",value:[{name:"any"}]}},required:!0}}};var useCohortHandler=__webpack_require__("./src/common/hooks/useCohortHandler.js"),LoaderScreen=__webpack_require__("./src/common/components/LoaderScreen.jsx"),chunk_4OGHDZEB=__webpack_require__("./node_modules/@chakra-ui/popover/dist/chunk-4OGHDZEB.mjs"),chunk_3O5UWOX6=__webpack_require__("./node_modules/@chakra-ui/popover/dist/chunk-3O5UWOX6.mjs"),chunk_KVBLLJMP=__webpack_require__("./node_modules/@chakra-ui/popover/dist/chunk-KVBLLJMP.mjs"),chunk_6YK4VVQO=__webpack_require__("./node_modules/@chakra-ui/popover/dist/chunk-6YK4VVQO.mjs"),chunk_BYOOQOH2=__webpack_require__("./node_modules/@chakra-ui/popover/dist/chunk-BYOOQOH2.mjs"),chunk_THJVJMZP=__webpack_require__("./node_modules/@chakra-ui/popover/dist/chunk-THJVJMZP.mjs"),chunk_3JH7ZFSI=__webpack_require__("./node_modules/@chakra-ui/popover/dist/chunk-3JH7ZFSI.mjs"),chunk_6ZNYZUDD=__webpack_require__("./node_modules/@chakra-ui/form-control/dist/chunk-6ZNYZUDD.mjs"),chunk_3GP7MWMA=__webpack_require__("./node_modules/@chakra-ui/form-control/dist/chunk-3GP7MWMA.mjs"),chunk_VFYM6BU6=__webpack_require__("./node_modules/@chakra-ui/checkbox/dist/chunk-VFYM6BU6.mjs"),index_esm=__webpack_require__("./node_modules/yup/index.esm.js"),formik_esm=__webpack_require__("./node_modules/formik/dist/formik.esm.js"),iconDict=__webpack_require__("./src/iconDict.json"),regex=__webpack_require__("./src/utils/regex.js"),chunk_HEDGDMHJ=__webpack_require__("./node_modules/@chakra-ui/tooltip/dist/chunk-HEDGDMHJ.mjs"),ButtonVariants_excluded=["currentTask","allowText","withTooltip","hasPendingSubtasks","noDeliveryFormat","buttonChildren"],ButtonVariants_jsx=react.createElement;function IconByTaskStatus(_ref){var currentTask=_ref.currentTask,noDeliveryFormat=_ref.noDeliveryFormat,hexColor=(0,useStyle.A)().hexColor,hasDeliveryFormat=!noDeliveryFormat;if("PROJECT"===(null==currentTask?void 0:currentTask.task_type)&&currentTask.task_status){var _iconConfig=function getProjectIconConfig(currentTask,hasDeliveryFormat,hexColor){var _projectIconMap$curre;return(null===(_projectIconMap$curre={DONE:{PENDING:hasDeliveryFormat?{icon:"checked",color:hexColor.yellowDefault,width:"27px",height:"27px"}:{icon:"verified",color:hexColor.greenLight,width:"27px"},APPROVED:{icon:"verified",color:hexColor.greenLight,width:"27px"},REJECTED:{icon:"checked",color:hexColor.danger,width:"27px"}}}[null==currentTask?void 0:currentTask.task_status])||void 0===_projectIconMap$curre?void 0:_projectIconMap$curre[null==currentTask?void 0:currentTask.revision_status])||{icon:"unchecked",color:hexColor.gray[300],width:"27px"}}(currentTask,hasDeliveryFormat,hexColor);return ButtonVariants_jsx(Icon.A,_iconConfig)}var iconConfig=function getCommonIconConfig(currentTask,hexColor){var commonIconMap={DONE:{icon:"verified",color:hexColor.greenLight,width:"27px"},PENDING:{icon:"unchecked",color:hexColor.gray[300],width:"27px"}};return commonIconMap[null==currentTask?void 0:currentTask.task_status]||commonIconMap.PENDING}(currentTask,hexColor);return ButtonVariants_jsx(Icon.A,iconConfig)}IconByTaskStatus.displayName="IconByTaskStatus";var ButtonVariants=(0,react.forwardRef)((function(_ref2,ref){var currentTask=_ref2.currentTask,allowText=_ref2.allowText,withTooltip=_ref2.withTooltip,hasPendingSubtasks=_ref2.hasPendingSubtasks,noDeliveryFormat=_ref2.noDeliveryFormat,buttonChildren=_ref2.buttonChildren,rest=(0,objectWithoutProperties.A)(_ref2,ButtonVariants_excluded),hexColor=(0,useStyle.A)().hexColor,textAndIcon=function textByTaskStatus(currentTask,isGuidedExperience,hasPendingSubtasks){var t=(0,useTranslation.A)("dashboard").t,hexColor=(0,useStyle.A)().hexColor,taskIsApproved="APPROVED"===(null==currentTask?void 0:currentTask.revision_status);return"PROJECT"===(null==currentTask?void 0:currentTask.task_type)?function getProjectStatusConfig(currentTask,isGuidedExperience,hasPendingSubtasks,hexColor,t){var _projectStatusMap$cur,projectStatusMap={PENDING:{PENDING:{icon:{icon:isGuidedExperience?"send-2":"longArrowRight",color:"white",width:"20px"},text:t(hasPendingSubtasks?"common:taskStatus.pending-subtasks":"common:taskStatus.send-project")}},DONE:{PENDING:{icon:{icon:"checked",color:hexColor.yellowDefault,width:"20px",height:"20px"},text:t("common:taskStatus.update-project-delivery")},APPROVED:{icon:{icon:"verified",color:hexColor.gray[600],width:"20px"},text:t("common:taskStatus.project-approved")},REJECTED:{icon:{icon:"checked",color:hexColor.danger,width:"20px"},text:t("common:taskStatus.update-project-delivery")}}};return(null===(_projectStatusMap$cur=projectStatusMap[null==currentTask?void 0:currentTask.task_status])||void 0===_projectStatusMap$cur?void 0:_projectStatusMap$cur[null==currentTask?void 0:currentTask.revision_status])||projectStatusMap.PENDING.PENDING}(currentTask,isGuidedExperience,hasPendingSubtasks,hexColor,t):function getCommonTaskStatusConfig(currentTask,taskIsApproved,hexColor,t){var commonStatusMap={DONE:{icon:{icon:"close",color:hexColor.white,width:"12px"},text:t("common:taskStatus.mark-as-not-done")},PENDING:{icon:{icon:"checked2",color:taskIsApproved?hexColor.gray[600]:hexColor.white,width:"14px"},text:t("common:taskStatus.mark-as-done")}};return commonStatusMap[null==currentTask?void 0:currentTask.task_status]||commonStatusMap.PENDING}(currentTask,taskIsApproved,hexColor,t)}(currentTask,withTooltip,hasPendingSubtasks);return withTooltip?ButtonVariants_jsx(chunk_HEDGDMHJ.m,{label:textAndIcon.text,placement:"top"},ButtonVariants_jsx(chunk_NAA7TEES.$,(0,esm_extends.A)({ref,width:"40px",height:"40px",background:hexColor.blueDefault,padding:"20px",borderRadius:"full",variant:"default",gridGap:"12px"},rest),ButtonVariants_jsx(Icon.A,textAndIcon.icon))):allowText?ButtonVariants_jsx(chunk_NAA7TEES.$,(0,esm_extends.A)({ref,display:"flex",minWidth:"26px",minHeight:"26px",background:"blue.default",lineHeight:"15px",padding:"12px 24px",borderRadius:"3px",variant:"default",textTransform:"uppercase",gridGap:"12px"},rest),buttonChildren||ButtonVariants_jsx(react.Fragment,null,ButtonVariants_jsx(Icon.A,textAndIcon.icon),textAndIcon.text)):ButtonVariants_jsx(chunk_NAA7TEES.$,(0,esm_extends.A)({ref,className:"aaaaa",display:"flex",minWidth:"26px",minHeight:"26px",height:"fit-content",background:"none",lineHeight:"0",padding:"0",borderRadius:"30px",variant:"none",textTransform:"none",gridGap:"0"},rest),ButtonVariants_jsx(IconByTaskStatus,{currentTask,noDeliveryFormat}))}));ButtonVariants.displayName="ButtonVariants";const AssignmentButton_ButtonVariants=ButtonVariants;ButtonVariants.propTypes={currentTask:prop_types_default().objectOf(prop_types_default().oneOfType([prop_types_default().any])),allowText:prop_types_default().bool,withTooltip:prop_types_default().bool,hasPendingSubtasks:prop_types_default().bool,noDeliveryFormat:prop_types_default().bool},ButtonVariants.defaultProps={currentTask:null,allowText:!1,withTooltip:!1,hasPendingSubtasks:void 0,noDeliveryFormat:!1},ButtonVariants.__docgenInfo={description:"",methods:[],displayName:"ButtonVariants",props:{currentTask:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"objectOf",value:{name:"union",value:[{name:"any"}]}},required:!1},allowText:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},withTooltip:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},hasPendingSubtasks:{defaultValue:{value:"undefined",computed:!0},description:"",type:{name:"bool"},required:!1},noDeliveryFormat:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1}}};var ProjectSubmitButton_jsx=react.createElement;function ProjectSubmitButton(_ref){var _currentAssetData$del3,_currentAssetData$del4,isGuidedExperience=_ref.isGuidedExperience,isLoading=_ref.isLoading,currentAssetData=_ref.currentAssetData,currentTask=_ref.currentTask,sendProject=_ref.sendProject,onClickHandler=_ref.onClickHandler,allowText=_ref.allowText,isPopoverOpen=_ref.isPopoverOpen,closePopover=_ref.closePopover,togglePopover=_ref.togglePopover,buttonChildren=_ref.buttonChildren,t=(0,useTranslation.A)("dashboard").t,taskIsApproved=allowText&&"APPROVED"===(null==currentTask?void 0:currentTask.revision_status),isButtonDisabled=null===currentTask||taskIsApproved,_useState=(0,react.useState)(!1),acceptTC=_useState[0],setAcceptTC=_useState[1],cohortSession=(0,useCohortHandler.A)().state.cohortSession,_useState2=(0,react.useState)(!1),isSubmitting=_useState2[0],setIsSubmitting=_useState2[1],_useState3=(0,react.useState)(""),githubUrl=_useState3[0],setGithubUrl=_useState3[1],_useState4=(0,react.useState)(!1),isUploading=_useState4[0],setIsUploading=_useState4[1],_useState5=(0,react.useState)(!1),dragOver=_useState5[0],setDragOver=_useState5[1],_useState6=(0,react.useState)([]),fileProps=_useState6[0],setFileProps=_useState6[1],_useStyle=(0,useStyle.A)(),featuredColor=_useStyle.featuredColor,lightColor=_useStyle.lightColor,modal=_useStyle.modal,hexColor=_useStyle.hexColor,fileInputRef=(0,react.useRef)(),fileContainerRef=(0,react.useRef)(null),commonInputActiveColor=(0,chunk_7NLW6UB6.dU)("gray.800","gray.350"),createToast=(0,useCustomToast.A)({toastId:"submit-project-error"}).createToast,handleCloseFile=function handleCloseFile(){setAcceptTC(!1),closePopover()},deliveryFormatExists="string"==typeof(null==currentAssetData?void 0:currentAssetData.delivery_formats),noDeliveryFormat=deliveryFormatExists&&(null==currentAssetData?void 0:currentAssetData.delivery_formats.includes("no_delivery")),deliveryFormatIsUrl=deliveryFormatExists&&(null==currentAssetData?void 0:currentAssetData.delivery_formats.includes("url")),regexUrlExists="string"==typeof(null==currentAssetData?void 0:currentAssetData.delivery_regex_url),mimeTypes=(null==currentAssetData?void 0:currentAssetData.delivery_formats)||"application/pdf,image/png,image/jpeg,image/jpg,image/gif,doc,docx",fileErrorExists=fileProps.some((function(file){return file.formatError}))||fileProps.some((function(file){return file.sizeError})),customUrlValidation=index_esm.Ik().shape({githubUrl:index_esm.Yj().matches(null==currentAssetData?void 0:currentAssetData.delivery_regex_url,t("deliverProject.invalid-url",{url:null==currentAssetData?void 0:currentAssetData.delivery_regex_url})).required(t("deliverProject.url-is-required"))}),githubUrlValidation=index_esm.Ik().shape({githubUrl:index_esm.Yj().matches(regex.Vl,t("deliverProject.invalid-url",{url:"https://github.com/"})).required(t("deliverProject.url-is-required"))}),fileSumSize=fileProps.reduce((function(acc,_ref2){return acc+_ref2.file.size}),0),handleUploadFile=function(){var _ref3=(0,asyncToGenerator.A)(regenerator_default().mark((function _callee(){var formdata,resp,respData;return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return setIsUploading(!0),formdata=new FormData,Array.from(fileProps).forEach((function(_ref4){var file=_ref4.file;formdata.append("file",file)})),_context.next=5,breathecode.A.todo({academy:null==cohortSession?void 0:cohortSession.academy.id}).uploadFile(currentTask.id,formdata);case 5:(null==(resp=_context.sent)?void 0:resp.status)<400?(respData=resp.data[0],setIsUploading(!1),setFileProps([]),sendProject({task:currentTask,githubUrl:null==respData?void 0:respData.url,taskStatus:"DONE"}),createToast({position:"top",title:t("alert-message:files-uploaded"),status:"success",duration:4e3,isClosable:!0}),closePopover()):(setIsUploading(!1),createToast({position:"top",title:t("alert-message:something-went-wrong-with",{property:"Files"}),status:"error",duration:4e3,isClosable:!0}));case 7:case"end":return _context.stop()}}),_callee)})));return function handleUploadFile(){return _ref3.apply(this,arguments)}}();return ProjectSubmitButton_jsx(chunk_4OGHDZEB.A,{id:"task-status",isOpen:isPopoverOpen,onClose:handleCloseFile,trigger:"click",placement:"top-start"},ProjectSubmitButton_jsx(chunk_3O5UWOX6.W,null,ProjectSubmitButton_jsx(AssignmentButton_ButtonVariants,{isLoading,isDisabled:isButtonDisabled,onClick:togglePopover,currentTask,noDeliveryFormat,allowText,buttonChildren,withTooltip:isGuidedExperience})),ProjectSubmitButton_jsx(chunk_KVBLLJMP.h,null,ProjectSubmitButton_jsx(chunk_6YK4VVQO.R,null),ProjectSubmitButton_jsx(chunk_BYOOQOH2.D,null,t("deliverProject.title")),ProjectSubmitButton_jsx(chunk_THJVJMZP.q,null),ProjectSubmitButton_jsx(chunk_3JH7ZFSI.e,null,noDeliveryFormat?ProjectSubmitButton_jsx(chunk_6CSUKJP7.az,{display:"flex",flexDirection:"column",gridGap:"10px"},ProjectSubmitButton_jsx(chunk_P74GIWPW.E,{size:"md"},t("deliverProject.no-delivery-needed")),ProjectSubmitButton_jsx(chunk_NAA7TEES.$,{width:"fit-content",onClick:(0,asyncToGenerator.A)(regenerator_default().mark((function _callee2(){return regenerator_default().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,sendProject({task:currentTask,taskStatus:"DONE"});case 2:closePopover();case 3:case"end":return _context2.stop()}}),_callee2)}))),colorScheme:"blue",isLoading:isSubmitting,type:"submit"},t("deliverProject.handler-text"))):ProjectSubmitButton_jsx(react.Fragment,null,"object"==typeof currentAssetData&&deliveryFormatIsUrl?ProjectSubmitButton_jsx(formik_esm.l1,{initialValues:{githubUrl:(null==currentTask?void 0:currentTask.github_url)||""},onSubmit:(0,asyncToGenerator.A)(regenerator_default().mark((function _callee3(){return regenerator_default().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(setIsSubmitting(!0),""===githubUrl){_context3.next=7;break}return _context3.next=4,sendProject({task:currentTask,githubUrl,taskStatus:"DONE"});case 4:setIsSubmitting(!1),onClickHandler(),closePopover();case 7:case"end":return _context3.stop()}}),_callee3)}))),validationSchema:regexUrlExists?customUrlValidation:githubUrlValidation},(function(){var _currentAssetData$del,_currentAssetData$del2;return ProjectSubmitButton_jsx(formik_esm.lV,{style:{display:"flex",flexDirection:"column",gridGap:null!=currentAssetData&&null!==(_currentAssetData$del=currentAssetData.delivery_instructions)&&void 0!==_currentAssetData$del&&_currentAssetData$del.length?"0px":"14px"}},ProjectSubmitButton_jsx(formik_esm.D0,{name:"githubUrl"},(function(_ref7){var field=_ref7.field,form=_ref7.form;return setGithubUrl(form.values.githubUrl),ProjectSubmitButton_jsx(chunk_6ZNYZUDD.MJ,{isInvalid:form.errors.githubUrl&&form.touched.githubUrl},ProjectSubmitButton_jsx(chunk_GYFRIY2Z.p,(0,esm_extends.A)({},field,{type:"text",id:"githubUrl",color:lightColor,_focus:{color:commonInputActiveColor},placeholder:"https://..."})),ProjectSubmitButton_jsx(chunk_3GP7MWMA.Wt,{marginTop:"10px"},form.errors.githubUrl))})),ProjectSubmitButton_jsx(chunk_6CSUKJP7.az,null,(null==currentAssetData||null===(_currentAssetData$del2=currentAssetData.delivery_instructions)||void 0===_currentAssetData$del2?void 0:_currentAssetData$del2.length)>2?ProjectSubmitButton_jsx(chunk_6CSUKJP7.az,{height:"100%",margin:"0 rem auto 0 auto",transition:"background 0.2s ease-in-out",borderRadius:"3px",maxWidth:"1280px",background:(0,chunk_7NLW6UB6.dU)("white","dark"),width:{base:"100%",md:"auto"},className:"markdown-body ".concat((0,chunk_7NLW6UB6.dU)("light","dark"))},ProjectSubmitButton_jsx(MarkDownParser.A,{content:null==currentAssetData?void 0:currentAssetData.delivery_instructions})):ProjectSubmitButton_jsx(chunk_6CSUKJP7.az,{dangerouslySetInnerHTML:{__html:t("deliverProject.how-to-deliver-text",{link:"https://4geeksacademy.notion.site/How-to-deliver-a-project-e1db0a8b1e2e4fbda361fc2f5457c0de"})}})),ProjectSubmitButton_jsx(chunk_VFYM6BU6.S,{size:"md",isChecked:acceptTC,onChange:function onChange(){return setAcceptTC((function(prev){return!prev}))}},ProjectSubmitButton_jsx(chunk_P74GIWPW.E,{fontSize:"sm"},t("deliverProject.deliver-confirm"))),ProjectSubmitButton_jsx(chunk_NAA7TEES.$,{width:"fit-content",colorScheme:"blue",isLoading:isSubmitting,type:"submit",isDisabled:!acceptTC},t("deliverProject.handler-text")))})):ProjectSubmitButton_jsx(chunk_6CSUKJP7.az,null,(null==currentAssetData||null===(_currentAssetData$del3=currentAssetData.delivery_instructions)||void 0===_currentAssetData$del3?void 0:_currentAssetData$del3.length)>2?ProjectSubmitButton_jsx(chunk_6CSUKJP7.az,{height:"100%",margin:"0 rem auto 0 auto",transition:"background 0.2s ease-in-out",borderRadius:"3px",maxWidth:"1280px",background:(0,chunk_7NLW6UB6.dU)("white","dark"),width:{base:"100%",md:"auto"},className:"markdown-body ".concat((0,chunk_7NLW6UB6.dU)("light","dark"))},ProjectSubmitButton_jsx(MarkDownParser.A,{content:null==currentAssetData?void 0:currentAssetData.delivery_instructions})):ProjectSubmitButton_jsx(chunk_P74GIWPW.E,{size:"md"},t("deliverProject.file-upload"),ProjectSubmitButton_jsx("strong",null,null==currentAssetData||null===(_currentAssetData$del4=currentAssetData.delivery_formats)||void 0===_currentAssetData$del4?void 0:_currentAssetData$del4.replaceAll(",",", ").replaceAll(".","").toUpperCase())),ProjectSubmitButton_jsx(chunk_6CSUKJP7.az,{className:"upload-wrapper ".concat(dragOver&&"dragOver"),m:"10px 0",width:{base:"auto",md:"100%"},height:"86px",position:"relative",color:dragOver?"blue.600":"blue.default",_hover:{color:"blue.default"},transition:"0.3s all ease-in-out",borderRadius:"12px",background:featuredColor},ProjectSubmitButton_jsx(chunk_6CSUKJP7.az,{width:"100%",height:"100%",position:"absolute",display:"flex",justifyContent:"center",alignItems:"center",border:"1px solid currentColor",cursor:"pointer",borderWidth:"2px",borderRadius:"7px"},ProjectSubmitButton_jsx(chunk_6CSUKJP7.az,{className:"icon-bounce"},ProjectSubmitButton_jsx(Icon.A,{icon:"upload",color:"currentColor",width:"24",height:"24"}))),ProjectSubmitButton_jsx(chunk_GYFRIY2Z.p,{type:"file",name:"Upload file",title:"",ref:fileInputRef,onChange:function handleChangeFile(e){setDragOver(!1);var fileProp=e.target.files,formatFileArr=mimeTypes.replaceAll(".","").split(",");fileProp.length>0&&Array.from(fileProp).forEach((function(file){var _fileContainerRef$cur,_fileContainerRef$cur2,type=file.type,name=file.name,size=file.size,extensionName=name.split(".").pop(),formatError=!formatFileArr.some((function(l){return String(type).includes(l)||extensionName===l})),sizeError=size>10485760;fileProps.some((function(item){return item.name===name}))||(setFileProps((function(prev){return[].concat((0,toConsumableArray.A)(prev),[{name,type,size,file,formatError,sizeError}])})),null===(_fileContainerRef$cur=fileContainerRef.current)||void 0===_fileContainerRef$cur||_fileContainerRef$cur.scrollTo({top:null===(_fileContainerRef$cur2=fileContainerRef.current)||void 0===_fileContainerRef$cur2?void 0:_fileContainerRef$cur2.scrollHeight,behavior:"smooth"}),setTimeout((function(){var _fileContainerRef$cur3,_fileContainerRef$cur4;null===(_fileContainerRef$cur3=fileContainerRef.current)||void 0===_fileContainerRef$cur3||_fileContainerRef$cur3.scrollTo({top:null===(_fileContainerRef$cur4=fileContainerRef.current)||void 0===_fileContainerRef$cur4?void 0:_fileContainerRef$cur4.scrollHeight,behavior:"smooth"})}),[300]))}))},accept:null==currentAssetData?void 0:currentAssetData.delivery_formats,placeholder:"Upload profile image",multiple:"multiple",position:"absolute",width:"100%",height:"100%",cursor:"pointer",opacity:"0",padding:"0",onDragOver:function onDragOver(){return setDragOver(!0)},onDragLeave:function onDragLeave(){return setDragOver(!1)}})),ProjectSubmitButton_jsx(chunk_VFYM6BU6.S,{size:"md",mb:"10px",isChecked:acceptTC,onChange:function onChange(){return setAcceptTC((function(prev){return!prev}))}},ProjectSubmitButton_jsx(chunk_P74GIWPW.E,{fontSize:"sm"},t("deliverProject.deliver-confirm"))),fileProps.some((function(file){return"string"==typeof(null==file?void 0:file.type)}))&&ProjectSubmitButton_jsx(react.Fragment,null,ProjectSubmitButton_jsx(chunk_6CSUKJP7.az,{ref:fileContainerRef,maxHeight:"300px",overflowY:"auto"},fileProps.map((function(file){var errorExists=file.formatError||file.sizeError,extension=file.name.split(".").pop(),isImage=["jpg","jpeg","png","gif","svg"].includes(extension),icon=iconDict.includes(extension)?extension:"file";return ProjectSubmitButton_jsx(chunk_6CSUKJP7.az,{key:file.name,display:"flex",my:"15px",p:"8px",border:"1px solid",borderColor:featuredColor,background:modal.background,justifyContent:"space-between",alignItems:"center",borderRadius:"7px"},ProjectSubmitButton_jsx(chunk_6CSUKJP7.az,{display:"flex",gridGap:"9px"},ProjectSubmitButton_jsx(Icon.A,{icon:isImage?"image":icon,color:hexColor.black,width:"32px",height:"41px"}),ProjectSubmitButton_jsx(chunk_6CSUKJP7.az,{position:"relative"},ProjectSubmitButton_jsx(chunk_P74GIWPW.E,{size:"14px",style:{margin:"0px"},withLimit:file.name.length>20},file.name),ProjectSubmitButton_jsx(chunk_P74GIWPW.E,{size:"14px",style:{margin:"0px"},color:errorExists&&hexColor.danger,display:"flex",gridGap:"6px"},errorExists?ProjectSubmitButton_jsx(react.Fragment,null,ProjectSubmitButton_jsx(Icon.A,{icon:"warning",width:"13px",height:"13px",style:{marginTop:"5px"},color:"currentColor",full:!0,secondColor:hexColor.white2}),file.formatError?t("deliverProject.error-file-format"):file.sizeError&&t("deliverProject.error-file-size")):(0,utils.z3)(file.size)))),ProjectSubmitButton_jsx(chunk_6CSUKJP7.az,{borderRadius:"20px",p:"7px",backgroundColor:"gray.500",onClick:function onClick(){!function handleRemoveFileInList(name){var updatedFileList=fileProps.filter((function(file){return file.name!==name}));setFileProps(updatedFileList),fileInputRef.current.removeAttribute("multiple"),fileInputRef.current.value=null,fileInputRef.current.setAttribute("multiple","multiple")}(file.name)},cursor:"pointer"},ProjectSubmitButton_jsx(Icon.A,{icon:"close",width:"10px",height:"10px",color:"#ffffff"})))}))),ProjectSubmitButton_jsx(chunk_6CSUKJP7.az,{py:"12px",color:lightColor},t("deliverProject.total-size",{size:(0,utils.z3)(fileSumSize)}))),ProjectSubmitButton_jsx(chunk_6CSUKJP7.az,{display:"flex",justifyContent:"space-evenly",mb:"6px"},ProjectSubmitButton_jsx(chunk_NAA7TEES.$,{variant:"default",onClick:function onClick(){return handleUploadFile()},isLoading:isUploading,isDisabled:!acceptTC||isUploading||0===(null==fileProps?void 0:fileProps.length)||fileProps.some((function(file){return"string"!=typeof(null==file?void 0:file.type)}))||fileErrorExists||fileSumSize>10485760,textTransform:"uppercase"},t("common:upload")),ProjectSubmitButton_jsx(chunk_NAA7TEES.$,{variant:"link",textTransform:"uppercase",onClick:function onClick(){return handleCloseFile()}},t("common:cancel"))))))))}ProjectSubmitButton.displayName="ProjectSubmitButton",ProjectSubmitButton.propTypes={isLoading:prop_types_default().bool,currentAssetData:prop_types_default().objectOf(prop_types_default().oneOfType([prop_types_default().any])),currentTask:prop_types_default().objectOf(prop_types_default().oneOfType([prop_types_default().any])),sendProject:prop_types_default().func,onClickHandler:prop_types_default().func,closePopover:prop_types_default().func,isPopoverOpen:prop_types_default().bool,allowText:prop_types_default().bool,togglePopover:prop_types_default().func,buttonChildren:prop_types_default().node,isGuidedExperience:prop_types_default().bool},ProjectSubmitButton.defaultProps={isLoading:!1,currentAssetData:{},currentTask:{},sendProject:function sendProject(){},onClickHandler:function onClickHandler(){},closePopover:function closePopover(){},isPopoverOpen:!1,allowText:!1,togglePopover:function togglePopover(){},buttonChildren:null,isGuidedExperience:!1};const AssignmentButton_ProjectSubmitButton=ProjectSubmitButton;ProjectSubmitButton.__docgenInfo={description:"",methods:[],displayName:"ProjectSubmitButton",props:{isLoading:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},currentAssetData:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"objectOf",value:{name:"union",value:[{name:"any"}]}},required:!1},currentTask:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"objectOf",value:{name:"union",value:[{name:"any"}]}},required:!1},sendProject:{defaultValue:{value:"() => { }",computed:!1},description:"",type:{name:"func"},required:!1},onClickHandler:{defaultValue:{value:"() => { }",computed:!1},description:"",type:{name:"func"},required:!1},closePopover:{defaultValue:{value:"() => { }",computed:!1},description:"",type:{name:"func"},required:!1},isPopoverOpen:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},allowText:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},togglePopover:{defaultValue:{value:"() => { }",computed:!1},description:"",type:{name:"func"},required:!1},buttonChildren:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"node"},required:!1},isGuidedExperience:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1}}};var AssignmentReview_jsx=react.createElement;function AssignmentReview_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function AssignmentReview_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?AssignmentReview_ownKeys(Object(t),!0).forEach((function(r){(0,defineProperty.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):AssignmentReview_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var APPROVED="APPROVED",PENDING="PENDING",REJECTED="REJECTED";function AssignmentReview(_ref){var _currentTask$user,_currentTask$user2,_commitFiles$fileList,currentTask=_ref.currentTask,loaders=_ref.loaders,hasFilesToReview=_ref.hasFilesToReview,isStudent=_ref.isStudent,noFilesToReview=_ref.noFilesToReview,disableRate=_ref.disableRate,contextData=_ref.contextData,setStage=_ref.setStage,rejectOrApprove=_ref.rejectOrApprove,updpateAssignment=_ref.updpateAssignment,onClose=_ref.onClose,resetState=_ref.resetState,setLoaders=_ref.setLoaders,externalFiles=_ref.externalFiles,t=(0,useTranslation.A)("assignments").t,createToast=(0,useCustomToast.A)({toastId:" review-status-code-revisions"}).createToast,_useStyle=(0,useStyle.A)(),lightColor=_useStyle.lightColor,featuredColor=_useStyle.featuredColor,_useState=(0,react.useState)(!1),openUndoApproval=_useState[0],setOpenUndoApproval=_useState[1],_useState2=(0,react.useState)(!1),isPopoverOpen=_useState2[0],setIsPopoverOpen=_useState2[1],_useState3=(0,react.useState)(null),currentAssetData=_useState3[0],setCurrentAssetData=_useState3[1],_useState4=(0,react.useState)(),fileData=_useState4[0],setFileData=_useState4[1],isAuthenticatedWithRigobot=(0,useAuth.A)().isAuthenticatedWithRigobot,_useCohortHandler=(0,useCohortHandler.A)(),cohortSession=_useCohortHandler.cohortSession,updateAssignment=_useCohortHandler.updateAssignment,changeStatusAssignment=_useCohortHandler.changeStatusAssignment,commitFiles=(null==contextData?void 0:contextData.commitFiles)||{},codeRevisions=(null==contextData?void 0:contextData.code_revisions)||[],taskStatus=null==currentTask?void 0:currentTask.task_status,revisionStatus=null==currentTask?void 0:currentTask.revision_status,hasNotBeenReviewed=revisionStatus===PENDING,hasBeenApproved=revisionStatus===APPROVED,hasBeenRejected=revisionStatus===REJECTED,fullName="".concat(null==currentTask||null===(_currentTask$user=currentTask.user)||void 0===_currentTask$user?void 0:_currentTask$user.first_name," ").concat(null==currentTask||null===(_currentTask$user2=currentTask.user)||void 0===_currentTask$user2?void 0:_currentTask$user2.last_name),codeRevisionsNotExists="undefined"===codeRevisions,isReadyToApprove=(codeRevisions.length>=0||codeRevisionsNotExists)&&"DONE"===taskStatus,buttonColor={approve:"success",reject:"danger"},buttonText={approve:t("review-assignment.approve"),reject:t("review-assignment.reject")},assignmentButtonColor_remove="danger",handleDownload=function(){var _ref2=(0,asyncToGenerator.A)(regenerator_default().mark((function _callee(fileUrl,fileName){var response,blob,url,link;return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,fetch("/api/download/file?url=".concat(fileUrl,"&filename=").concat(fileName));case 3:if(!(response=_context.sent).ok){_context.next=19;break}return _context.next=7,response.blob();case 7:blob=_context.sent,url=URL.createObjectURL(blob),(link=document.createElement("a")).href=url,link.download=fileName,link.style.display="none",document.body.appendChild(link),link.click(),URL.revokeObjectURL(url),document.body.removeChild(link),_context.next=20;break;case 19:throw new Error("Error al descargar el archivo");case 20:_context.next=25;break;case 22:_context.prev=22,_context.t0=_context.catch(0),(0,logging.z3)("Error al descargar el archivo:",_context.t0);case 25:case"end":return _context.stop()}}),_callee,null,[[0,22]])})));return function handleDownload(_x,_x2){return _ref2.apply(this,arguments)}}(),proceedToCommitFiles=function(){var _ref3=(0,asyncToGenerator.A)(regenerator_default().mark((function _callee2(){return regenerator_default().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:setLoaders((function(prevState){return AssignmentReview_objectSpread(AssignmentReview_objectSpread({},prevState),{},{isFetchingCommitFiles:!0})})),setStage(isStudent?"review_code_revision":"file_list"),setLoaders((function(prevState){return AssignmentReview_objectSpread(AssignmentReview_objectSpread({},prevState),{},{isFetchingCommitFiles:!1})}));case 3:case"end":return _context2.stop()}}),_callee2)})));return function proceedToCommitFiles(){return _ref3.apply(this,arguments)}}(),getAssetData=function(){var _ref4=(0,asyncToGenerator.A)(regenerator_default().mark((function _callee3(){var assetResp,assetData,_cohortSession$academ,fileResp,respData;return regenerator_default().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,breathecode.A.lesson().getAsset(currentTask.associated_slug);case 2:if(!((assetResp=_context3.sent).status<400)){_context3.next=13;break}if(setLoaders((function(prevState){return AssignmentReview_objectSpread(AssignmentReview_objectSpread({},prevState),{},{isOpeningResubmitForm:!1})})),assetData=assetResp.data,setCurrentAssetData(assetData),"string"!=typeof(null==assetData?void 0:assetData.delivery_formats)||null!=assetData&&assetData.delivery_formats.includes("url")){_context3.next=13;break}return _context3.next=10,breathecode.A.todo().getFile({id:currentTask.id,academyId:null==cohortSession||null===(_cohortSession$academ=cohortSession.academy)||void 0===_cohortSession$academ?void 0:_cohortSession$academ.id});case 10:fileResp=_context3.sent,respData=fileResp.data,setFileData(respData);case 13:case"end":return _context3.stop()}}),_callee3)})));return function getAssetData(){return _ref4.apply(this,arguments)}}(),togglePopover=function(){var _ref5=(0,asyncToGenerator.A)(regenerator_default().mark((function _callee4(){return regenerator_default().wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return setLoaders((function(prevState){return AssignmentReview_objectSpread(AssignmentReview_objectSpread({},prevState),{},{isOpeningResubmitForm:!0})})),_context4.next=3,getAssetData();case 3:setIsPopoverOpen(!isPopoverOpen);case 4:case"end":return _context4.stop()}}),_callee4)})));return function togglePopover(){return _ref5.apply(this,arguments)}}(),sendProject=function(){var _ref7=(0,asyncToGenerator.A)(regenerator_default().mark((function _callee5(_ref6){var task,githubUrl,newTaskStatus;return regenerator_default().wrap((function _callee5$(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return task=_ref6.task,githubUrl=_ref6.githubUrl,newTaskStatus=_ref6.taskStatus,_context5.next=3,updateAssignment({task,githubUrl,taskStatus:newTaskStatus});case 3:case"end":return _context5.stop()}}),_callee5)})));return function sendProject(_x3){return _ref7.apply(this,arguments)}}();return(0,react.useEffect)((function(){null!=currentTask&&currentTask.id&&externalFiles&&setFileData(externalFiles)}),[currentTask,externalFiles]),(0,react.useEffect)((function(){hasFilesToReview&&!isReadyToApprove&&createToast({position:"top",title:t(isStudent?"code-review.info-student":"code-review.info-teacher"),status:isStudent?"info":"warning",duration:5e3})}),[hasFilesToReview,isReadyToApprove]),AssignmentReview_jsx(chunk_6CSUKJP7.az,{width:"100%",maxWidth:"500px",margin:"0 auto",mb:"8px",position:"relative"},loaders.isFetchingCodeReviews?AssignmentReview_jsx(chunk_6CSUKJP7.az,{minHeight:"215px"},AssignmentReview_jsx(LoaderScreen.A,{width:"300px",height:"302px"})):AssignmentReview_jsx(react.Fragment,null,AssignmentReview_jsx(chunk_MPFPK3CX.s,{flexDirection:"column",gridGap:"16px"},isStudent?AssignmentReview_jsx(Text.A,{size:"15px",color:lightColor},hasNotBeenReviewed?t("dashboard:modalInfo.still-reviewing"):AssignmentReview_jsx(react.Fragment,null,revisionStatus===APPROVED&&t("code-review.assignment-approved-msg"),revisionStatus===REJECTED&&t("code-review.assignment-rejected-msg"))):AssignmentReview_jsx(chunk_MPFPK3CX.s,{justifyContent:"space-between"},AssignmentReview_jsx(Text.A,{size:"14px",color:lightColor},t("code-review.student-name",{name:fullName})),"DONE"===taskStatus&&hasNotBeenReviewed&&AssignmentReview_jsx(chunk_6CSUKJP7.az,{textTransform:"uppercase",fontSize:"13px",background:"yellow.light",color:"yellow.default",borderRadius:"27px",padding:"2px 6px",fontWeight:700,border:"2px solid",borderColor:"yellow.default"},t("code-review.waiting-for-review"))),(hasBeenApproved||hasBeenRejected)&&(null==currentTask?void 0:currentTask.description)&&AssignmentReview_jsx(chunk_MPFPK3CX.s,{background:featuredColor,flexDirection:"column",gridGap:"4px",padding:"8px 14px",borderRadius:"3px"},AssignmentReview_jsx(chunk_6CSUKJP7.az,{fontSize:"14px",fontWeight:700},t("code-review.your-teacher-said")),AssignmentReview_jsx(Text.A,{display:"flex",alignContent:"center",color:lightColor,borderRadius:"4px",width:"100%",size:"12px"},null==currentTask?void 0:currentTask.description)),AssignmentReview_jsx(chunk_MPFPK3CX.s,{flexDirection:"column",color:lightColor},AssignmentReview_jsx(Text.A,{size:"md",fontWeight:700},t(isStudent?"dashboard:modalInfo.link-info":"code-review.project-delivered")),(null==currentTask?void 0:currentTask.github_url)&&AssignmentReview_jsx(chunk_YTV6DHKL.N,{variant:"default",fontSize:"14px",href:currentTask.github_url},null==currentTask?void 0:currentTask.title),(null==currentTask?void 0:currentTask.delivered_at)&&AssignmentReview_jsx(Text.A,{size:"md"},t("code-review.delivered-at"),"  ",(0,format.A)(new Date(currentTask.delivered_at),"MM/dd/yyyy"))),Array.isArray(fileData)&&fileData.length>0&&AssignmentReview_jsx(chunk_6CSUKJP7.az,{mt:"10px"},AssignmentReview_jsx(Text.A,{size:"l",mb:"8px",fontWeight:700},t("dashboard:modalInfo.files-sended")),AssignmentReview_jsx(chunk_6CSUKJP7.az,{display:"flex",flexDirection:"column",gridGap:"8px",maxHeight:"135px",overflowY:"auto"},fileData.map((function(file){var extension=file.name.split(".").pop(),isImage=["jpg","jpeg","png","gif","svg"].includes(extension),icon=iconDict.includes(extension)?extension:"file",isDownloadable="application/octet-stream"===file.mime,defaultIcon=isDownloadable?"download":icon;return AssignmentReview_jsx(chunk_6CSUKJP7.az,{key:"".concat(file.id,"-").concat(file.name),display:"flex"},AssignmentReview_jsx(Icon.A,{icon:isImage?"image":defaultIcon,color:"currentColor",width:"22px",height:"22px"}),isDownloadable?AssignmentReview_jsx(chunk_NAA7TEES.$,{variant:"link",onClick:function onClick(){return handleDownload(file.url,file.name)},fontSize:"16px",fontWeight:"normal",height:"auto",color:"blue.500",margin:"0 0 0 10px"},file.name):AssignmentReview_jsx(chunk_YTV6DHKL.N,{href:file.url,target:"_blank",rel:"noopener noreferrer",color:"blue.500",margin:"0 0 0 10px"},file.name))})))),(!isAuthenticatedWithRigobot||!noFilesToReview)&&hasFilesToReview&&!disableRate&&(null==commitFiles||null===(_commitFiles$fileList=commitFiles.fileList)||void 0===_commitFiles$fileList?void 0:_commitFiles$fileList.length)>0&&AssignmentReview_jsx(chunk_MPFPK3CX.s,{padding:"8px",flexDirection:"column",gridGap:"16px",background:featuredColor,borderRadius:"4px"},AssignmentReview_jsx(chunk_MPFPK3CX.s,{alignItems:"center",gridGap:"10px"},AssignmentReview_jsx(Icon.A,{icon:"code",width:"18.5px",height:"17px",color:"currentColor"}),AssignmentReview_jsx(Text.A,{size:"14px",fontWeight:700},t("code-review.count-code-reviews",{count:codeRevisions.length||0})),!isStudent&&codeRevisions.length>0&&AssignmentReview_jsx(chunk_NAA7TEES.$,{height:"auto",width:"fit-content",onClick:function onClick(){return setStage("review_code_revision")},isLoading:loaders.isFetchingCommitFiles,variant:"link",display:"flex",alignItems:"center",gridGap:"10px",justifyContent:"start"},t("code-review.read-code-reviews"))),AssignmentReview_jsx(chunk_NAA7TEES.$,{height:"auto",width:"fit-content",onClick:proceedToCommitFiles,isLoading:loaders.isFetchingCommitFiles,variant:"link",display:"flex",alignItems:"center",gridGap:"10px",justifyContent:"start"},t(isStudent?"code-review.read-and-rate-the-feedback":"code-review.start-code-review"),AssignmentReview_jsx(Icon.A,{icon:"longArrowRight",width:"24px",height:"10px",color:"blue.500"}))),isReadyToApprove&&!isStudent&&!hasBeenApproved&&AssignmentReview_jsx(chunk_MPFPK3CX.s,{justifyContent:"space-between",pt:"8px"},["reject","approve"].map((function(type){return AssignmentReview_jsx(chunk_NAA7TEES.$,{key:type,minWidth:"128px",background:buttonColor[type],_hover:{background:buttonColor[type]},onClick:function onClick(){return rejectOrApprove(type)},color:"white",borderRadius:"3px",fontSize:"13px",textTransform:"uppercase"},buttonText[type])}))),isStudent&&revisionStatus!==APPROVED&&AssignmentReview_jsx(chunk_MPFPK3CX.s,{justifyContent:"space-between",pt:"8px"},AssignmentReview_jsx(chunk_NAA7TEES.$,{minWidth:"128px",isLoading:loaders.isRemovingDelivery,background:assignmentButtonColor_remove,_hover:{background:assignmentButtonColor_remove},onClick:function onClick(){setLoaders((function(prevState){return AssignmentReview_objectSpread(AssignmentReview_objectSpread({},prevState),{},{isRemovingDelivery:!0})})),changeStatusAssignment(currentTask,PENDING).finally((function(){setLoaders((function(prevState){return AssignmentReview_objectSpread(AssignmentReview_objectSpread({},prevState),{},{isRemovingDelivery:!1})}))}))},color:"white",borderRadius:"3px",fontSize:"13px",textTransform:"uppercase"},"Remove delivery"),AssignmentReview_jsx(AssignmentButton_ProjectSubmitButton,{isLoading:loaders.isOpeningResubmitForm,currentAssetData,currentTask,sendProject,isPopoverOpen,closePopover:function closePopover(){setIsPopoverOpen(!1)},togglePopover,allowText:!0,buttonChildren:t("code-review.resubmit-assignment")})),!isStudent&&hasBeenApproved&&AssignmentReview_jsx(react.Fragment,null,AssignmentReview_jsx(chunk_NAA7TEES.$,{minWidth:"128px",mt:"8px",onClick:function onClick(){return setOpenUndoApproval(!0)},color:"currentColor",borderRadius:"3px",fontSize:"13px",textTransform:"uppercase",variant:"outline",width:"fit-content",alignSelf:"center"},t("task-handler.undo-approval")),AssignmentReview_jsx(components_UndoApprovalModal,{isOpen:openUndoApproval,onSuccess:function onSuccess(){onClose(),resetState()},onClose:function onClose(){return setOpenUndoApproval(!1)},updpateAssignment,currentTask})))))}AssignmentReview.displayName="AssignmentReview",AssignmentReview.propTypes={currentTask:prop_types_default().objectOf(prop_types_default().oneOfType([prop_types_default().any])),loaders:prop_types_default().objectOf(prop_types_default().oneOfType([prop_types_default().any])),hasFilesToReview:prop_types_default().bool,isStudent:prop_types_default().bool,noFilesToReview:prop_types_default().bool,disableRate:prop_types_default().bool,contextData:prop_types_default().objectOf(prop_types_default().oneOfType([prop_types_default().any])),setStage:prop_types_default().func,rejectOrApprove:prop_types_default().func,updpateAssignment:prop_types_default().func,onClose:prop_types_default().func,resetState:prop_types_default().func,setLoaders:prop_types_default().func,externalFiles:prop_types_default().arrayOf(prop_types_default().oneOfType([prop_types_default().any]))},AssignmentReview.defaultProps={currentTask:{},loaders:{},hasFilesToReview:!1,isStudent:!1,noFilesToReview:!1,disableRate:!1,contextData:{},setStage:function setStage(){},rejectOrApprove:function rejectOrApprove(){},updpateAssignment:function updpateAssignment(){},onClose:function onClose(){},resetState:function resetState(){},setLoaders:function setLoaders(){},externalFiles:[]};const ReviewModal_AssignmentReview=AssignmentReview;AssignmentReview.__docgenInfo={description:"",methods:[],displayName:"AssignmentReview",props:{currentTask:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"objectOf",value:{name:"union",value:[{name:"any"}]}},required:!1},loaders:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"objectOf",value:{name:"union",value:[{name:"any"}]}},required:!1},hasFilesToReview:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},isStudent:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},noFilesToReview:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},disableRate:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},contextData:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"objectOf",value:{name:"union",value:[{name:"any"}]}},required:!1},setStage:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"func"},required:!1},rejectOrApprove:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"func"},required:!1},updpateAssignment:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"func"},required:!1},onClose:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"func"},required:!1},resetState:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"func"},required:!1},setLoaders:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"func"},required:!1},externalFiles:{defaultValue:{value:"[]",computed:!1},description:"",type:{name:"arrayOf",value:{name:"union",value:[{name:"any"}]}},required:!1}}};var AssignmentButton_console=__webpack_require__("./node_modules/console-browserify/index.js"),AssignmentButton_jsx=react.createElement;function AssignmentButton_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function AssignmentButton_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?AssignmentButton_ownKeys(Object(t),!0).forEach((function(r){(0,defineProperty.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):AssignmentButton_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function AssignmentButton(_ref){var currentTask=_ref.currentTask,sendProject=_ref.sendProject,currentAssetData=_ref.currentAssetData,allowText=_ref.allowText,onClickHandler=_ref.onClickHandler,isGuidedExperience=_ref.isGuidedExperience,hasPendingSubtasks=_ref.hasPendingSubtasks,togglePendingSubtasks=_ref.togglePendingSubtasks,setStage=_ref.setStage,_useTranslation=(0,useTranslation.A)("dashboard"),t=_useTranslation.t,lang=_useTranslation.lang,hexColor=(0,useStyle.A)().hexColor,_useCohortHandler=(0,useCohortHandler.A)(),updateTaskReadAt=_useCohortHandler.updateTaskReadAt,handleOpenReviewModal=_useCohortHandler.handleOpenReviewModal,changeStatusAssignment=_useCohortHandler.changeStatusAssignment,createToast=(0,useCustomToast.A)({toastId:"submit-assignment-error"}).createToast,_useState=(0,react.useState)(currentAssetData),currentAsset=_useState[0],setCurrentAsset=_useState[1],_useState2=(0,react.useState)(!1),isPopoverOpen=_useState2[0],setIsPopoverOpen=_useState2[1],_useState3=(0,react.useState)(null),fileData=_useState3[0],setFileData=_useState3[1],_useState4=(0,react.useState)({isFetchingCommitFiles:!1,isOpeningReviewModal:!1,isChangingTaskStatus:!1}),loaders=_useState4[0],setLoaders=_useState4[1],taskIsApproved=allowText&&"APPROVED"===(null==currentTask?void 0:currentTask.revision_status),taskIsApprovedOrRejected="APPROVED"===(null==currentTask?void 0:currentTask.revision_status)||"REJECTED"===(null==currentTask?void 0:currentTask.revision_status),noDeliveryFormat="string"==typeof(null==currentAsset?void 0:currentAsset.delivery_formats)&&(null==currentAsset?void 0:currentAsset.delivery_formats.includes("no_delivery")),isButtonDisabled=null===currentTask||taskIsApproved,fetchAsset=function(){var _ref2=(0,asyncToGenerator.A)(regenerator_default().mark((function _callee(){var _assetData,assetResp,assetData,localeResp;return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,breathecode.A.lesson().getAsset(currentTask.associated_slug);case 3:if(!((null==(assetResp=_context.sent)?void 0:assetResp.status)>=400)){_context.next=6;break}throw new Error("Error fetching asset");case 6:if(assetData=assetResp.data,null===(_assetData=assetData)||void 0===_assetData||null===(_assetData=_assetData.translations)||void 0===_assetData||!_assetData[lang]){_context.next=12;break}return _context.next=10,breathecode.A.lesson().getAsset(assetResp.data.translations[lang]);case 10:localeResp=_context.sent,assetData=localeResp.data;case 12:return setCurrentAsset(assetData),_context.abrupt("return",assetData);case 16:return _context.prev=16,_context.t0=_context.catch(0),AssignmentButton_console.error(_context.t0),createToast({position:"top",title:t("alert-message:something-went-wrong"),status:"error",duration:7e3,isClosable:!0}),_context.abrupt("return",null);case 21:case"end":return _context.stop()}}),_callee,null,[[0,16]])})));return function fetchAsset(){return _ref2.apply(this,arguments)}}(),togglePopover=function(){var _ref3=(0,asyncToGenerator.A)(regenerator_default().mark((function _callee2(){return regenerator_default().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(currentAsset){_context2.next=3;break}return _context2.next=3,fetchAsset();case 3:setIsPopoverOpen(!isPopoverOpen);case 4:case"end":return _context2.stop()}}),_callee2)})));return function togglePopover(){return _ref3.apply(this,arguments)}}(),fetchFileData=function(){var _ref4=(0,asyncToGenerator.A)(regenerator_default().mark((function _callee3(){var _assetData2,_assetData3,assetData,fileResp,respData;return regenerator_default().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(assetData=currentAsset){_context3.next=5;break}return _context3.next=4,fetchAsset();case 4:assetData=_context3.sent;case 5:if("string"!=typeof(null===(_assetData2=assetData)||void 0===_assetData2?void 0:_assetData2.delivery_formats)||null!==(_assetData3=assetData)&&void 0!==_assetData3&&_assetData3.delivery_formats.includes("url")){_context3.next=11;break}return _context3.next=8,breathecode.A.todo().getFile({id:currentTask.id});case 8:fileResp=_context3.sent,respData=fileResp.data,setFileData(respData);case 11:case"end":return _context3.stop()}}),_callee3)})));return function fetchFileData(){return _ref4.apply(this,arguments)}}(),openAssignmentFeedbackModal=function(){var _ref5=(0,asyncToGenerator.A)(regenerator_default().mark((function _callee4(){var _currentTask$cohort;return regenerator_default().wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(!currentTask){_context4.next=7;break}return setLoaders((function(prevState){return AssignmentButton_objectSpread(AssignmentButton_objectSpread({},prevState),{},{isOpeningReviewModal:!0})})),_context4.next=4,updateTaskReadAt(currentTask);case 4:setStage&&setStage("initial"),handleOpenReviewModal({currentTask,externalFiles:fileData,cohortSlug:null===(_currentTask$cohort=currentTask.cohort)||void 0===_currentTask$cohort?void 0:_currentTask$cohort.slug,defaultStage:"initial"}),setLoaders((function(prevState){return AssignmentButton_objectSpread(AssignmentButton_objectSpread({},prevState),{},{isOpeningReviewModal:!1})}));case 7:case"end":return _context4.stop()}}),_callee4)})));return function openAssignmentFeedbackModal(){return _ref5.apply(this,arguments)}}(),loadAndOpenReviewModal=function(){var _ref6=(0,asyncToGenerator.A)(regenerator_default().mark((function _callee5(){return regenerator_default().wrap((function _callee5$(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return setLoaders((function(prevState){return AssignmentButton_objectSpread(AssignmentButton_objectSpread({},prevState),{},{isOpeningReviewModal:!0})})),_context5.next=3,fetchFileData();case 3:openAssignmentFeedbackModal();case 4:case"end":return _context5.stop()}}),_callee5)})));return function loadAndOpenReviewModal(){return _ref6.apply(this,arguments)}}();return"PROJECT"===(null==currentTask?void 0:currentTask.task_type)?"DONE"!==currentTask.task_status&&!taskIsApprovedOrRejected||isGuidedExperience?hasPendingSubtasks&&!taskIsApprovedOrRejected&&"PENDING"===currentTask.task_status?AssignmentButton_jsx(AssignmentButton_ButtonVariants,{isLoading:loaders.isOpeningReviewModal,onClick:togglePendingSubtasks,isDisabled:isButtonDisabled,currentTask,hasPendingSubtasks,withTooltip:isGuidedExperience,noDeliveryFormat}):AssignmentButton_jsx(AssignmentButton_ProjectSubmitButton,{isGuidedExperience,currentAssetData:currentAsset,currentTask,sendProject,onClickHandler,allowText,isPopoverOpen,closePopover:function closePopover(){setIsPopoverOpen(!1)},togglePopover}):AssignmentButton_jsx(react.Fragment,null,(null==currentTask?void 0:currentTask.description)&&AssignmentButton_jsx(chunk_NAA7TEES.$,{variant:"none",onClick:loadAndOpenReviewModal},AssignmentButton_jsx(Icon.A,{icon:"comment",color:hexColor.blueDefault})),AssignmentButton_jsx(AssignmentButton_ButtonVariants,{isLoading:loaders.isOpeningReviewModal,onClick:loadAndOpenReviewModal,isDisabled:isButtonDisabled,currentTask,hasPendingSubtasks,noDeliveryFormat,allowText})):AssignmentButton_jsx(AssignmentButton_ButtonVariants,{isLoading:loaders.isChangingTaskStatus,onClick:function handleNonDeliverableTask(){currentTask&&(setLoaders((function(prevState){return AssignmentButton_objectSpread(AssignmentButton_objectSpread({},prevState),{},{isChangingTaskStatus:!0})})),changeStatusAssignment(currentTask).finally((function(){setLoaders((function(prevState){return AssignmentButton_objectSpread(AssignmentButton_objectSpread({},prevState),{},{isChangingTaskStatus:!1})})),onClickHandler()})))},isDisabled:isButtonDisabled,withTooltip:isGuidedExperience,currentTask,hasPendingSubtasks,allowText})}AssignmentButton.displayName="AssignmentButton";const components_AssignmentButton=AssignmentButton;AssignmentButton.propTypes={currentTask:prop_types_default().objectOf(prop_types_default().oneOfType([prop_types_default().any])),sendProject:prop_types_default().func.isRequired,togglePendingSubtasks:prop_types_default().func,allowText:prop_types_default().bool,onClickHandler:prop_types_default().func,currentAssetData:prop_types_default().objectOf(prop_types_default().oneOfType([prop_types_default().any])),isGuidedExperience:prop_types_default().bool,hasPendingSubtasks:prop_types_default().bool,setStage:prop_types_default().func},AssignmentButton.defaultProps={currentTask:null,allowText:!1,onClickHandler:function onClickHandler(){},currentAssetData:null,togglePendingSubtasks:function togglePendingSubtasks(){},isGuidedExperience:!1,hasPendingSubtasks:void 0,setStage:null},AssignmentButton.__docgenInfo={description:"",methods:[],displayName:"AssignmentButton",props:{currentTask:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"objectOf",value:{name:"union",value:[{name:"any"}]}},required:!1},allowText:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},onClickHandler:{defaultValue:{value:"() => { }",computed:!1},description:"",type:{name:"func"},required:!1},currentAssetData:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"objectOf",value:{name:"union",value:[{name:"any"}]}},required:!1},togglePendingSubtasks:{defaultValue:{value:"() => { }",computed:!1},description:"",type:{name:"func"},required:!1},isGuidedExperience:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},hasPendingSubtasks:{defaultValue:{value:"undefined",computed:!0},description:"",type:{name:"bool"},required:!1},setStage:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"func"},required:!1},sendProject:{description:"",type:{name:"func"},required:!0}}};var chunk_O5CRURSQ=__webpack_require__("./node_modules/@chakra-ui/layout/dist/chunk-O5CRURSQ.mjs"),chunk_B2MGPQRJ=__webpack_require__("./node_modules/@chakra-ui/layout/dist/chunk-B2MGPQRJ.mjs"),chunk_HUQHYERK=__webpack_require__("./node_modules/@chakra-ui/layout/dist/chunk-HUQHYERK.mjs"),ModalInfo=__webpack_require__("./src/common/components/ModalInfo.jsx"),TaskBar_jsx=react.createElement;function TaskBar(_ref){var onClickHandler=_ref.onClickHandler,data=_ref.data,containerStyle=_ref.containerStyle,leftContentStyle=_ref.leftContentStyle,containerPX=_ref.containerPX,width=_ref.width,currIndex=_ref.currIndex,isDone=_ref.isDone,rightItemHandler=_ref.rightItemHandler,link=_ref.link,textWithLink=_ref.textWithLink,mandatory=_ref.mandatory,onDisabledClick=_ref.onDisabledClick,t=(0,useTranslation.A)("dashboard").t,containerBackground=isDone?(0,chunk_7NLW6UB6.dU)("featuredLight","featuredDark"):(0,chunk_7NLW6UB6.dU)("white","primary"),commonFontColor=(0,chunk_7NLW6UB6.dU)("gray.600","gray.200"),_useState=(0,react.useState)(!1),openModal=_useState[0],setOpenModal=_useState[1];return TaskBar_jsx(chunk_O5CRURSQ.B,{width,style:containerStyle,gridGap:"12px",direction:"row",backgroundColor:containerBackground,border:mandatory?"2px solid":"".concat((0,chunk_7NLW6UB6.dU)("1px","2px")," solid"),borderColor:function borderColor(){return mandatory?"yellow.default":isDone?"transparent":(0,chunk_7NLW6UB6.dU)("gray.350","gray.700")}(),height:"auto",py:"10px",px:containerPX||"15px",my:"10px",rounded:"2xl",overflow:"hidden",key:"".concat(data.title,"-").concat(currIndex),_hover:{bg:(0,chunk_7NLW6UB6.dU)("blue.light","featuredDark")}},TaskBar_jsx(ModalInfo.default,{isOpen:openModal,onClose:function onClose(){return setOpenModal(!1)},title:t("modules.target-blank-title"),isReadonly:!0,description:t("modules.target-blank-msg",{title:data.title}),link:data.url,handlerText:t("common:open"),closeText:t("common:close"),closeButtonVariant:"outline",actionHandler:function actionHandler(){void 0!==window&&(setOpenModal(!1),window.open(data.url,"_blank"))}}),TaskBar_jsx(chunk_MPFPK3CX.s,{width:"100%",alignItems:"center"},null!==currIndex&&TaskBar_jsx(react.Fragment,null,mandatory?TaskBar_jsx(Icon.A,{icon:"warning",color:"yellow.default",width:"28px",height:"28px",style:{marginRight:"15px"}}):TaskBar_jsx(chunk_6CSUKJP7.az,{width:"30px",minWidth:"30px",alignSelf:"center",mr:"15px",display:"flex",justifyContent:"center",alignItems:"center",height:"30px",rounded:"full",align:"center",background:isDone?"#0097CF":"#BFBFBF"},TaskBar_jsx(Text.A,{fontWeight:"bold",margin:"0",size:"sm",color:"#FFFFFF"},currIndex+1))),data.icon&&TaskBar_jsx(chunk_6CSUKJP7.az,{display:{base:"none",sm:"flex"},mr:"20px",ml:"20px",minWidth:"22px",width:"22px"},TaskBar_jsx(Icon.A,{icon:data.icon||"book",color:isDone?"#0097CF":"#A4A4A4"})),!1,textWithLink?TaskBar_jsx(chunk_YTV6DHKL.N,{href:"blank"===data.target?"#_blank":link,onClick:function onClick(e){onDisabledClick(),"blank"===data.target&&(e.preventDefault(),e.stopPropagation(),setOpenModal(!0))},style:leftContentStyle,width:"auto"},data.type&&TaskBar_jsx(chunk_B2MGPQRJ.D,{as:"h3",fontSize:"13px",color:commonFontColor,lineHeight:"18px",letterSpacing:"0.05em",margin:"0",isTruncated:!0,fontWeight:"900",textTransform:"uppercase"},data.type),TaskBar_jsx(Text.A,{size:"l",fontWeight:"normal",color:commonFontColor,lineHeight:"18px",letterSpacing:"0.05em",margin:"0"},data.title)):TaskBar_jsx(chunk_MPFPK3CX.s,{cursor:"pointer",onClick:onClickHandler,flexDirection:"column",style:leftContentStyle,justifyContent:"center"},data.type&&TaskBar_jsx(chunk_B2MGPQRJ.D,{as:"h3",fontSize:"13px",color:commonFontColor,lineHeight:"18px",letterSpacing:"0.05em",margin:"0",isTruncated:!0,fontWeight:"900",textTransform:"uppercase"},data.type),TaskBar_jsx(Text.A,{size:"l",fontWeight:"normal",color:commonFontColor,lineHeight:"18px",letterSpacing:"0.05em",margin:"0"},data.title))),TaskBar_jsx(chunk_HUQHYERK.z,{flexShrink:0,width:"auto",style:{margin:0}},rightItemHandler))}TaskBar.displayName="TaskBar",TaskBar.propTypes={onClickHandler:prop_types_default().func,data:prop_types_default().objectOf(prop_types_default().oneOfType([prop_types_default().any])),containerStyle:prop_types_default().objectOf(prop_types_default().oneOfType([prop_types_default().any])),leftContentStyle:prop_types_default().objectOf(prop_types_default().oneOfType([prop_types_default().any])),containerPX:prop_types_default().string,width:prop_types_default().string,link:prop_types_default().string,textWithLink:prop_types_default().bool,rightItemHandler:prop_types_default().element,isDone:prop_types_default().bool,currIndex:prop_types_default().number,mandatory:prop_types_default().bool,onDisabledClick:prop_types_default().func},TaskBar.defaultProps={onClickHandler:function onClickHandler(){},data:{},containerStyle:{},leftContentStyle:{},containerPX:"",width:"100%",link:"",textWithLink:!1,rightItemHandler:null,isDone:!1,currIndex:null,mandatory:!1,onDisabledClick:function onDisabledClick(){}};const components_TaskBar=TaskBar;TaskBar.__docgenInfo={description:"",methods:[],displayName:"TaskBar",props:{onClickHandler:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"func"},required:!1},data:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"objectOf",value:{name:"union",value:[{name:"any"}]}},required:!1},containerStyle:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"objectOf",value:{name:"union",value:[{name:"any"}]}},required:!1},leftContentStyle:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"objectOf",value:{name:"union",value:[{name:"any"}]}},required:!1},containerPX:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},width:{defaultValue:{value:"'100%'",computed:!1},description:"",type:{name:"string"},required:!1},link:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},textWithLink:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},rightItemHandler:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"element"},required:!1},isDone:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},currIndex:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"number"},required:!1},mandatory:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},onDisabledClick:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"func"},required:!1}}};var react_confetti=__webpack_require__("./node_modules/react-confetti/dist/react-confetti.mjs"),NextChakraLink=__webpack_require__("./src/common/components/NextChakraLink.jsx"),ShareButton_jsx=react.createElement;function ShareButton(_ref){var variant=_ref.variant,title=_ref.title,shareText=_ref.shareText,message=_ref.message,link=_ref.link,socials=_ref.socials,withParty=_ref.withParty,onlyModal=_ref.onlyModal,currentTask=_ref.currentTask,_onClose=_ref.onClose,t=(0,useTranslation.A)("profile").t,_useState=(0,react.useState)(!0),party=_useState[0],setParty=_useState[1],_useState2=(0,react.useState)(onlyModal||!1),isOpen=_useState2[0],setIsOpen=_useState2[1],_useState3=(0,react.useState)(!1),copied=_useState3[0],setCopied=_useState3[1],_useStyle=(0,useStyle.A)(),borderColor=_useStyle.borderColor,lightColor=_useStyle.lightColor,modal=_useStyle.modal,featuredBackground=modal.featuredBackground,background=modal.background,hoverBackground=modal.hoverBackground;(0,react.useEffect)((function(){copied&&setTimeout((function(){setCopied(!1)}),3e3)}),[copied]),(0,react.useEffect)((function(){!0===isOpen&&setTimeout((function(){setParty(!1)}),3e3)}),[isOpen]);var socialList=socials||[{name:"x",label:"X",href:"https://www.x.com",color:"#040404"},{name:"facebook",label:"Facebook",href:"https://www.facebook.com",color:"#4267B2",target:"popup"},{name:"linkedin",label:"LinkedIn",href:"https://www.linkedin.com",color:"#0077B5",target:"popup"}];return ShareButton_jsx(react.Fragment,null,ShareButton_jsx(chunk_NAA7TEES.$,{display:onlyModal?"none":"block",variant,onClick:function onClick(){return setIsOpen(!0)},style:{height:"auto"},textTransform:"uppercase"},t("share:button-text")),ShareButton_jsx(chunk_UUGUEMMH.aF,{isOpen,onClose:function onClose(){setIsOpen(!1),setParty(!0),_onClose()},size:"xl"},ShareButton_jsx(chunk_OWW5MU75.m,null),ShareButton_jsx(chunk_66WFFNY3.$,{borderRadius:"17px",marginTop:"10%",backgroundColor:background},ShareButton_jsx(chunk_YBA5A33G.r,{fontSize:"15px",color:lightColor,textAlign:"center",letterSpacing:"0.05em",borderBottom:"1px solid",borderColor,fontWeight:"900",textTransform:"uppercase"},title||t("share:title")),ShareButton_jsx(chunk_YLPWWAYV.s,null),ShareButton_jsx(chunk_PVJ72NKC.c,{pb:4,px:{base:"10px",md:"35px"}},ShareButton_jsx(Text.A,{size:"16px",p:"20px 0 35px 0",textAlign:"center"},shareText||t("share:share-via")),ShareButton_jsx(chunk_O5CRURSQ.B,{display:socialList.length<=2?"flex":"grid",gridTemplateColumns:"repeat(auto-fill, minmax(7rem, 1fr))",justifyItems:"center",justifyContent:socialList.length<=2&&"center",flexDirection:socialList.length<=2&&"row",gridGap:socialList.length<=2&&"3rem"},socialList.map((function(l){return ShareButton_jsx(chunk_6CSUKJP7.az,{key:null==l?void 0:l.name,style:{margin:"0px"},textAlign:"center",display:"flex",flexDirection:"column",gridGap:"6px"},ShareButton_jsx(NextChakraLink.A,{display:"flex",key:l.name,href:l.href,onClick:function onClick(){(0,requests.A$)({dataLayer:{event:"share",method:l.name,content_type:(null==currentTask?void 0:currentTask.task_type)||"CERTIFICATE",item_id:(null==currentTask?void 0:currentTask.associated_slug)||"CERTIFICATE",agent:(0,utils.VK)()}}),"popup"===l.target&&window.open(l.href,"popup","width=600,height=600,scrollbars=no,resizable=no")},target:"popup"===l.target?"popup":"_blank",rel:"noopener noreferrer",minWidth:"68px",minHeight:"68px",alignItems:"center",justifyContent:"center",borderRadius:"35px",backgroundColor:featuredBackground,style:{margin:"0px"}},ShareButton_jsx(Icon.A,{icon:l.name,color:l.color,width:"36px",height:"36px"})),ShareButton_jsx(Text.A,{size:"12px"},l.label))})),ShareButton_jsx(chunk_6CSUKJP7.az,{style:{margin:"0px"},textAlign:"center",alignItems:"center",display:"flex",flexDirection:"column",gridGap:"6px"},ShareButton_jsx(chunk_NAA7TEES.$,{onClick:function onClick(){(0,requests.A$)({dataLayer:{event:"share",method:"copy",content_type:(null==currentTask?void 0:currentTask.task_type)||"CERTIFICATE",item_id:(null==currentTask?void 0:currentTask.associated_slug)||"CERTIFICATE",agent:(0,utils.VK)()}}),function onCopy(){setCopied(!0),navigator.clipboard.writeText(link)}()},backgroundColor:featuredBackground,width:"68px",height:"68px",style:{margin:"0",padding:"0"},_hover:{backgroundColor:hoverBackground},_active:{backgroundColor:hoverBackground},borderRadius:"35px",margin:"0"},ShareButton_jsx(chunk_6CSUKJP7.az,{padding:"10px",backgroundColor:"blue.default",borderRadius:"35px"},ShareButton_jsx(Icon.A,{icon:"copy",width:"22px",height:"22px"}))),ShareButton_jsx(Text.A,{display:"flex",alignItems:"center",gridGap:"4px",color:copied?"success":""},t(copied?"common:copied":"share:copy-link"),copied&&ShareButton_jsx(Icon.A,{icon:"success",width:"12px",height:"12px"}))))),ShareButton_jsx(chunk_YI7XFFAC.j,{margin:"22px 1.5rem",padding:"0"},ShareButton_jsx(Text.A,{size:"13px",fontWeight:"400",lineHeight:"24px",textAlign:"center",padding:"20px 1.4rem",justifyContent:"center",borderRadius:"5px",letterSpacing:"0.05em",backgroundColor:featuredBackground,dangerouslySetInnerHTML:{__html:message||t("share:message")}})),withParty&&isOpen&&ShareButton_jsx(chunk_6CSUKJP7.az,{display:"block",position:"fixed",top:"0",left:"0"},ShareButton_jsx(react_confetti.A,{style:{pointerEvents:"none"},numberOfPieces:180,recycle:party,onConfettiComplete:function onConfettiComplete(confetti){confetti.reset()}})))))}ShareButton.propTypes={variant:prop_types_default().string,onlyModal:prop_types_default().bool,title:prop_types_default().string,currentTask:prop_types_default().objectOf(prop_types_default().oneOfType([prop_types_default().any])),socials:prop_types_default().arrayOf(prop_types_default().shape({name:prop_types_default().string.isRequired,label:prop_types_default().string.isRequired,href:prop_types_default().string.isRequired,color:prop_types_default().string})),link:prop_types_default().string.isRequired,shareText:prop_types_default().string,message:prop_types_default().string,withParty:prop_types_default().bool,onClose:prop_types_default().func},ShareButton.defaultProps={onlyModal:!1,variant:"default",title:"",currentTask:null,socials:[],shareText:"",message:"",withParty:!1,onClose:function onClose(){}};const components_ShareButton=(0,react.memo)(ShareButton);ShareButton.__docgenInfo={description:"",methods:[],displayName:"ShareButton",props:{onlyModal:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},variant:{defaultValue:{value:"'default'",computed:!1},description:"",type:{name:"string"},required:!1},title:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},currentTask:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"objectOf",value:{name:"union",value:[{name:"any"}]}},required:!1},socials:{defaultValue:{value:"[]",computed:!1},description:"",type:{name:"arrayOf",value:{name:"shape",value:{name:{name:"string",required:!0},label:{name:"string",required:!0},href:{name:"string",required:!0},color:{name:"string",required:!1}}}},required:!1},shareText:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},message:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},withParty:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},onClose:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"func"},required:!1},link:{description:"",type:{name:"string"},required:!0}}};var SyllabusActivity_jsx=react.createElement;function SyllabusActivity_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function SyllabusActivity_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?SyllabusActivity_ownKeys(Object(t),!0).forEach((function(r){(0,defineProperty.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):SyllabusActivity_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function SyllabusActivity(_ref){var _cohortsAssignments$c,_data$translations,_data$translations2,_data$translations3,data=_ref.data,currIndex=_ref.currIndex,isDisabled=_ref.isDisabled,onDisabledClick=_ref.onDisabledClick,variant=_ref.variant,showWarning=_ref.showWarning,cohortSlug=_ref.cohortSlug,setStage=_ref.setStage,_useTranslation=(0,useTranslation.A)("dashboard"),t=_useTranslation.t,lang=_useTranslation.lang,_useCohortHandler=(0,useCohortHandler.A)(),taskTodo=_useCohortHandler.taskTodo,state=_useCohortHandler.state,updateAssignment=_useCohortHandler.updateAssignment,cohortSession=state.cohortSession,cohortsAssignments=state.cohortsAssignments,_useState=(0,react.useState)(!1),showModal=_useState[0],setShowModal=_useState[1],hexColor=(0,useStyle.A)().hexColor,currentSlug=data.slug||"",tasks=cohortSlug?null===(_cohortsAssignments$c=cohortsAssignments[cohortSlug])||void 0===_cohortsAssignments$c?void 0:_cohortsAssignments$c.tasks:taskTodo,currentTask=(null==tasks?void 0:tasks.length)>0?tasks.find((function(el){return(null==el?void 0:el.task_type)===(null==data?void 0:data.task_type)&&el.associated_slug===currentSlug})):{},taskTypeLowerCase=null==data?void 0:data.task_type.toLowerCase(),type=data.type,title=data.title,icon=data.icon,target=data.target,url=data.url,pathConnector={lesson:"".concat("en"===lang?"4geeks.com/lesson":"4geeks.com/".concat(lang,"/lesson")),exercise:"".concat("en"===lang?"4geeks.com/interactive-exercise":"4geeks.com/".concat(lang,"/interactive-exercise")),project:"".concat("en"===lang?"4geeks.com/project":"4geeks.com/".concat(lang,"/project")),quiz:"https://assessment.4geeks.com/asset"},shareLink=function shareLink(){var _currentTask$task_typ;return null!=currentTask&&currentTask.slug?"blank"===(null==target?void 0:target.toLowerCase())?url:"".concat(pathConnector[null==currentTask||null===(_currentTask$task_typ=currentTask.task_type)||void 0===_currentTask$task_typ?void 0:_currentTask$task_typ.toLowerCase()],"/").concat(currentTask.associated_slug):""},socials=[{name:"x",label:"X",href:"https://x.com/share?url=&text=".concat(encodeURIComponent(t("share-message",{title:null==currentTask?void 0:currentTask.title}))," %23100DaysOfCode%0A%0A").concat(shareLink()),color:"#000"},{name:"linkedin",label:"LinkedIn",href:"https://linkedin.com/sharing/share-offsite/?url=".concat(shareLink()),color:"#0077B5",target:"popup"}],sendProject=function(){var _ref3=(0,asyncToGenerator.A)(regenerator_default().mark((function _callee(_ref2){var task,githubUrl,taskStatus;return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return task=_ref2.task,githubUrl=_ref2.githubUrl,taskStatus=_ref2.taskStatus,_context.next=3,updateAssignment({task,githubUrl,taskStatus});case 3:setShowModal(!0);case 4:case"end":return _context.stop()}}),_callee)})));return function sendProject(_x){return _ref3.apply(this,arguments)}}(),isDone="DONE"===(null==currentTask?void 0:currentTask.task_status)||"APPROVED"===(null==currentTask?void 0:currentTask.revision_status),isMandatoryTimeOut=showWarning&&"PROJECT"===(null==data?void 0:data.task_type)&&!isDone&&!0===(null==data?void 0:data.mandatory)&&(null==data?void 0:data.daysDiff)>=14,wordConnector={lesson:t("modules.read"),exercise:t("modules.start"),project:t("modules.start"),quiz:t("modules.answer")},langLink="en"!==lang?"/".concat(lang):"",taskTranslations="en"===lang?(null==data||null===(_data$translations=data.translations)||void 0===_data$translations?void 0:_data$translations.en)||(null==data||null===(_data$translations2=data.translations)||void 0===_data$translations2?void 0:_data$translations2.us):(null==data||null===(_data$translations3=data.translations)||void 0===_data$translations3?void 0:_data$translations3[lang])||{},baseLink="".concat(langLink,"/syllabus/").concat(cohortSlug||(null==cohortSession?void 0:cohortSession.slug),"/").concat(data.type.toLowerCase(),"/").concat((null==taskTranslations?void 0:taskTranslations.slug)||(null==currentTask?void 0:currentTask.associated_slug)),link=isDisabled?"#disabled":function generateLink(){return cohortSlug?"/main-cohort/".concat(null==cohortSession?void 0:cohortSession.slug).concat(baseLink):baseLink}(),variants={"open-only":{rightItemHandler:SyllabusActivity_jsx(chunk_YTV6DHKL.N,{href:link,color:hexColor.blueDefault},t("common:open"),"  ",data.type)}};return SyllabusActivity_jsx(react.Fragment,null,SyllabusActivity_jsx(components_TaskBar,(0,esm_extends.A)({mandatory:isMandatoryTimeOut,currIndex,textWithLink:!0,link,isDone,onDisabledClick,leftContentStyle:isDisabled?{textDecoration:"none"}:{},data:{type,title:(null==taskTranslations?void 0:taskTranslations.title)||title,icon,target,url},rightItemHandler:isDisabled?SyllabusActivity_jsx(chunk_NAA7TEES.$,{variant:"link",gridGap:"4px",onClick:function onClick(){return onDisabledClick(SyllabusActivity_objectSpread(SyllabusActivity_objectSpread({},data),{},{title:(null==taskTranslations?void 0:taskTranslations.title)||title}))}},SyllabusActivity_jsx(Icon.A,{icon:"padlock",width:"20px",height:"20px"}),SyllabusActivity_jsx(chunk_6CSUKJP7.az,{as:"span",display:{base:"none",sm:"initial"}},"".concat(null==wordConnector?void 0:wordConnector[taskTypeLowerCase]," ").concat(t("common:".concat(taskTypeLowerCase)).toLocaleLowerCase()))):SyllabusActivity_jsx(components_AssignmentButton,{currentTask,sendProject,setStage})},variants[variant])),"DONE"===(null==currentTask?void 0:currentTask.task_status)&&showModal&&SyllabusActivity_jsx(components_ShareButton,{variant:"outline",title:t("projects:share-certificate.title"),shareText:t("projects:share-certificate.share-via",{project:null==currentTask?void 0:currentTask.title}),link:shareLink(),socials,currentTask,onlyModal:!0,withParty:!0}))}SyllabusActivity.propTypes={data:prop_types_default().objectOf(prop_types_default().oneOfType([prop_types_default().any])),currIndex:prop_types_default().number,isDisabled:prop_types_default().bool,onDisabledClick:prop_types_default().func,variant:prop_types_default().string,showWarning:prop_types_default().bool,cohortSlug:prop_types_default().string,setStage:prop_types_default().func},SyllabusActivity.defaultProps={data:{},currIndex:0,isDisabled:!1,onDisabledClick:function onDisabledClick(){},variant:"default",showWarning:!0,cohortSlug:null,setStage:null};const SyllabusModule_SyllabusActivity=(0,react.memo)(SyllabusActivity);SyllabusActivity.__docgenInfo={description:"",methods:[],displayName:"SyllabusActivity",props:{data:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"objectOf",value:{name:"union",value:[{name:"any"}]}},required:!1},currIndex:{defaultValue:{value:"0",computed:!1},description:"",type:{name:"number"},required:!1},isDisabled:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},onDisabledClick:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"func"},required:!1},variant:{defaultValue:{value:"'default'",computed:!1},description:"",type:{name:"string"},required:!1},showWarning:{defaultValue:{value:"true",computed:!1},description:"",type:{name:"bool"},required:!1},cohortSlug:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"string"},required:!1},setStage:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"func"},required:!1}}};var PendingActivities_jsx=react.createElement;function PendingActivities(_ref){var cohortSlug=_ref.cohortSlug,setStage=_ref.setStage,t=(0,useTranslation.A)("dashboard").t,_useStyle=(0,useStyle.A)(),hexColor=_useStyle.hexColor,featuredLight=_useStyle.featuredLight,fontColor=_useStyle.fontColor,_useCohortHandler=(0,useCohortHandler.A)(),getMandatoryProjects=_useCohortHandler.getMandatoryProjects,taskTodo=_useCohortHandler.taskTodo,mandatoryProjects=getMandatoryProjects(cohortSlug);return PendingActivities_jsx(chunk_6CSUKJP7.az,null,PendingActivities_jsx(chunk_6CSUKJP7.az,{backgroundColor:featuredLight,padding:"8px",borderRadius:"8px",border:"1px solid",borderColor:hexColor.borderColor},PendingActivities_jsx(chunk_6CSUKJP7.az,{mb:"5px",display:"flex",alignItems:"center",gap:"5px"},PendingActivities_jsx(Icon.A,{icon:"info",width:"14px",height:"14px",color:fontColor}),PendingActivities_jsx(Heading.A,{size:"md"},t("mandatoryProjects.title"))),PendingActivities_jsx(Text.A,{size:"md"},t("mandatoryProjects.description"))),mandatoryProjects.map((function(project,i){return PendingActivities_jsx(SyllabusModule_SyllabusActivity,{key:"".concat(project.title,"-pending-modal"),currIndex:i,data:project,taskTodo,showWarning:!1,cohortSlug,setStage})})))}PendingActivities.displayName="PendingActivities",PendingActivities.propTypes={cohortSlug:prop_types_default().string,setStage:prop_types_default().func},PendingActivities.defaultProps={cohortSlug:null,setStage:null};const ReviewModal_PendingActivities=PendingActivities;PendingActivities.__docgenInfo={description:"",methods:[],displayName:"PendingActivities",props:{cohortSlug:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"string"},required:!1},setStage:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"func"},required:!1}}};var ReviewModal_excluded=["isExternal","externalFiles","isOpen","isStudent","externalData","defaultStage","fixedStage","onClose","updpateAssignment","currentTask","cohortSlug","projectLink","disableRate","disableLiking"],ReviewModal_jsx=react.createElement;function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}function ReviewModal_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function ReviewModal_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ReviewModal_ownKeys(Object(t),!0).forEach((function(r){(0,defineProperty.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ReviewModal_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var stages={initial:"initial",file_list:"file_list",code_review:"code_review",approve_or_reject_code_revision:"approve_or_reject_code_revision",review_code_revision:"review_code_revision",deliver_assignment:"deliver_assignment",pending_activities:"pending_activities"},ReviewModal_APPROVED="APPROVED",ReviewModal_REJECTED="REJECTED";function ReviewModal(_ref){var _contextData$commitFi,_contextData$code_rev,_contextData$commitFi2,_contextData$revision,isExternal=_ref.isExternal,externalFiles=_ref.externalFiles,isOpen=_ref.isOpen,isStudent=_ref.isStudent,externalData=_ref.externalData,defaultStage=_ref.defaultStage,_onClose=(_ref.fixedStage,_ref.onClose),updpateAssignment=_ref.updpateAssignment,currentTask=_ref.currentTask,cohortSlug=_ref.cohortSlug,projectLink=_ref.projectLink,disableRate=_ref.disableRate,disableLiking=_ref.disableLiking,rest=(0,objectWithoutProperties.A)(_ref,ReviewModal_excluded),t=(0,useTranslation.A)("assignments").t,_useAuth=(0,useAuth.A)(),isAuthenticated=_useAuth.isAuthenticated,isAuthenticatedWithRigobot=_useAuth.isAuthenticatedWithRigobot,user=_useAuth.user,createToast=(0,useCustomToast.A)({toastId:" review-status-code-revisions"}).createToast,_useState=(0,react.useState)(""),selectedText=_useState[0],setSelectedText=_useState[1],_useState2=(0,react.useState)({isFetchingCommitFiles:!1,isFetchingCodeReviews:!1,isApprovingOrRejecting:!1}),loaders=_useState2[0],setLoaders=_useState2[1],_useState3=(0,react.useState)(""),comment=_useState3[0],setComment=_useState3[1],_useState4=(0,react.useState)(""),reviewStatus=_useState4[0],setReviewStatus=_useState4[1],_useState5=(0,react.useState)({commitFiles:{task:{},fileList:[]},commitFile:{},code_revisions:[],my_revisions:[],revision_content:{}}),contextData=_useState5[0],setContextData=_useState5[1],initialStage={current:defaultStage,previous:{}},_useState6=(0,react.useState)(initialStage),stageHistory=_useState6[0],setStageHistory=_useState6[1],hexColor=(0,useStyle.A)().hexColor,hasBeenApproved=(null==currentTask?void 0:currentTask.revision_status)===ReviewModal_APPROVED,noFilesToReview=!(hasBeenApproved||0!==(null==contextData||null===(_contextData$commitFi=contextData.commitFiles)||void 0===_contextData$commitFi||null===(_contextData$commitFi=_contextData$commitFi.fileList)||void 0===_contextData$commitFi?void 0:_contextData$commitFi.length)&&"commitFiles"in contextData),hasFilesToReview=(null==contextData||null===(_contextData$code_rev=contextData.code_revisions)||void 0===_contextData$code_rev?void 0:_contextData$code_rev.length)>0||!isStudent,stage=null==stageHistory?void 0:stageHistory.current,isStageWithDefaultStyles=hasBeenApproved||stage===stages.initial||stage===stages.approve_or_reject_code_revision||noFilesToReview,showGoBackButton=Object.keys(stageHistory.previous).length>1,revisionStatusUpperCase={approve:ReviewModal_APPROVED,reject:ReviewModal_REJECTED},reviewHint={approve:t("code-review.why-approve"),reject:t("code-review.why-reject")},alertStatus={approve:t("alert-message:review-assignment-approve"),reject:t("alert-message:review-assignment-reject")},setStage=function setStage(newStage){var type=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"next";setStageHistory((function(prevState){if("next"===type){var newPrevious=ReviewModal_objectSpread(ReviewModal_objectSpread({},null==prevState?void 0:prevState.previous),{},(0,defineProperty.A)({},null==prevState?void 0:prevState.current,!0));return{current:newStage,previous:newPrevious}}if("back"===type){var keys=Object.keys(prevState.previous),lastKey=keys[keys.length-1],newCurrent=lastKey||defaultStage,_prevState$previous=prevState.previous;_prevState$previous[lastKey];return{current:newCurrent,previous:(0,objectWithoutProperties.A)(_prevState$previous,[lastKey].map(_toPropertyKey))}}return prevState}))},getRepoFiles=function(){var _ref2=(0,asyncToGenerator.A)(regenerator_default().mark((function _callee(){var response,data;return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(_context.prev=0,isAuthenticatedWithRigobot&&currentTask.github_url){_context.next=3;break}return _context.abrupt("return");case 3:if(!isStudent){_context.next=9;break}return _context.next=6,breathecode.A.assignments().personalFiles(currentTask.id);case 6:_context.t0=_context.sent,_context.next=12;break;case 9:return _context.next=11,breathecode.A.assignments().files(currentTask.id);case 11:_context.t0=_context.sent;case 12:return response=_context.t0,_context.next=15,response.json();case 15:data=_context.sent,response.ok?setContextData((function(prevState){return ReviewModal_objectSpread(ReviewModal_objectSpread({},prevState),{},{commitFiles:{task:currentTask,fileList:data}})})):setContextData((function(prevState){return ReviewModal_objectSpread(ReviewModal_objectSpread({},prevState),{},{commitFiles:{task:currentTask,fileList:[]}})})),_context.next=22;break;case 19:_context.prev=19,_context.t1=_context.catch(0),(0,logging.z3)("Error fetching repo files:",_context.t1);case 22:case"end":return _context.stop()}}),_callee,null,[[0,19]])})));return function getRepoFiles(){return _ref2.apply(this,arguments)}}(),getCodeRevisions=function(){var _ref3=(0,asyncToGenerator.A)(regenerator_default().mark((function _callee2(){var response,data,codeRevisionsSortedByDate;return regenerator_default().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(_context2.prev=0,isAuthenticatedWithRigobot&&currentTask.github_url){_context2.next=3;break}return _context2.abrupt("return");case 3:if(!isStudent){_context2.next=9;break}return _context2.next=6,breathecode.A.assignments().getPersonalCodeRevisionsByTask(currentTask.id);case 6:_context2.t0=_context2.sent,_context2.next=12;break;case 9:return _context2.next=11,breathecode.A.assignments().getCodeRevisions(currentTask.id);case 11:_context2.t0=_context2.sent;case 12:return response=_context2.t0,_context2.next=15,response.json();case 15:data=_context2.sent,response.ok?(codeRevisionsSortedByDate=data.sort((function(a,b){return new Date(b.created_at)-new Date(a.created_at)})),setContextData((function(prev){return ReviewModal_objectSpread(ReviewModal_objectSpread({},prev),{},{code_revisions:codeRevisionsSortedByDate,my_revisions:data.filter((function(revision){var _revision$reviewer;return(null==revision||null===(_revision$reviewer=revision.reviewer)||void 0===_revision$reviewer?void 0:_revision$reviewer.username)===(null==user?void 0:user.email)}))})}))):createToast({title:t("alert-message:something-went-wrong"),description:"Error: ".concat(null==data?void 0:data.Error,". ").concat((null==data?void 0:data.solution)||""),status:"error",duration:5e3,position:"top",isClosable:!0}),_context2.next=22;break;case 19:_context2.prev=19,_context2.t1=_context2.catch(0),(0,logging.z3)("Error fetching code revisions:",_context2.t1);case 22:return _context2.prev=22,setLoaders((function(prevState){return ReviewModal_objectSpread(ReviewModal_objectSpread({},prevState),{},{isFetchingCodeReviews:!1})})),_context2.finish(22);case 25:case"end":return _context2.stop()}}),_callee2,null,[[0,19,22,25]])})));return function getCodeRevisions(){return _ref3.apply(this,arguments)}}();(0,react.useEffect)((function(){if(isOpen&&isAuthenticated&&null!=user&&user.id){var revisionData=null==contextData?void 0:contextData.revision_content,dataToReport=null!=revisionData&&revisionData.id?{event:"review_modal_open",feedback_type:isStudent?"read_code_review":"write_code_review",feedback_id:null==revisionData?void 0:revisionData.id,language:null==revisionData?void 0:revisionData.language,reviewer:null==revisionData?void 0:revisionData.reviewer,comment:null==revisionData?void 0:revisionData.revision_rating_comments,user_id:user.id,updated_at:null==revisionData?void 0:revisionData.updated_at,created_at:null==revisionData?void 0:revisionData.created_at}:{event:"review_modal_open",feedback_type:"project_task_review",task_id:null==currentTask?void 0:currentTask.id,task_slug:null==currentTask?void 0:currentTask.associated_slug,task_mandatory:null==currentTask?void 0:currentTask.mandatory,task_type:null==currentTask?void 0:currentTask.task_type,task_status:null==currentTask?void 0:currentTask.task_status,task_github_url:null==currentTask?void 0:currentTask.github_url,user_id:user.id};(0,requests.A$)({dataLayer:ReviewModal_objectSpread(ReviewModal_objectSpread({},dataToReport),{},{agent:(0,utils.VK)()})})}}),[isOpen,isAuthenticated,contextData]),(0,react.useEffect)((function(){externalData&&setContextData((function(){return ReviewModal_objectSpread({},externalData)}))}),[isOpen,externalData]),(0,react.useEffect)((function(){defaultStage&&setStage(defaultStage),isOpen&&(null==currentTask?void 0:currentTask.id)>0&&!externalData&&(setLoaders((function(prevState){return ReviewModal_objectSpread(ReviewModal_objectSpread({},prevState),{},{isFetchingCodeReviews:!0})})),getRepoFiles(),getCodeRevisions())}),[isOpen,null==currentTask?void 0:currentTask.id,externalData]);var handleResetFlow=function handleResetFlow(){setContextData((function(prevState){return ReviewModal_objectSpread(ReviewModal_objectSpread({},prevState),{},{commitFile:{}})})),setSelectedText("")},resetState=function resetState(){setContextData({}),setStage(stages.initial),setStageHistory(initialStage),setReviewStatus(""),setSelectedText("")},widthSizes={initial:isAuthenticatedWithRigobot&&noFilesToReview||!hasFilesToReview?"28rem":"36rem",approve_or_reject_code_revision:"36rem",file_list:"42rem",code_review:"74rem",review_code_revision:"56rem",pending_activities:"2xl"},handleCommitFilesStage=function handleCommitFilesStage(){setStage(isStudent?stages.review_code_revision:stages.file_list)},proceedToCommitFiles=function(){var _ref4=(0,asyncToGenerator.A)(regenerator_default().mark((function _callee3(){return regenerator_default().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:setLoaders((function(prevState){return ReviewModal_objectSpread(ReviewModal_objectSpread({},prevState),{},{isFetchingCommitFiles:!0})})),handleCommitFilesStage(),setLoaders((function(prevState){return ReviewModal_objectSpread(ReviewModal_objectSpread({},prevState),{},{isFetchingCommitFiles:!1})}));case 3:case"end":return _context3.stop()}}),_callee3)})));return function proceedToCommitFiles(){return _ref4.apply(this,arguments)}}();return ReviewModal_jsx(components_SimpleModal,(0,esm_extends.A)({isOpen,onClose:function onClose(){_onClose(),resetState()},title:function getTitle(){return stage===stages.initial?t("code-review.assignment-review"):stage===stages.approve_or_reject_code_revision?t("code-review.write-feedback"):stage===stages.deliver_assignment?t("deliver-assignment.title"):stage===stages.pending_activities?t("dashboard:mandatoryProjects.title"):ReviewModal_jsx(chunk_MPFPK3CX.s,{alignItems:"center",justifyContent:"center"},ReviewModal_jsx(Icon.A,{icon:"rigobot-avatar-tiny",width:"24px",height:"24px",mr:"8px"}),t("code-review.rigobot-code-review"))}(),closeOnOverlayClick:!1,maxWidth:widthSizes[stage],minWidth:stage===stages.code_review&&"83vw",minHeight:isStageWithDefaultStyles?"auto":"30rem",overflow:stages.initial?"initial":"auto",margin:"0 10px",bodyStyles:{display:"flex",gridGap:"20px",padding:"1rem 1.5rem"},headerStyles:{userSelect:"none",textTransform:isStageWithDefaultStyles?"uppercase":"initial",fontSize:isStageWithDefaultStyles?"15px":"26px",textAlign:"center",fontWeight:700},closeButtonStyles:{top:isStageWithDefaultStyles?2:5},leftButton:showGoBackButton&&ReviewModal_jsx(chunk_NAA7TEES.$,{position:"absolute",variant:"unstyled",top:isStageWithDefaultStyles?2:4,left:5,onClick:function onClick(){setStage("","back"),handleResetFlow()},"aria-label":t("common:go-back")},ReviewModal_jsx(Icon.A,{icon:"arrowLeft2",width:"26px",height:"15px",color:hexColor.black}))},rest),stage===stages.initial&&currentTask&&ReviewModal_jsx(ReviewModal_AssignmentReview,{currentTask,loaders,hasFilesToReview,isStudent,externalFiles,noFilesToReview,disableRate,contextData,setStage,rejectOrApprove:function rejectOrApprove(status){(0,requests.A$)({dataLayer:{event:"feedback_reject_or_approve",action_type:status,task_id:null==currentTask?void 0:currentTask.id,user_id:user.id,agent:(0,utils.VK)()}}),setStage(stages.approve_or_reject_code_revision),setReviewStatus(status)},updpateAssignment,onClose:_onClose,resetState,setLoaders}),stage===stages.approve_or_reject_code_revision&&ReviewModal_jsx(chunk_MPFPK3CX.s,{flexDirection:"column",maxWidth:"500px",margin:"0 auto",gridGap:"15px",width:"100%"},ReviewModal_jsx(chunk_6CSUKJP7.az,{position:"relative"},ReviewModal_jsx(Text.A,{fontSize:"14px",fontWeight:700,mb:"18px"},reviewHint[reviewStatus]),ReviewModal_jsx(chunk_OEQDSMWZ.T,{"aria-label":"feedback input",fontSize:"12px",onChange:function onChangeComment(e){setComment(e.target.value)},minHeight:"134",placeholder:t("code-review.start-review-here")}),ReviewModal_jsx(chunk_6CSUKJP7.az,{position:"absolute",bottom:1.5,right:3,color:comment.length<10?"#EB5757":"currentColor"},"".concat(comment.length," / ").concat(450))),ReviewModal_jsx(chunk_NAA7TEES.$,{onClick:function approveOrRejectProject(){(0,requests.A$)({dataLayer:{event:"feedback_action",comment,action_type:reviewStatus,task_id:null==currentTask?void 0:currentTask.id,user_id:user.id,agent:(0,utils.VK)()}}),void 0!==revisionStatusUpperCase[reviewStatus]&&(setLoaders((function(prevState){return ReviewModal_objectSpread(ReviewModal_objectSpread({},prevState),{},{isApprovingOrRejecting:!0})})),breathecode.A.todo().update({id:currentTask.id,revision_status:revisionStatusUpperCase[reviewStatus],description:comment}).then((function(){createToast({position:"top",title:alertStatus[reviewStatus],status:"success",duration:5e3,isClosable:!0}),updpateAssignment(ReviewModal_objectSpread(ReviewModal_objectSpread({},currentTask),{},{id:currentTask.id,revision_status:revisionStatusUpperCase[reviewStatus],description:comment})),resetState(),_onClose()})).catch((function(){createToast({position:"top",title:t("alert-message:review-assignment-error"),status:"error",duration:5e3,isClosable:!0})})).finally((function(){setLoaders((function(prevState){return ReviewModal_objectSpread(ReviewModal_objectSpread({},prevState),{},{isApprovingOrRejecting:!1})}))})))},isLoading:loaders.isApprovingOrRejecting,variant:"default",alignSelf:"flex-end",isDisabled:comment.length<10||void 0===revisionStatusUpperCase[reviewStatus]},t("code-review.send-feedback"))),stage===stages.file_list&&!loaders.isFetchingCommitFiles&&ReviewModal_jsx(ReviewModal_FileList,{isStudent,contextData,setContextData,currentTask,updpateAssignment,stage,stages,setStage,setReviewStatus}),stage===stages.code_review&&((null===(_contextData$commitFi2=contextData.commitFile)||void 0===_contextData$commitFi2?void 0:_contextData$commitFi2.code)||(null===(_contextData$revision=contextData.revision_content)||void 0===_contextData$revision?void 0:_contextData$revision.code))&&ReviewModal_jsx(ReviewModal_CodeReview,{isExternal,onClose:_onClose,disableRate,isStudent,setStage,handleResetFlow,contextData,setContextData,selectedText,handleSelectedText:function handleSelectedText(){var text=window.getSelection().toString();text.length>0&&setSelectedText(text)}}),stage===stages.review_code_revision&&ReviewModal_jsx(ReviewModal_ReviewCodeRevision,{disableRate:disableLiking,contextData,setContextData,stage,stages,setStage}),stage===stages.deliver_assignment&&ReviewModal_jsx(ReviewModal_DeliverModalContent,(0,esm_extends.A)({onClose:_onClose,isStudent,contextData,currentTask,projectLink,updpateAssignment,setStage,showCodeReviews:(!isAuthenticatedWithRigobot||!noFilesToReview)&&hasFilesToReview&&!disableRate,loaders,proceedToCommitFiles},rest)),stage===stages.pending_activities&&ReviewModal_jsx(ReviewModal_PendingActivities,{cohortSlug,setStage}))}ReviewModal.displayName="ReviewModal",ReviewModal.propTypes={isOpen:prop_types_default().bool,onClose:prop_types_default().func,currentTask:prop_types_default().objectOf(prop_types_default().oneOfType([prop_types_default().any])),projectLink:prop_types_default().string,defaultStage:prop_types_default().string,updpateAssignment:prop_types_default().func,externalData:prop_types_default().objectOf(prop_types_default().oneOfType([prop_types_default().any])),isStudent:prop_types_default().bool,fixedStage:prop_types_default().bool,disableRate:prop_types_default().bool,disableLiking:prop_types_default().bool,isExternal:prop_types_default().bool,cohortSlug:prop_types_default().string},ReviewModal.defaultProps={isOpen:!1,onClose:function onClose(){},currentTask:{},projectLink:"",defaultStage:stages.initial,updpateAssignment:function updpateAssignment(){},externalData:null,isStudent:!1,fixedStage:!1,disableRate:!1,disableLiking:!1,isExternal:!1,cohortSlug:null};const components_ReviewModal=ReviewModal;ReviewModal.__docgenInfo={description:"",methods:[],displayName:"ReviewModal",props:{isOpen:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},onClose:{defaultValue:{value:"() => { }",computed:!1},description:"",type:{name:"func"},required:!1},currentTask:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"objectOf",value:{name:"union",value:[{name:"any"}]}},required:!1},projectLink:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},defaultStage:{defaultValue:{value:"'initial'",computed:!1},description:"",type:{name:"string"},required:!1},updpateAssignment:{defaultValue:{value:"() => { }",computed:!1},description:"",type:{name:"func"},required:!1},externalData:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"objectOf",value:{name:"union",value:[{name:"any"}]}},required:!1},isStudent:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},fixedStage:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},disableRate:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},disableLiking:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},isExternal:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},cohortSlug:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"string"},required:!1}}};var variables=__webpack_require__("./src/utils/variables.js"),Feedback_jsx=react.createElement;function Feedback_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function Feedback_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Feedback_ownKeys(Object(t),!0).forEach((function(r){(0,defineProperty.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Feedback_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var base64regex=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/;function Feedback(_ref){var _user$github,storyConfig=_ref.storyConfig,_useTranslation=(0,useTranslation.A)("choose-program"),t=_useTranslation.t,lang=_useTranslation.lang,_useAuth=(0,useAuth.A)(),isAuthenticated=_useAuth.isAuthenticated,isAuthenticatedWithRigobot=_useAuth.isAuthenticatedWithRigobot,user=_useAuth.user,conntectToRigobot=_useAuth.conntectToRigobot,accessToken=(0,utils.$E)("accessToken"),_useStyle=(0,useStyle.A)(),backgroundColor=_useStyle.backgroundColor,featuredColor=_useStyle.featuredColor,borderColor2=_useStyle.borderColor2,hexColor=_useStyle.hexColor,featuredLight=_useStyle.featuredLight,_useState=(0,react.useState)({}),selectedData=_useState[0],setSelectedData=_useState[1],_useState2=(0,react.useState)([]),codeRevisions=_useState2[0],setCodeRevisions=_useState2[1],_useState3=(0,react.useState)(!1),isOpen=_useState3[0],setIsOpen=_useState3[1],isStorybookView=null==storyConfig?void 0:storyConfig.externalCodeRevisions,isConnectedWithGithub=null==user||null===(_user$github=user.github)||void 0===_user$github?void 0:_user$github.username,createToast=(0,useCustomToast.A)({toastId:"rigobot-connected-with-rigo"}).createToast,getCodeRevisions=function(){var _ref2=(0,asyncToGenerator.A)(regenerator_default().mark((function _callee(){var response,data,codeRevisionsSortedByDate;return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(_context.prev=0,!isConnectedWithGithub){_context.next=9;break}return _context.next=4,breathecode.A.assignments().getPersonalCodeRevisions();case 4:return response=_context.sent,_context.next=7,response.json();case 7:data=_context.sent,response.ok&&(codeRevisionsSortedByDate=data.sort((function(a,b){return new Date(b.created_at)-new Date(a.created_at)})),setCodeRevisions(codeRevisionsSortedByDate));case 9:_context.next=14;break;case 11:_context.prev=11,_context.t0=_context.catch(0),(0,logging.z3)("Error fetching code revisions:",_context.t0);case 14:case"end":return _context.stop()}}),_callee,null,[[0,11]])})));return function getCodeRevisions(){return _ref2.apply(this,arguments)}}();return(0,react.useEffect)((function(){(null==codeRevisions?void 0:codeRevisions.length)>0&&(0,requests.A$)({dataLayer:{event:"feedback_list_view",feedback_count:codeRevisions.length,user_id:user.id,agent:(0,utils.VK)()}})}),[codeRevisions]),(0,react.useEffect)((function(){isStorybookView&&setCodeRevisions(null==storyConfig?void 0:storyConfig.externalCodeRevisions),isAuthenticated&&isAuthenticatedWithRigobot&&getCodeRevisions()}),[isAuthenticated,isAuthenticatedWithRigobot,isStorybookView]),(0,react.useEffect)((function(){null!=storyConfig&&storyConfig.isAuthenticatedWithRigobot||isAuthenticatedWithRigobot||createToast({title:t(isConnectedWithGithub?"feedback.connect-rigobot-text":"feedback.connect-github-connector"),description:isConnectedWithGithub?Feedback_jsx(chunk_NAA7TEES.$,{variant:"link",height:"auto",as:"span",textAlign:"start",color:"currentColor",cursor:"pointer",textDecoration:"underline",fontSize:"12px",fontWeight:"700",onClick:conntectToRigobot},t("feedback.connect-rigobot")):Feedback_jsx(chunk_NAA7TEES.$,{variant:"link",height:"auto",as:"span",textAlign:"start",color:"currentColor",fontWeight:"normal",cursor:"pointer",textDecoration:"underline",fontSize:"12px",onClick:function onClick(e){e.preventDefault(),window.location.href="".concat(variables.UA,"/v1/auth/github/").concat(accessToken,"?url=").concat(window.location.href)}},t("common:connect-with-github")),status:"warning",duration:5e3,isClosable:!0})}),[storyConfig,isAuthenticatedWithRigobot,isConnectedWithGithub,accessToken]),(isAuthenticated||isStorybookView)&&Feedback_jsx(chunk_6CSUKJP7.az,{width:"100%",maxWidth:"400px",zIndex:10,borderRadius:"17px",padding:"0 2px 2px 2px",background:featuredColor},Feedback_jsx(Heading.A,{size:"16px",textAlign:"center",p:"12px 8px",width:"100%",background:featuredColor,borderTopLeftRadius:"13px",borderTopRightRadius:"13px"},t("feedback.title")),Feedback_jsx(chunk_MPFPK3CX.s,{flexDirection:"column",background:backgroundColor,padding:"0 8px",borderRadius:"0 0 17px 17px"},Feedback_jsx(chunk_MPFPK3CX.s,{flexDirection:"column",my:"6px",gridGap:"6px"},Feedback_jsx(Text.A,{size:"12px",textAlign:"center",color:hexColor.fontColor3},t("feedback.why-feedback-text")," ",Feedback_jsx(chunk_YTV6DHKL.N,{fontSize:"12px",variant:"default",href:{en:"https://4geeks.com/mastering-technical-knowledge#feedback-quality-and-frequency",es:"https://4geeks.com/es/mastering-technical-knowledge#calidad-y-frecuencia-del-feedback"}[lang]},t("feedback.learn-why"),"."))),Feedback_jsx(chunk_MPFPK3CX.s,{flexDirection:"column",gridGap:"10px",padding:"12px 8px",maxHeight:"17rem",overflow:"auto"},(null==codeRevisions?void 0:codeRevisions.length)>0?codeRevisions.map((function(revision){var _revision$repository,_revision$repository2,_revision$reviewer;return Feedback_jsx(chunk_MPFPK3CX.s,{key:null==revision?void 0:revision.created_at,cursor:"pointer",gridGap:"8px",onClick:function onClick(){return function handleOpen(data){if(data){var file=data.file,original_code=data.original_code,isFileCodeBase64=base64regex.test(null==file?void 0:file.content),isReviewCodeBase64=base64regex.test(original_code),fileContent=isFileCodeBase64?(0,utils.y4)(null==file?void 0:file.content):null==file?void 0:file.content,originalCode=isReviewCodeBase64?(0,utils.y4)(original_code):original_code;setSelectedData({code_revisions:codeRevisions,commitFile:Feedback_objectSpread(Feedback_objectSpread({},file),{},{path:null==file?void 0:file.name,url:null==file?void 0:file.file_url,name:null==file?void 0:file.name,code:fileContent}),revision_content:Feedback_objectSpread(Feedback_objectSpread({},data),{},{code:originalCode})}),setIsOpen(!0)}}(revision)},_hover:{background:featuredColor},borderRadius:"11px",alignItems:"center",padding:"8px",border:"1px solid",borderColor:borderColor2},Feedback_jsx(chunk_MPFPK3CX.s,{gridGap:"16px",width:"100%",alignItems:"center"},Feedback_jsx(Icon.A,{icon:"code-comment",color:hexColor.blueDefault,width:"24px",height:"24px",padding:"12px"}),Feedback_jsx(chunk_MPFPK3CX.s,{justifyContent:"space-between",width:"100%"},Feedback_jsx(chunk_MPFPK3CX.s,{flexDirection:"column",gridGap:"5px"},Feedback_jsx(Heading.A,{size:"12px",fontWeight:900},null!=revision&&null!==(_revision$repository=revision.repository)&&void 0!==_revision$repository&&_revision$repository.name?(0,utils.fY)(null==revision||null===(_revision$repository2=revision.repository)||void 0===_revision$repository2?void 0:_revision$repository2.name):t("feedback.code-review")),Feedback_jsx(Text.A,{size:"12px",fontWeight:400,title:null==revision?void 0:revision.comment},t("feedback.from",{name:null==revision||null===(_revision$reviewer=revision.reviewer)||void 0===_revision$reviewer?void 0:_revision$reviewer.name}))),Feedback_jsx(Text.A,{size:"sm",fontWeight:400,color:hexColor.fontColor3},(0,format.A)(new Date(null==revision?void 0:revision.created_at),"dd/MM")))),Feedback_jsx(Icon.A,{icon:"arrowLeft",width:"13px",height:"10px",padding:"8px",style:{flexShrink:0,transform:"rotate(180deg)"}}))})):Feedback_jsx(chunk_6CSUKJP7.az,{background:featuredLight,border:"0px",borderRadius:"4px",padding:"8px"},Feedback_jsx(chunk_WPAIWTI3.e,{display:"block",margin:"auto",src:"".concat(variables.UA,"/static/img/avatar-4.png"),border:"3px solid #ff186b",width:"55px",height:"55px",borderRadius:"50px"}),Feedback_jsx(Heading.A,{margin:"10px 0",fontSize:"12px",textAlign:"center"},t("feedback.no-code-reviews-text")),Feedback_jsx(Text.A,{size:"sm",textAlign:"center"},t("feedback.start-interacting")))),Feedback_jsx(components_ReviewModal,{isExternal:!0,externalData:selectedData,isStudent:!0,defaultStage:"code_review",fixedStage:!0,isOpen,onClose:function onClose(){return setIsOpen(!1)}})))}Feedback.propTypes={storyConfig:prop_types_default().objectOf(prop_types_default().oneOfType([prop_types_default().string,prop_types_default().number,prop_types_default().bool,prop_types_default().array,prop_types_default().object]))},Feedback.defaultProps={storyConfig:null};const components_Feedback=Feedback;Feedback.__docgenInfo={description:"",methods:[],displayName:"Feedback",props:{storyConfig:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"objectOf",value:{name:"union",value:[{name:"string"},{name:"number"},{name:"bool"},{name:"array"},{name:"object"}]}},required:!1}}};var Feedback_stories_console=__webpack_require__("./node_modules/console-browserify/index.js"),Feedback_stories_jsx=react.createElement;function Feedback_stories_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function Feedback_stories_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Feedback_stories_ownKeys(Object(t),!0).forEach((function(r){(0,defineProperty.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Feedback_stories_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}const Feedback_stories={title:"Components/Feedback",component:components_Feedback,argTypes:{isAuthenticatedWithRigobot:{control:{type:"boolean"}},externalCodeRevisions:{control:{type:"object"}},storyConfig:{control:{type:"hidden"}}}};var Template=function Template(args){Feedback_stories_console.log("args",args);var isAuthenticatedWithRigobot=null==args?void 0:args.isAuthenticatedWithRigobot,externalCodeRevisions=null==args?void 0:args.externalCodeRevisions;return Feedback_stories_jsx(chunk_6CSUKJP7.az,null,Feedback_stories_jsx(components_Feedback,{storyConfig:Feedback_stories_objectSpread(Feedback_stories_objectSpread({},args),{},{isAuthenticatedWithRigobot,externalCodeRevisions})}))};Template.displayName="Template";var Default=Template.bind({});Default.args={isAuthenticatedWithRigobot:!1,externalCodeRevisions:[{id:1,comment:"So bad your  c ode bro",original_code:'LASK_ENV # Imported from Heroku app\r\nvalue: production\r\n- key: FLASK_APP_KEY # Imported from Heroku app\r\nvalue: "any key works"\r\n- key: DATABASE_URL # Render PostgreSQL database\r\nfromDatabase:\r\nname: postgresql-trapezoidal-42170\r\nproperty: connectionString\r\n\r\ndatabases: # Render PostgreSQL database',committers:[{id:1,name:"Charlytoc",github_username:"charlytoc"}],reviewer:{id:2,name:"Charlytoc-132",username:"charlytoc-132@proton.me"},user_read_at:null,revision_rating:null,revision_rating_comments:null,file:{id:11,file_url:"https://api.github.com/repos/Charlytoc/where2day/contents/render.yaml?ref=ccac40dcebcc326c195c4a18ede6237ed23d78e8",content:'services:\n    - type: web # valid values: https://render.com/docs/yaml-spec#type\n      region: ohio\n      name: sample-service-name\n      env: python # valid values: https://render.com/docs/yaml-spec#environment\n      buildCommand: "./render_build.sh"\n      startCommand: "gunicorn wsgi --chdir ./src/"\n      plan: free # optional; defaults to starter\n      numInstances: 1\n      envVars:\n          - key: BASENAME # Imported from Heroku app\n            value: /\n          - key: FLASK_APP # Imported from Heroku app\n            value: src/app.py\n          - key: FLASK_ENV # Imported from Heroku app\n            value: production\n          - key: FLASK_APP_KEY # Imported from Heroku app\n            value: "any key works"\n          - key: DATABASE_URL # Render PostgreSQL database\n            fromDatabase:\n                name: postgresql-trapezoidal-42170\n                property: connectionString\n\ndatabases: # Render PostgreSQL database\n    - name: postgresql-trapezoidal-42170\n      region: ohio\n      ipAllowList: [] # only allow internal connections\n      plan: free # optional; defaults to starter\n',added_lines:'services:\n    - type: web # valid values: https://render.com/docs/yaml-spec#type\n      region: ohio\n      name: sample-service-name\n      env: python # valid values: https://render.com/docs/yaml-spec#environment\n      buildCommand: "./render_build.sh"\n      startCommand: "gunicorn wsgi --chdir ./src/"\n      plan: free # optional; defaults to starter\n      numInstances: 1\n      envVars:\n          - key: BASENAME # Imported from Heroku app\n            value: /\n          - key: FLASK_APP # Imported from Heroku app\n            value: src/app.py\n          - key: FLASK_ENV # Imported from Heroku app\n            value: production\n          - key: FLASK_APP_KEY # Imported from Heroku app\n            value: "any key works"\n          - key: DATABASE_URL # Render PostgreSQL database\n            fromDatabase:\n                name: postgresql-trapezoidal-42170\n                property: connectionString\n\ndatabases: # Render PostgreSQL database\n    - name: postgresql-trapezoidal-42170\n      region: ohio\n      ipAllowList: [] # only allow internal connections\n      plan: free # optional; defaults to starter',name:"render.yaml",language:"python"},created_at:"2023-05-30T17:54:35.040Z",updated_at:"2023-05-30T17:54:35.050Z",language:null,repository:{id:3,owner:"Charlytoc",name:"where2day",url:"https://github.com/Charlytoc/where2day"}},{id:2,comment:"Pretty ugly",original_code:'# Imported from Heroku app\r\nvalue: src/app.py\r\n- key: FLASK_ENV # Imported from Heroku app\r\nvalue: production\r\n- key: FLASK_APP_KEY # Imported from Heroku app\r\nvalue: "any key works"\r\n- key: DATABASE_URL # Render PostgreSQL database\r\nfromDatabase:\r\nname: postgresql-trapezoidal-42170',committers:[{id:1,name:"Charlytoc",github_username:"charlytoc"}],reviewer:{id:2,name:"Charlytoc-132",username:"charlytoc-132@proton.me"},user_read_at:null,revision_rating:null,revision_rating_comments:null,file:{id:11,file_url:"https://api.github.com/repos/Charlytoc/where2day/contents/render.yaml?ref=ccac40dcebcc326c195c4a18ede6237ed23d78e8",content:'services:\n    - type: web # valid values: https://render.com/docs/yaml-spec#type\n      region: ohio\n      name: sample-service-name\n      env: python # valid values: https://render.com/docs/yaml-spec#environment\n      buildCommand: "./render_build.sh"\n      startCommand: "gunicorn wsgi --chdir ./src/"\n      plan: free # optional; defaults to starter\n      numInstances: 1\n      envVars:\n          - key: BASENAME # Imported from Heroku app\n            value: /\n          - key: FLASK_APP # Imported from Heroku app\n            value: src/app.py\n          - key: FLASK_ENV # Imported from Heroku app\n            value: production\n          - key: FLASK_APP_KEY # Imported from Heroku app\n            value: "any key works"\n          - key: DATABASE_URL # Render PostgreSQL database\n            fromDatabase:\n                name: postgresql-trapezoidal-42170\n                property: connectionString\n\ndatabases: # Render PostgreSQL database\n    - name: postgresql-trapezoidal-42170\n      region: ohio\n      ipAllowList: [] # only allow internal connections\n      plan: free # optional; defaults to starter\n',added_lines:'services:\n    - type: web # valid values: https://render.com/docs/yaml-spec#type\n      region: ohio\n      name: sample-service-name\n      env: python # valid values: https://render.com/docs/yaml-spec#environment\n      buildCommand: "./render_build.sh"\n      startCommand: "gunicorn wsgi --chdir ./src/"\n      plan: free # optional; defaults to starter\n      numInstances: 1\n      envVars:\n          - key: BASENAME # Imported from Heroku app\n            value: /\n          - key: FLASK_APP # Imported from Heroku app\n            value: src/app.py\n          - key: FLASK_ENV # Imported from Heroku app\n            value: production\n          - key: FLASK_APP_KEY # Imported from Heroku app\n            value: "any key works"\n          - key: DATABASE_URL # Render PostgreSQL database\n            fromDatabase:\n                name: postgresql-trapezoidal-42170\n                property: connectionString\n\ndatabases: # Render PostgreSQL database\n    - name: postgresql-trapezoidal-42170\n      region: ohio\n      ipAllowList: [] # only allow internal connections\n      plan: free # optional; defaults to starter',name:"render.yaml",language:"python"},created_at:"2023-05-30T17:54:41.473Z",updated_at:"2023-05-30T17:54:41.478Z",language:null,repository:{id:3,owner:"Charlytoc",name:"where2day",url:"https://github.com/Charlytoc/where2day"}}]},Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"args => {\n  console.log('args', args);\n  const isAuthenticatedWithRigobot = args?.isAuthenticatedWithRigobot;\n  const externalCodeRevisions = args?.externalCodeRevisions;\n  return <Box>\n    <Feedback storyConfig={{\n      ...args,\n      isAuthenticatedWithRigobot,\n      externalCodeRevisions\n    }} />\n  </Box>;\n}",...Default.parameters?.docs?.source}}};const __namedExportsOrder=["Default"]}}]);
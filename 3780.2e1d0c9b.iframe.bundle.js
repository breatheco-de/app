"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3780],{"./src/components/Heading.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _home_runner_work_app_app_node_modules_babel_runtime_helpers_esm_extends_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),_home_runner_work_app_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_chakra_ui_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@chakra-ui/layout/dist/chunk-B2MGPQRJ.mjs"),prop_types__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_4__),_excluded=["children","size"],__jsx=react__WEBPACK_IMPORTED_MODULE_0__.createElement,sizes={xxl:"var(--heading-xxl)",xl:"var(--heading-xl)",l:"var(--heading-l)",m:"var(--heading-m)",sm:"var(--heading-sm)",xsm:"var(--heading-xsm)"};function Heading(_ref){var children=_ref.children,size=_ref.size,rest=(0,_home_runner_work_app_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_1__.A)(_ref,_excluded);return __jsx(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_2__.D,(0,_home_runner_work_app_app_node_modules_babel_runtime_helpers_esm_extends_js__WEBPACK_IMPORTED_MODULE_3__.A)({fontSize:sizes[size]||size},rest),children)}Heading.displayName="Heading",Heading.propTypes={size:prop_types__WEBPACK_IMPORTED_MODULE_4___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_4___default().string,prop_types__WEBPACK_IMPORTED_MODULE_4___default().object]),children:prop_types__WEBPACK_IMPORTED_MODULE_4___default().node},Heading.defaultProps={size:"l",children:null};const __WEBPACK_DEFAULT_EXPORT__=Heading;Heading.__docgenInfo={description:"",methods:[],displayName:"Heading",props:{size:{defaultValue:{value:"'l'",computed:!1},description:"",type:{name:"union",value:[{name:"string"},{name:"object"}]},required:!1},children:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"node"},required:!1}}}},"./src/context/SessionContext.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{I:()=>SessionContext});var defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),asyncToGenerator=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),regenerator=__webpack_require__("./node_modules/@babel/runtime/regenerator/index.js"),regenerator_default=__webpack_require__.n(regenerator),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),next_router=__webpack_require__("./node_modules/next/router.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),utils=__webpack_require__("./src/utils/index.js"),axios=__webpack_require__("./node_modules/axios/lib/axios.js"),console=__webpack_require__("./node_modules/console-browserify/index.js");const hooks_useGoogleMaps=function useGoogleMaps(apiKey){var libraries=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"places",_useState=(0,react.useState)({loaded:!1,error:!1}),gmapStatus=_useState[0],setGmapStatus=_useState[1];(0,react.useEffect)((function(){if(window.google)setGmapStatus({loaded:!0,error:!1});else{var script=document.createElement("script");script.type="text/javascript",script.src="https://maps.google.com/maps/api/js?key=".concat(apiKey,"&libraries=").concat(libraries);var headScript=document.getElementsByTagName("script")[0];headScript.parentNode.insertBefore(script,headScript),script.addEventListener("load",(function(){setGmapStatus({loaded:!0,error:!1})})),script.addEventListener("error",(function(){setGmapStatus({loaded:!0,error:!0})}))}}),[apiKey,libraries]);var geocode=function geocode(request){if(utils.l6&&gmapStatus.loaded){var google=window.google,geocoder=new google.maps.Geocoder;return new Promise((function(resolve,reject){geocoder.geocode(request,(function(result,geocodeStatus){geocodeStatus===google.maps.GeocoderStatus.OK?resolve(result):reject(result)}))}))}return null},geolocate=function(){var _ref=(0,asyncToGenerator.A)(regenerator_default().mark((function _callee(key){var result;return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!gmapStatus.loaded||!key){_context.next=11;break}return _context.prev=1,_context.next=4,axios.A.post("https://www.googleapis.com/geolocation/v1/geolocate?key=".concat(key));case 4:return result=_context.sent,_context.abrupt("return",result);case 8:_context.prev=8,_context.t0=_context.catch(1),console.error(_context.t0);case 11:return _context.abrupt("return",null);case 12:case"end":return _context.stop()}}),_callee,null,[[1,8]])})));return function geolocate(_x){return _ref.apply(this,arguments)}}(),getUserLocation=function(){var _ref2=(0,asyncToGenerator.A)(regenerator_default().mark((function _callee2(){var setCoords,userLocation,_yield$geolocate,data,loc,_args2=arguments;return regenerator_default().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(setCoords=_args2.length>0&&void 0!==_args2[0]?_args2[0]:function(){},userLocation=localStorage.getItem("user-location"),!gmapStatus.loaded||!apiKey||userLocation){_context2.next=15;break}return _context2.next=5,geolocate(apiKey);case 5:return _yield$geolocate=_context2.sent,data=_yield$geolocate.data,loc={},data&&(setCoords({latitude:data.location.lat,longitude:data.location.lng}),loc.coordinates={latitude:data.location.lat,longitude:data.location.lng}),_context2.next=11,geocode({location:data.location});case 11:return _context2.sent[0].address_components.forEach((function(comp){comp.types.includes("locality")&&(loc.city=comp.long_name),comp.types.includes("country")&&(loc.country=comp.long_name,loc.countryShort=comp.short_name)})),localStorage.setItem("user-location",JSON.stringify(loc)),_context2.abrupt("return",loc);case 15:if(!userLocation){_context2.next=17;break}return _context2.abrupt("return",JSON.parse(userLocation));case 17:return _context2.abrupt("return",null);case 18:case"end":return _context2.stop()}}),_callee2)})));return function getUserLocation(){return _ref2.apply(this,arguments)}}();return{gmapStatus,geocode,geolocate,getUserLocation}};var logging=__webpack_require__("./src/utils/logging.js"),process=__webpack_require__("./node_modules/process/browser.js"),__jsx=react.createElement;function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){(0,defineProperty.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var initialUserSession={utm_placement:"",utm_referrer:"",utm_medium:"",utm_source:"",utm_term:"",utm_content:"",utm_campaign:"",conversion_url:"",landing_url:"",user_agent:"",internal_cta_placement:"",internal_cta_content:"",internal_cta_campaign:""},SessionContext=(0,react.createContext)({userSession:initialUserSession,location:null,isLoadingLocation:!0});function SessionProvider(_ref){var children=_ref.children,_useState=(0,react.useState)(initialUserSession),userSession=_useState[0],_setUserSession=_useState[1],router=(0,next_router.useRouter)(),_useState2=(0,react.useState)(null),location=_useState2[0],setLocation=_useState2[1],_useState3=(0,react.useState)(!0),isLoadingLocation=_useState3[0],setIsLoadingLocation=_useState3[1],GOOGLE_KEY=process.env.GOOGLE_GEO_KEY,_useGoogleMaps=hooks_useGoogleMaps(GOOGLE_KEY,"places"),gmapStatus=_useGoogleMaps.gmapStatus,getUserLocation=_useGoogleMaps.getUserLocation,initLocation=function(){var _ref2=(0,asyncToGenerator.A)(regenerator_default().mark((function _callee(){var loc;return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,getUserLocation();case 3:loc=_context.sent,setLocation(loc),_context.next=10;break;case 7:_context.prev=7,_context.t0=_context.catch(0),(0,logging.z3)("function getUserLocation()",_context.t0);case 10:return _context.prev=10,setIsLoadingLocation(!1),_context.finish(10);case 13:case"end":return _context.stop()}}),_callee,null,[[0,7,10,13]])})));return function initLocation(){return _ref2.apply(this,arguments)}}();(0,react.useEffect)((function(){initLocation()}),[gmapStatus]);return(0,react.useEffect)((function(){!function handleUserSession(){if(utils.l6){var conversionUrl,storedSession=JSON.parse(localStorage.getItem("userSession")),userAgent=window.navigator.userAgent,landingUrl=null!=storedSession&&storedSession.landing_url&&""!==(null==storedSession?void 0:storedSession.landing_url)?null==storedSession?void 0:storedSession.landing_url:window.location.pathname;conversionUrl=["/checkout","/pricing"].some((function(path){return window.location.pathname.includes(path)}))?null==storedSession?void 0:storedSession.conversion_url:window.location.pathname;var utm_placement=(0,utils.eA)("utm_placement")||(null==storedSession?void 0:storedSession.utm_placement),utm_referrer=(0,utils.eA)("utm_referrer")||(0,utils.eA)("utm_ref")||(0,utils.eA)("referrer")||(0,utils.eA)("ref")||(null==storedSession?void 0:storedSession.utm_referrer),utm_medium=(0,utils.eA)("utm_medium")||(null==storedSession?void 0:storedSession.utm_medium),utm_source=(0,utils.eA)("utm_source")||(null==storedSession?void 0:storedSession.utm_source),utm_term=(0,utils.eA)("utm_term")||(null==storedSession?void 0:storedSession.utm_term),utm_content=(0,utils.eA)("utm_content")||(null==storedSession?void 0:storedSession.utm_content),utm_campaign=(0,utils.eA)("utm_campaign")||(null==storedSession?void 0:storedSession.utm_campaign),internal_cta_placement=(0,utils.eA)("internal_cta_placement")||(null==storedSession?void 0:storedSession.internal_cta_placement),internal_cta_content=(0,utils.eA)("internal_cta_content")||(null==storedSession?void 0:storedSession.internal_cta_content),internal_cta_campaign=(0,utils.eA)("internal_cta_campaign")||(null==storedSession?void 0:storedSession.internal_cta_campaign),cleanedStore=_objectSpread(_objectSpread({},storedSession),{},{translations:void 0}),session=_objectSpread(_objectSpread({},cleanedStore),{},{user_agent:userAgent,landing_url:landingUrl,conversion_url:conversionUrl,utm_placement,utm_referrer,utm_medium,utm_source,utm_term,utm_content,utm_campaign,internal_cta_placement,internal_cta_content,internal_cta_campaign});_setUserSession(session),localStorage.setItem("userSession",JSON.stringify(session))}}()}),[router]),__jsx(SessionContext.Provider,{value:{userSession,setUserSession:function setUserSession(session){localStorage.setItem("userSession",JSON.stringify(session)),_setUserSession(_objectSpread(_objectSpread({},userSession),session))},location,isLoadingLocation,setConversionUrl:function setConversionUrl(){if(utils.l6){if(["/checkout","/pricing"].some((function(path){return window.location.pathname.includes(path)})))return;var session=_objectSpread(_objectSpread({},userSession),{},{conversion_url:window.location.pathname});_setUserSession(session),localStorage.setItem("userSession",JSON.stringify(session))}}}},children)}SessionProvider.displayName="SessionProvider",SessionProvider.propTypes={children:prop_types_default().node},SessionProvider.defaultProps={children:null};SessionProvider.__docgenInfo={description:"",methods:[],displayName:"SessionProvider",props:{children:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"node"},required:!1}}}},"./src/hooks/useSession.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_context_SessionContext__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/context/SessionContext.jsx");const __WEBPACK_DEFAULT_EXPORT__=function useSession(){return(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_context_SessionContext__WEBPACK_IMPORTED_MODULE_1__.I)}},"./src/store/actions/signupAction.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>signupAction});var objectWithoutProperties=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),asyncToGenerator=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),regenerator=__webpack_require__("./node_modules/@babel/runtime/regenerator/index.js"),regenerator_default=__webpack_require__.n(regenerator),es=__webpack_require__("./node_modules/react-redux/es/index.js"),useTranslation=__webpack_require__("./node_modules/next-translate/lib/esm/useTranslation.js"),next_router=__webpack_require__("./node_modules/next/router.js"),types=__webpack_require__("./src/store/types/index.js"),utils=__webpack_require__("./src/utils/index.js"),breathecode=__webpack_require__("./src/services/breathecode.js"),usePersistent=__webpack_require__("./src/hooks/usePersistent.js"),useSession=__webpack_require__("./src/hooks/useSession.js"),useAuth=__webpack_require__("./src/hooks/useAuth.js"),utils_requests=__webpack_require__("./src/utils/requests.js"),toConsumableArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),variables=__webpack_require__("./src/utils/variables.js"),console=__webpack_require__("./node_modules/console-browserify/index.js");function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){(0,defineProperty.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var processPlans=function processPlans(data){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref$monthly=_ref.monthly,monthly=void 0===_ref$monthly||_ref$monthly,_ref$quarterly=_ref.quarterly,quarterly=void 0===_ref$quarterly||_ref$quarterly,_ref$halfYearly=_ref.halfYearly,halfYearly=void 0===_ref$halfYearly||_ref$halfYearly,_ref$yearly=_ref.yearly,yearly=void 0===_ref$yearly||_ref$yearly,_ref$planType=_ref.planType,planType=void 0===_ref$planType?"":_ref$planType,_ref$country_code=_ref.country_code,country_code=void 0===_ref$country_code?void 0:_ref$country_code,translations=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(resolve,reject){var process=function(){var _ref2=(0,asyncToGenerator.A)(regenerator_default().mark((function _callee(){var _data$financing_optio,_data$financing_optio2,_data$financing_optio3,_data$plans,_data$plans2,_singlePlan$currency,_data$currency,_data$currency2,_data$currency3,_data$currency4,_data$currency5,_data$currency6,slug,resp,planPropsData,owner,existsAmountPerHalf,existsAmountPerMonth,existsAmountPerQuarter,existsAmountPerYear,hasPayaBleSuscription,financingOptionsExists,financingOptionsManyMonthsExists,financingOptionsOnePaymentExists,singlePlan,isTotallyFree,hasSubscriptionMethod,financingOptions,financingOptionsOnePayment,relevantInfo,textInfo,trialPlanDescription,onePaymentFinancing,trialPlan,monthPlan,quarterPlan,halfPlan,yearPlan,financingOption,planList,paymentList,financingList;return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,slug=encodeURIComponent(null==data?void 0:data.slug),_context.next=4,breathecode.A.payment({country_code}).getPlanProps(slug);case 4:if(resp=_context.sent){_context.next=7;break}throw new Error("The plan does not exist");case 7:planPropsData=Array.isArray(translations.checkout_featured_info(null==data?void 0:data.slug))?translations.checkout_featured_info(null==data?void 0:data.slug):null==resp?void 0:resp.data,owner=null==data?void 0:data.owner,existsAmountPerHalf=(null==data?void 0:data.price_per_half)>0,existsAmountPerMonth=(null==data?void 0:data.price_per_month)>0,existsAmountPerQuarter=(null==data?void 0:data.price_per_quarter)>0,existsAmountPerYear=(null==data?void 0:data.price_per_year)>0,hasPayaBleSuscription=existsAmountPerHalf||existsAmountPerMonth||existsAmountPerQuarter||existsAmountPerYear,financingOptionsExists=(null==data||null===(_data$financing_optio=data.financing_options)||void 0===_data$financing_optio?void 0:_data$financing_optio.length)>0,financingOptionsManyMonthsExists=financingOptionsExists&&(null==data||null===(_data$financing_optio2=data.financing_options)||void 0===_data$financing_optio2?void 0:_data$financing_optio2.some((function(l){return(null==l?void 0:l.monthly_price)>0&&(null==l?void 0:l.how_many_months)>1}))),financingOptionsOnePaymentExists=financingOptionsExists&&(null==data||null===(_data$financing_optio3=data.financing_options)||void 0===_data$financing_optio3?void 0:_data$financing_optio3.some((function(l){return(null==l?void 0:l.monthly_price)>0&&1===(null==l?void 0:l.how_many_months)}))),singlePlan=(null==data||null===(_data$plans=data.plans)||void 0===_data$plans?void 0:_data$plans.length)>0?null==data||null===(_data$plans2=data.plans)||void 0===_data$plans2?void 0:_data$plans2[0]:data,isTotallyFree=!hasPayaBleSuscription&&0===(null==singlePlan?void 0:singlePlan.trial_duration)&&!financingOptionsExists,hasSubscriptionMethod=hasPayaBleSuscription||isTotallyFree||(null==singlePlan?void 0:singlePlan.trial_duration_unit)>0,financingOptions=financingOptionsManyMonthsExists?null==data?void 0:data.financing_options.filter((function(l){return(null==l?void 0:l.monthly_price)>0&&(null==l?void 0:l.how_many_months)>1})).sort((function(a,b){return a.monthly_price-b.monthly_price})):[],financingOptionsOnePayment=financingOptionsOnePaymentExists?null==data?void 0:data.financing_options.filter((function(l){return(null==l?void 0:l.monthly_price)>0&&1===(null==l?void 0:l.how_many_months)})):[],relevantInfo={plan_slug:null==singlePlan?void 0:singlePlan.slug,currency:null==singlePlan?void 0:singlePlan.currency,featured_info:planPropsData,trial_duration:(null==singlePlan?void 0:singlePlan.trial_duration)||0,trial_duration_unit:(null==singlePlan?void 0:singlePlan.trial_duration_unit)||"",planType,show:!0,isFreeTier:!1,owner},textInfo={free:(null==translations?void 0:translations.free)||"Free",totally_free:(null==translations?void 0:translations.totally_free)||"Totally free",free_trial:(null==translations?void 0:translations.free_trial)||"Free trial",one_payment:(null==translations?void 0:translations.one_payment)||"One payment",monthly_payment:(null==translations?void 0:translations.monthly_payment)||"Monthly payment",quarterly_payment:(null==translations?void 0:translations.quarterly_payment)||"Quarterly payment",half_yearly_payment:(null==translations?void 0:translations.half_yearly_payment)||"Half yearly payment",yearly_payment:(null==translations?void 0:translations.yearly_payment)||"Yearly payment",many_months_payment:function many_months_payment(qty){return(null==translations?void 0:translations.many_months_payment(qty))||"Payment for ".concat(qty," months")},label:{free_trial_period:function free_trial_period(qty,period){var periodToLowerCase=null==period?void 0:period.toLowerCase();return(null==translations?void 0:translations.free_trial_period(qty,periodToLowerCase))||"Free trial for ".concat(qty," ").concat(periodToLowerCase)},free:(null==translations?void 0:translations.free)||"Free",monthly:(null==translations?void 0:translations.monthly)||"Monthly",quarterly:(null==translations?void 0:translations.quarterly)||"Quarterly",half_yearly:(null==translations?void 0:translations.half_yearly)||"Half yearly",yearly:(null==translations?void 0:translations.yearly)||"Yearly",financing:(null==translations?void 0:translations.financing)||"Financing"}},trialPlanDescription=isTotallyFree?textInfo.totally_free:textInfo.label.free_trial_period(null==singlePlan?void 0:singlePlan.trial_duration,null==singlePlan?void 0:singlePlan.trial_duration_unit),onePaymentFinancing=financingOptionsOnePaymentExists?financingOptionsOnePayment.map((function(item){var _item$currency;return _objectSpread(_objectSpread({},relevantInfo),{},{title:textInfo.one_payment,price:null==item?void 0:item.monthly_price,priceText:"".concat(variables.tV[null==item||null===(_item$currency=item.currency)||void 0===_item$currency?void 0:_item$currency.code]||"$").concat(null==item?void 0:item.monthly_price),period:"ONE_TIME",period_label:textInfo.one_payment,plan_id:"f-".concat(null==item?void 0:item.monthly_price,"-").concat(null==item?void 0:item.how_many_months),description:(null==translations?void 0:translations.one_payment_description)||"",how_many_months:null==item?void 0:item.how_many_months,type:"PAYMENT"})})):[{}],trialPlan=financingOptionsExists||hasPayaBleSuscription?{}:_objectSpread(_objectSpread({},relevantInfo),{},{title:null!=singlePlan&&singlePlan.title?null==singlePlan?void 0:singlePlan.title:(0,utils.fY)(String(null==singlePlan?void 0:singlePlan.slug)),price:0,priceText:isTotallyFree?textInfo.free:textInfo.free_trial,plan_id:"p-".concat(null==singlePlan?void 0:singlePlan.trial_duration,"-trial"),description:trialPlanDescription,period:isTotallyFree?"FREE":null==singlePlan?void 0:singlePlan.trial_duration_unit,period_label:trialPlanDescription,type:isTotallyFree?"FREE":"TRIAL",isFreeTier:!0}),monthPlan=monthly&&existsAmountPerMonth?_objectSpread(_objectSpread({},relevantInfo),{},{title:null!=singlePlan&&singlePlan.title?null==singlePlan?void 0:singlePlan.title:textInfo.monthly_payment,price:null==data?void 0:data.price_per_month,pricePerMonth:null==data?void 0:data.price_per_month,priceText:"".concat(variables.tV[null==singlePlan||null===(_singlePlan$currency=singlePlan.currency)||void 0===_singlePlan$currency?void 0:_singlePlan$currency.code]||"$").concat(null==data?void 0:data.price_per_month),plan_id:"p-".concat(null==data?void 0:data.price_per_month),description:(null==translations?void 0:translations.yearly_payment_description)||"",period:"MONTH",period_label:textInfo.label.monthly,type:"PAYMENT"}):{},quarterPlan=quarterly&&existsAmountPerQuarter?_objectSpread(_objectSpread({},relevantInfo),{},{title:null!=singlePlan&&singlePlan.title?null==singlePlan?void 0:singlePlan.title:textInfo.quarterly_payment,price:null==data?void 0:data.price_per_quarter,pricePerMonth:null!=data&&data.price_per_quarter?(data.price_per_quarter/4).toFixed(2):0,pricePerMonthText:"".concat(variables.tV[null==data||null===(_data$currency=data.currency)||void 0===_data$currency?void 0:_data$currency.code]||"$").concat(null!=data&&data.price_per_quarter?(data.price_per_quarter/4).toFixed(2):0),priceText:"".concat(variables.tV[null==data||null===(_data$currency2=data.currency)||void 0===_data$currency2?void 0:_data$currency2.code]||"$").concat((null==data?void 0:data.price_per_quarter)||0),plan_id:"p-".concat((null==data?void 0:data.price_per_quarter)||0),description:(null==translations?void 0:translations.quarterly_payment_description)||"",period:"QUARTER",period_label:textInfo.label.quarterly,type:"PAYMENT",show:!1}):{},halfPlan=halfYearly&&existsAmountPerHalf?_objectSpread(_objectSpread({},relevantInfo),{},{title:null!=singlePlan&&singlePlan.title?null==singlePlan?void 0:singlePlan.title:textInfo.half_yearly_payment,price:null==data?void 0:data.price_per_half,pricePerMonth:null!=data&&data.price_per_half?(data.price_per_half/6).toFixed(2):0,pricePerMonthText:"".concat(variables.tV[null==data||null===(_data$currency3=data.currency)||void 0===_data$currency3?void 0:_data$currency3.code]||"$").concat(null!=data&&data.price_per_half?(data.price_per_half/6).toFixed(2):0),priceText:"".concat(variables.tV[null==data||null===(_data$currency4=data.currency)||void 0===_data$currency4?void 0:_data$currency4.code]||"$").concat((null==data?void 0:data.price_per_half)||0),plan_id:"p-".concat((null==data?void 0:data.price_per_half)||0),description:(null==translations?void 0:translations.half_yearly_payment_description)||"",period:"HALF",period_label:textInfo.label.half_yearly,type:"PAYMENT",show:!1}):{},yearPlan=yearly&&existsAmountPerYear?_objectSpread(_objectSpread({},relevantInfo),{},{title:null!=singlePlan&&singlePlan.title?null==singlePlan?void 0:singlePlan.title:textInfo.yearly_payment,price:null==data?void 0:data.price_per_year,pricePerMonth:null!=data&&data.price_per_year?(data.price_per_year/12).toFixed(2):0,pricePerMonthText:"".concat(variables.tV[null==data||null===(_data$currency5=data.currency)||void 0===_data$currency5?void 0:_data$currency5.code]||"$").concat(null!=data&&data.price_per_year?(data.price_per_year/12).toFixed(2):0),priceText:"".concat(variables.tV[null==data||null===(_data$currency6=data.currency)||void 0===_data$currency6?void 0:_data$currency6.code]||"$").concat((null==data?void 0:data.price_per_year)||0),plan_id:"p-".concat((null==data?void 0:data.price_per_year)||0),description:(null==translations?void 0:translations.yearly_payment_description)||"",period:"YEAR",period_label:textInfo.label.yearly,type:"PAYMENT"}):{},financingOption=financingOptionsExists?financingOptions.map((function(item,index){var _item$currency2,_item$currency3,financingTitle=translations.many_months_payment(null==item?void 0:item.how_many_months),financingOptionsDescription=null==translations?void 0:translations.financing_description(null==item?void 0:item.monthly_price,null==item?void 0:item.how_many_months,variables.tV[null==item||null===(_item$currency2=item.currency)||void 0===_item$currency2?void 0:_item$currency2.code]||"$");return _objectSpread(_objectSpread({},relevantInfo),{},{financingId:index+1,title:null!=singlePlan&&singlePlan.title?null==singlePlan?void 0:singlePlan.title:financingTitle,price:null==item?void 0:item.monthly_price,priceText:"".concat(variables.tV[null==item||null===(_item$currency3=item.currency)||void 0===_item$currency3?void 0:_item$currency3.code]||"$").concat(null==item?void 0:item.monthly_price," x ").concat(null==item?void 0:item.how_many_months),plan_id:"f-".concat(null==item?void 0:item.monthly_price,"-").concat(null==item?void 0:item.how_many_months),description:financingOptionsDescription||"",period:"FINANCING",period_label:textInfo.label.financing,how_many_months:null==item?void 0:item.how_many_months,type:"PAYMENT"})})):[{}],planList=[trialPlan,onePaymentFinancing[0],yearPlan,halfPlan,quarterPlan,monthPlan].concat((0,toConsumableArray.A)(financingOption)).filter((function(plan){return Object.keys(plan).length>0&&plan.show})),paymentList=[onePaymentFinancing[0],yearPlan,monthPlan,trialPlan].filter((function(plan){return Object.keys(plan).length>0})),financingList=null==financingOption?void 0:financingOption.filter((function(plan){return Object.keys(plan).length>0})),resolve(_objectSpread(_objectSpread({},data),{},{title:(null==data?void 0:data.title)||(0,utils.rS)(null==data?void 0:data.slug),isTotallyFree,isTrial:!hasPayaBleSuscription&&!financingOptionsExists,plans:planList,featured_info:planPropsData||[],paymentOptions:paymentList,financingOptions:financingList,hasSubscriptionMethod})),_context.next=42;break;case 38:_context.prev=38,_context.t0=_context.catch(0),console.error("Error processing plans:",_context.t0),reject(_context.t0);case 42:case"end":return _context.stop()}}),_callee,null,[[0,38]])})));return function process(){return _ref2.apply(this,arguments)}}();process()}))},generatePlan=function(){var _ref3=(0,asyncToGenerator.A)(regenerator_default().mark((function _callee2(planSlug,translationsObj,country_code){var resp,data;return regenerator_default().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.prev=0,_context2.next=3,breathecode.A.payment({country_code}).getPlan(planSlug);case 3:return resp=_context2.sent,_context2.next=6,processPlans(null==resp?void 0:resp.data,{country_code},translationsObj);case 6:return data=_context2.sent,_context2.abrupt("return",data);case 10:return _context2.prev=10,_context2.t0=_context2.catch(0),console.error("Error generating plan:",_context2.t0),_context2.abrupt("return",{});case 14:case"end":return _context2.stop()}}),_callee2,null,[[0,10]])})));return function generatePlan(_x,_x2,_x3){return _ref3.apply(this,arguments)}}(),useCustomToast=__webpack_require__("./src/hooks/useCustomToast.jsx"),process=__webpack_require__("./node_modules/process/browser.js"),signupAction_console=__webpack_require__("./node_modules/console-browserify/index.js"),_excluded=["service_items"];function signupAction_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function signupAction_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?signupAction_ownKeys(Object(t),!0).forEach((function(r){(0,defineProperty.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):signupAction_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}const signupAction=function useSignup(){var isAuthenticated=(0,useAuth.A)().isAuthenticated,_useSession=(0,useSession.A)(),userSession=_useSession.userSession,location=_useSession.location,state=(0,es.d4)((function(sl){return sl.signupReducer})),_usePersistent=(0,usePersistent.L)("subscription-process",null),setSubscriptionProcess=(0,slicedToArray.A)(_usePersistent,2)[1],t=(0,useTranslation.A)("signup").t,createToast=(0,useCustomToast.A)({toastId:"error-payment-transaction"}).createToast,router=(0,next_router.useRouter)(),locale=router.locale,dispatch=(0,es.wA)(),redirect=(0,utils.$E)("redirect"),redirectedFrom=(0,utils.$E)("redirected-from"),couponsQuery=(0,utils.eA)("coupons"),planTranslationsObj=function getTranslations(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return{one_payment:t("signup:one_payment"),free_trial:t("signup:free_trial"),monthly_payment:t("signup:monthly_payment"),quarterly_payment:t("signup:quarterly_payment"),half_yearly_payment:t("signup:half_yearly_payment"),yearly_payment:t("signup:yearly_payment"),free:t("signup:free"),totally_free:t("signup:totally_free"),free_trial_period:function free_trial_period(qty,period){var periodValue=null==period?void 0:period.toLowerCase(),singularTranslation={day:t("common:word-connector.day"),week:t("common:word-connector.week"),month:t("common:word-connector.month"),year:t("common:word-connector.year")},pluralTranslation={day:t("common:word-connector.days"),week:t("common:word-connector.weeks"),month:t("common:word-connector.months"),year:t("common:word-connector.years")};return t("signup:info.free-trial-period",{qty,period:qty>1?pluralTranslation[periodValue]:singularTranslation[periodValue]})},one_payment_description:t("signup:one_payment_description"),monthly_payment_description:t("signup:monthly_payment_description"),quarterly_payment_description:t("signup:quarterly_payment_description"),half_yearly_payment_description:t("signup:half_yearly_payment_description"),yearly_payment_description:t("signup:yearly_payment_description"),checkout_featured_info:function checkout_featured_info(planSlug){return t("signup:custom-plans-pricing.".concat(planSlug,".checkout_features"),{},{returnObjects:!0})},financing_description:function financing_description(price,months,currency){return t("signup:financing_many_months_description",{monthly_price:price,many_months:months,currency})},monthly:t("signup:info.monthly"),quarterly:t("signup:info.quarterly"),half_yearly:t("signup:info.half-yearly"),yearly:t("signup:info.yearly"),financing:t("signup:info.financing"),many_months_payment:function many_months_payment(qty){return t("signup:many_months_payment",{qty})}}}(t),defaultPlan=process.env.BASE_PLAN||"4geeks-basic-subscription",_router$query=router.query,syllabus=_router$query.syllabus,academy=_router$query.academy,nextMonthText=(0,utils.AU)(1).translation[locale],stepIndex=state.stepIndex,checkoutData=state.checkoutData,dateProps=state.dateProps,cohortPlans=state.cohortPlans,selectedPlanCheckoutData=state.selectedPlanCheckoutData,isFirstStep=0===stepIndex,isSecondStep=1===stepIndex,isThirdStep=2===stepIndex,isFourthStep=3===stepIndex,handleStep=function handleStep(step){return dispatch({type:types.GR,payload:step})},setDateProps=function setDateProps(payload){return dispatch({type:types.Dn,payload})},setCheckoutData=function setCheckoutData(payload){return dispatch({type:types.Fm,payload})},setLoader=function setLoader(payload,value){return dispatch({type:types.rQ,payload,value})},setPaymentMethods=function setPaymentMethods(payload){return dispatch({type:types.t$,payload})},setPlanProps=function setPlanProps(payload){return dispatch({type:types.ez,payload})},toggleIfEnrolled=function toggleIfEnrolled(payload){return dispatch({type:types.nY,payload})},setSelfAppliedCoupon=function setSelfAppliedCoupon(payload){return dispatch({type:types.tZ,payload})},getPaymentMethods=function(){var _ref3=(0,asyncToGenerator.A)(regenerator_default().mark((function _callee3(ownerId){var resp;return regenerator_default().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(_context3.prev=0,!isAuthenticated){_context3.next=9;break}return setLoader("paymentMethods",!1),setLoader("paymentMethods",!0),_context3.next=6,breathecode.A.payment({academy_id:ownerId,lang:router.locale,country_code:null==location?void 0:location.countryShort}).getpaymentMethods();case 6:(resp=_context3.sent).status<400&&setPaymentMethods(resp.data),setLoader("paymentMethods",!1);case 9:_context3.next=15;break;case 11:_context3.prev=11,_context3.t0=_context3.catch(0),signupAction_console.log(_context3.t0),setLoader("paymentMethods",!1);case 15:case"end":return _context3.stop()}}),_callee3,null,[[0,11]])})));return function getPaymentMethods(_x3){return _ref3.apply(this,arguments)}}(),getPriceWithDiscount=function getPriceWithDiscount(price,couponData){var discount=null==couponData?void 0:couponData.discount_value,discountType=null==couponData?void 0:couponData.discount_type;if(discount){if("PERCENT_OFF"===discountType||"HAGGLING"===discountType)return{originalPrice:price,price:Math.round(100*(price-price*discount+Number.EPSILON))/100,discount:"".concat(100*discount,"%"),discountType};if("FIXED_PRICE"===discountType)return{originalPrice:price,price:price-discount,discount:"$".concat(discount),discountType}}return{price,discount:"0%"}},getSelfAppliedCoupon=function(){var _ref4=(0,asyncToGenerator.A)(regenerator_default().mark((function _callee4(plan){var _yield$bc$payment$ver,data,coupon;return regenerator_default().wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(_context4.prev=0,!plan){_context4.next=8;break}return _context4.next=4,breathecode.A.payment({plan,country_code:null==location?void 0:location.countryShort}).verifyCoupon();case 4:_yield$bc$payment$ver=_context4.sent,data=_yield$bc$payment$ver.data,(coupon=data[0])&&setSelfAppliedCoupon(signupAction_objectSpread(signupAction_objectSpread({},coupon),{},{plan}));case 8:_context4.next=13;break;case 10:_context4.prev=10,_context4.t0=_context4.catch(0),signupAction_console.log(_context4.t0);case 13:case"end":return _context4.stop()}}),_callee4,null,[[0,10]])})));return function getSelfAppliedCoupon(_x4){return _ref4.apply(this,arguments)}}();return{state,isFirstStep,isSecondStep,isThirdStep,isFourthStep,toggleIfEnrolled,nextStep:function nextStep(){return dispatch({type:types.zM})},prevStep:function prevStep(){return dispatch({type:types.tJ})},setLoader,handleStep,setDateProps,setCheckoutData,setPaymentMethods,setPaymentStatus:function setPaymentStatus(payload){return dispatch({type:types.Xp,payload})},setIsSubmittingCard:function setIsSubmittingCard(payload){return dispatch({type:types.rI,payload})},setIsSubmittingPayment:function setIsSubmittingPayment(payload){return dispatch({type:types.Tz,payload})},setPaymentInfo:function setPaymentInfo(payload,value){return dispatch({type:types.pB,payload,value})},setSelfAppliedCoupon,handlePayment:function handlePayment(data){var disableRedirects=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((function(resolve,reject){var manyInstallmentsExists=(null==selectedPlanCheckoutData?void 0:selectedPlanCheckoutData.how_many_months)>0||"FINANCING"===(null==selectedPlanCheckoutData?void 0:selectedPlanCheckoutData.period),isTtrial=["FREE","TRIAL"].includes(null==selectedPlanCheckoutData?void 0:selectedPlanCheckoutData.type),requests=function getRequests(){return isTtrial?{type:(null==data?void 0:data.type)||checkoutData.type,token:(null==data?void 0:data.token)||checkoutData.token}:{type:(null==data?void 0:data.type)||checkoutData.type,token:(null==data?void 0:data.token)||checkoutData.token,how_many_installments:(null==data?void 0:data.installments)||(null==selectedPlanCheckoutData?void 0:selectedPlanCheckoutData.how_many_months)||void 0,chosen_period:manyInstallmentsExists?void 0:(null==selectedPlanCheckoutData?void 0:selectedPlanCheckoutData.period)||"HALF",coupons:null==checkoutData?void 0:checkoutData.coupons}}();breathecode.A.payment().pay(signupAction_objectSpread(signupAction_objectSpread({},requests),{},{conversion_info:signupAction_objectSpread({},userSession)})).then(function(){var _ref=(0,asyncToGenerator.A)(regenerator_default().mark((function _callee(response){var transactionData,_dateProps$plan,_transactionData$plan,currency,simplePlans,_cohortPlans$;return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,response.json();case 2:"FULFILLED"===(null==(transactionData=_context.sent)?void 0:transactionData.status)?(setSubscriptionProcess({status:types.bT,id:null==dateProps?void 0:dateProps.id,slug:null==dateProps?void 0:dateProps.slug,plan_slug:null==dateProps||null===(_dateProps$plan=dateProps.plan)||void 0===_dateProps$plan?void 0:_dateProps$plan.slug,academy_info:null==dateProps?void 0:dateProps.academy}),currency="USD",simplePlans=[],cohortPlans&&(currency=(null===(_cohortPlans$=cohortPlans[0])||void 0===_cohortPlans$||null===(_cohortPlans$=_cohortPlans$.plan)||void 0===_cohortPlans$||null===(_cohortPlans$=_cohortPlans$.currency)||void 0===_cohortPlans$?void 0:_cohortPlans$.code)||"USD",simplePlans=cohortPlans.map((function(cohortPlan){var plan=cohortPlan.plan;plan.service_items;return{plan:signupAction_objectSpread({},(0,objectWithoutProperties.A)(plan,_excluded))}}))),(0,utils_requests.A$)({dataLayer:{event:"purchase",value:(null==selectedPlanCheckoutData?void 0:selectedPlanCheckoutData.price)||0,currency,payment_type:"Credit card",plan:(null==selectedPlanCheckoutData?void 0:selectedPlanCheckoutData.plan_slug)||(null==transactionData||null===(_transactionData$plan=transactionData.plan)||void 0===_transactionData$plan?void 0:_transactionData$plan.slug)||defaultPlan,period_label:(null==selectedPlanCheckoutData?void 0:selectedPlanCheckoutData.period_label)||"one-time",items:simplePlans,agent:(0,utils.VK)()}}),disableRedirects||(redirect&&(null==redirect?void 0:redirect.length)>0||redirectedFrom&&redirectedFrom.length>0?(router.push(redirect||redirectedFrom),localStorage.removeItem("redirect"),localStorage.removeItem("redirected-from")):router.push("/choose-program")),(void 0===transactionData||transactionData.status>=400)&&createToast({position:"top",title:t("alert-message:payment-error"),status:"error",duration:7e3,isClosable:!0}),resolve(transactionData)):resolve(transactionData);case 4:case"end":return _context.stop()}}),_callee)})));return function(_x){return _ref.apply(this,arguments)}}()).catch((function(error){signupAction_console.error("Error handling payment bc.payment().pay",error),reject(error)}))}))},setPlanData:function setPlanData(payload){return dispatch({type:types.sL,payload})},setSelectedPlanCheckoutData:function setSelectedPlanCheckoutData(payload){return dispatch({type:types.RK,payload})},handleChecking:function handleChecking(cohortData){return new Promise((function(resolve,reject){if(null!=cohortData&&cohortData.id){var _getTimeProps=(0,utils.E5)(cohortData),kickoffDate=_getTimeProps.kickoffDate,weekDays=_getTimeProps.weekDays,availableTime=_getTimeProps.availableTime;setDateProps(signupAction_objectSpread(signupAction_objectSpread({},cohortData),{},{kickoffDate,weekDays,availableTime}))}(function getChecking(cohortData){return new Promise((function(resolve,reject){var _cohortData$academy,_dateProps$academy,selectedPlan=void 0!==(null==cohortData?void 0:cohortData.plan)?null==cohortData?void 0:cohortData.plan:"4geeks-basic-subscription",cohortPlan=(null==cohortPlans?void 0:cohortPlans.length)>0?cohortPlans[(null==cohortData?void 0:cohortData.index)||0]:selectedPlan,checkingBody={type:"PREVIEW",cohort:(null==cohortData?void 0:cohortData.id)||(null==dateProps?void 0:dateProps.id),academy:(null==cohortData||null===(_cohortData$academy=cohortData.academy)||void 0===_cohortData$academy?void 0:_cohortData$academy.id)||(null==dateProps||null===(_dateProps$academy=dateProps.academy)||void 0===_dateProps$academy?void 0:_dateProps$academy.id)||Number(academy)||void 0,syllabus,plans:[(null==selectedPlan?void 0:selectedPlan.slug)||((null==cohortPlans?void 0:cohortPlans.length)>0?null==cohortPlan?void 0:cohortPlan.slug:void 0)||"4geeks-basic-subscription"],coupons:couponsQuery?[couponsQuery]:void 0,country_code:null==location?void 0:location.countryShort};breathecode.A.payment().checking(checkingBody).then(function(){var _ref2=(0,asyncToGenerator.A)(regenerator_default().mark((function _callee2(response){var _data$plans,data,currentPlan,planSlug,finalData;return regenerator_default().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return data=response.data,currentPlan=null==data||null===(_data$plans=data.plans)||void 0===_data$plans?void 0:_data$plans[0],planSlug=encodeURIComponent(null==currentPlan?void 0:currentPlan.slug),_context2.next=5,generatePlan(planSlug,planTranslationsObj).then((function(respData){return respData}));case 5:finalData=_context2.sent,setPlanProps(null==finalData?void 0:finalData.featured_info),response.status<400&&(setCheckoutData(signupAction_objectSpread(signupAction_objectSpread(signupAction_objectSpread({},data),finalData),{},{id:data.id})),resolve(signupAction_objectSpread(signupAction_objectSpread(signupAction_objectSpread({},data),finalData),{},{id:data.id}))),response.status>=400&&reject(response);case 9:case"end":return _context2.stop()}}),_callee2)})));return function(_x2){return _ref2.apply(this,arguments)}}()).catch((function(error){reject(error)})).finally((function(){setLoader("date",!1)}))}))})(cohortData).then((function(data){resolve(data)})).catch((function(err){reject(err),400===(null==err?void 0:err.status)?(handleStep(1),toggleIfEnrolled(!0)):signupAction_console.error(err)}))}))},setPlanProps,setCohortPlans:function setCohortPlans(payload){return dispatch({type:types.kS,payload})},getPaymentText:function getPaymentText(){var planIsNotTrial="TRIAL"!==(null==selectedPlanCheckoutData?void 0:selectedPlanCheckoutData.type),period=null==selectedPlanCheckoutData?void 0:selectedPlanCheckoutData.period;if(planIsNotTrial){var _selectedPlanCheckout,_selectedPlanCheckout2,_selectedPlanCheckout3,_selectedPlanCheckout8,_selectedPlanCheckout9,_selectedPlanCheckout0,_selectedPlanCheckout13,_selectedPlanCheckout14,_selectedPlanCheckout15,_selectedPlanCheckout16;if("FINANCING"===period){var totalAmount=(null==selectedPlanCheckoutData?void 0:selectedPlanCheckoutData.price)*(null==selectedPlanCheckoutData?void 0:selectedPlanCheckoutData.how_many_months);return t("info.will-pay-month",{price:null==selectedPlanCheckoutData?void 0:selectedPlanCheckoutData.price,qty_months:null==selectedPlanCheckoutData?void 0:selectedPlanCheckoutData.how_many_months,total_amount:Math.round(100*totalAmount)/100})}if((null==selectedPlanCheckoutData||null===(_selectedPlanCheckout=selectedPlanCheckoutData.financing_options)||void 0===_selectedPlanCheckout?void 0:_selectedPlanCheckout.length)>0&&(null==selectedPlanCheckoutData||null===(_selectedPlanCheckout2=selectedPlanCheckoutData.financing_options[0])||void 0===_selectedPlanCheckout2?void 0:_selectedPlanCheckout2.monthly_price)>0&&1===(null==selectedPlanCheckoutData||null===(_selectedPlanCheckout3=selectedPlanCheckoutData.financing_options[0])||void 0===_selectedPlanCheckout3?void 0:_selectedPlanCheckout3.how_many_months)){var _selectedPlanCheckout4,_selectedPlanCheckout5,_selectedPlanCheckout6,_selectedPlanCheckout7,_totalAmount=(null==selectedPlanCheckoutData||null===(_selectedPlanCheckout4=selectedPlanCheckoutData.financing_options[0])||void 0===_selectedPlanCheckout4?void 0:_selectedPlanCheckout4.monthly_price)*(null==selectedPlanCheckoutData||null===(_selectedPlanCheckout5=selectedPlanCheckoutData.financing_options[0])||void 0===_selectedPlanCheckout5?void 0:_selectedPlanCheckout5.how_many_months);return t("info.will-pay-month",{price:null==selectedPlanCheckoutData||null===(_selectedPlanCheckout6=selectedPlanCheckoutData.financing_options[0])||void 0===_selectedPlanCheckout6?void 0:_selectedPlanCheckout6.monthly_price,qty_months:null==selectedPlanCheckoutData||null===(_selectedPlanCheckout7=selectedPlanCheckoutData.financing_options[0])||void 0===_selectedPlanCheckout7?void 0:_selectedPlanCheckout7.how_many_months,total_amount:Math.round(100*_totalAmount)/100})}if((null==selectedPlanCheckoutData||null===(_selectedPlanCheckout8=selectedPlanCheckoutData.financing_options)||void 0===_selectedPlanCheckout8?void 0:_selectedPlanCheckout8.length)>0&&(null==selectedPlanCheckoutData||null===(_selectedPlanCheckout9=selectedPlanCheckoutData.financing_options[0])||void 0===_selectedPlanCheckout9?void 0:_selectedPlanCheckout9.monthly_price)>0&&(null==selectedPlanCheckoutData||null===(_selectedPlanCheckout0=selectedPlanCheckoutData.financing_options[0])||void 0===_selectedPlanCheckout0?void 0:_selectedPlanCheckout0.how_many_months)>0){var _selectedPlanCheckout1,_selectedPlanCheckout10,_selectedPlanCheckout11,_selectedPlanCheckout12,_totalAmount2=(null==selectedPlanCheckoutData||null===(_selectedPlanCheckout1=selectedPlanCheckoutData.financing_options[0])||void 0===_selectedPlanCheckout1?void 0:_selectedPlanCheckout1.monthly_price)*(null==selectedPlanCheckoutData||null===(_selectedPlanCheckout10=selectedPlanCheckoutData.financing_options[0])||void 0===_selectedPlanCheckout10?void 0:_selectedPlanCheckout10.how_many_months);return t("info.will-pay-monthly",{price:null==selectedPlanCheckoutData||null===(_selectedPlanCheckout11=selectedPlanCheckoutData.financing_options[0])||void 0===_selectedPlanCheckout11?void 0:_selectedPlanCheckout11.monthly_price,qty_months:null==selectedPlanCheckoutData||null===(_selectedPlanCheckout12=selectedPlanCheckoutData.financing_options[0])||void 0===_selectedPlanCheckout12?void 0:_selectedPlanCheckout12.how_many_months,total_amount:Math.round(100*_totalAmount2)/100,next_month:nextMonthText})}if((null==selectedPlanCheckoutData||null===(_selectedPlanCheckout13=selectedPlanCheckoutData.financing_options)||void 0===_selectedPlanCheckout13?void 0:_selectedPlanCheckout13.length)>0&&(null==selectedPlanCheckoutData||null===(_selectedPlanCheckout14=selectedPlanCheckoutData.financing_options[0])||void 0===_selectedPlanCheckout14?void 0:_selectedPlanCheckout14.monthly_price)>0&&0===(null==selectedPlanCheckoutData||null===(_selectedPlanCheckout15=selectedPlanCheckoutData.financing_options[0])||void 0===_selectedPlanCheckout15?void 0:_selectedPlanCheckout15.how_many_months))return t("info.will-pay-now",{price:null==selectedPlanCheckoutData||null===(_selectedPlanCheckout16=selectedPlanCheckoutData.financing_options[0])||void 0===_selectedPlanCheckout16?void 0:_selectedPlanCheckout16.monthly_price});if("MONTH"===period)return t("info.will-pay-per-month",{price:null==selectedPlanCheckoutData?void 0:selectedPlanCheckoutData.price});if("QUARTER"===period)return t("info.will-pay-per-quarter",{price:null==selectedPlanCheckoutData?void 0:selectedPlanCheckoutData.price});if("HALF"===period)return t("info.will-pay-per-half-year",{price:null==selectedPlanCheckoutData?void 0:selectedPlanCheckoutData.price});if("YEAR"===period)return t("info.will-pay-per-year",{price:null==selectedPlanCheckoutData?void 0:selectedPlanCheckoutData.price});if("ONE_TIME"===period)return t("info.one-time-connector",{value:null==selectedPlanCheckoutData?void 0:selectedPlanCheckoutData.price})}return""},handleServiceToConsume:function handleServiceToConsume(data){for(var discountRatio=null==data?void 0:data.discount_ratio,bundleSize=null==data?void 0:data.bundle_size,pricePerUnit=null==data?void 0:data.price_per_unit,maxItems=null==data?void 0:data.max_items,maxNumItems=Math.floor(maxItems/bundleSize),allItems=[],consumableTypes={mentorship:"mentorship sessions",event:"events",compilation:"compilations"},num=1;num<=maxNumItems;num+=1){var numItems=num*bundleSize;if(numItems%bundleSize===0){var _data$serviceInfo,_data$serviceInfo2,price=(0,utils.EE)({numItems,maxItems,discountRatio,bundleSize,pricePerUnit,startDiscountFrom:1});allItems.push({id:num,slug:"".concat(numItems,"-").concat(null==data||null===(_data$serviceInfo=data.serviceInfo)||void 0===_data$serviceInfo?void 0:_data$serviceInfo.type),title:"".concat(numItems," ").concat(consumableTypes[null==data||null===(_data$serviceInfo2=data.serviceInfo)||void 0===_data$serviceInfo2?void 0:_data$serviceInfo2.type]),qty:numItems,pricePerUnit:price.discounted/numItems,price:price.original,priceText:(0,utils.$g)(price.discounted,!0),priceDiscounted:price.discounted,type:"CONSUMABLE"})}}!function setServiceProps(payload){dispatch({type:types.QG,payload})}(signupAction_objectSpread(signupAction_objectSpread({},data),{},{list:allItems}))},setSelectedService:function setSelectedService(payload){return dispatch({type:types.PL,payload})},getPaymentMethods,getPriceWithDiscount,getSelfAppliedCoupon,restartSignup:function restartSignup(){return dispatch({type:types.$D})},applyDiscountCouponsToPlans:function applyDiscountCouponsToPlans(pricingList,coupon){return coupon?pricingList.map((function(item){var price=item.price;if(price<1)return item;var discountOperation=getPriceWithDiscount(price,coupon);return signupAction_objectSpread(signupAction_objectSpread({},item),{},{price:discountOperation.price,priceText:item.priceText.replace(item.price,discountOperation.price),lastPrice:item.priceText})})):pricingList}}}}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2859],{"./node_modules/mermaid/dist/chunks/mermaid.core/chunk-44GW5IO5.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function populateCommonDb(ast,db){ast.accDescr&&db.setAccDescription?.(ast.accDescr),ast.accTitle&&db.setAccTitle?.(ast.accTitle),ast.title&&db.setDiagramTitle?.(ast.title)}__webpack_require__.d(__webpack_exports__,{S:()=>populateCommonDb}),(0,__webpack_require__("./node_modules/mermaid/dist/chunks/mermaid.core/chunk-BMRFU3JQ.mjs").K2)(populateCommonDb,"populateCommonDb")},"./node_modules/mermaid/dist/chunks/mermaid.core/diagram-3XXCIKAB.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{diagram:()=>diagram});var _chunk_44GW5IO5_mjs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/mermaid/dist/chunks/mermaid.core/chunk-44GW5IO5.mjs"),_chunk_F7MYA6JM_mjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/mermaid/dist/chunks/mermaid.core/chunk-F7MYA6JM.mjs"),_chunk_D33BOVEP_mjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/mermaid/dist/chunks/mermaid.core/chunk-D33BOVEP.mjs"),_chunk_BMRFU3JQ_mjs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/mermaid/dist/chunks/mermaid.core/chunk-BMRFU3JQ.mjs"),_mermaid_js_parser__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@mermaid-js/parser/dist/mermaid-parser.core.mjs"),defaultPacketData={packet:[]},data=structuredClone(defaultPacketData),DEFAULT_PACKET_CONFIG=_chunk_BMRFU3JQ_mjs__WEBPACK_IMPORTED_MODULE_3__.UI.packet,getConfig2=(0,_chunk_BMRFU3JQ_mjs__WEBPACK_IMPORTED_MODULE_3__.K2)(()=>{const config=(0,_chunk_F7MYA6JM_mjs__WEBPACK_IMPORTED_MODULE_1__.$t)({...DEFAULT_PACKET_CONFIG,...(0,_chunk_BMRFU3JQ_mjs__WEBPACK_IMPORTED_MODULE_3__.zj)().packet});return config.showBits&&(config.paddingY+=10),config},"getConfig"),getPacket=(0,_chunk_BMRFU3JQ_mjs__WEBPACK_IMPORTED_MODULE_3__.K2)(()=>data.packet,"getPacket"),db={pushWord:(0,_chunk_BMRFU3JQ_mjs__WEBPACK_IMPORTED_MODULE_3__.K2)(word=>{word.length>0&&data.packet.push(word)},"pushWord"),getPacket,getConfig:getConfig2,clear:(0,_chunk_BMRFU3JQ_mjs__WEBPACK_IMPORTED_MODULE_3__.K2)(()=>{(0,_chunk_BMRFU3JQ_mjs__WEBPACK_IMPORTED_MODULE_3__.IU)(),data=structuredClone(defaultPacketData)},"clear"),setAccTitle:_chunk_BMRFU3JQ_mjs__WEBPACK_IMPORTED_MODULE_3__.SV,getAccTitle:_chunk_BMRFU3JQ_mjs__WEBPACK_IMPORTED_MODULE_3__.iN,setDiagramTitle:_chunk_BMRFU3JQ_mjs__WEBPACK_IMPORTED_MODULE_3__.ke,getDiagramTitle:_chunk_BMRFU3JQ_mjs__WEBPACK_IMPORTED_MODULE_3__.ab,getAccDescription:_chunk_BMRFU3JQ_mjs__WEBPACK_IMPORTED_MODULE_3__.m7,setAccDescription:_chunk_BMRFU3JQ_mjs__WEBPACK_IMPORTED_MODULE_3__.EI},populate=(0,_chunk_BMRFU3JQ_mjs__WEBPACK_IMPORTED_MODULE_3__.K2)(ast=>{(0,_chunk_44GW5IO5_mjs__WEBPACK_IMPORTED_MODULE_0__.S)(ast,db);let lastBit=-1,word=[],row=1;const{bitsPerRow}=db.getConfig();for(let{start,end,bits,label}of ast.blocks){if(void 0!==start&&void 0!==end&&end<start)throw new Error(`Packet block ${start} - ${end} is invalid. End must be greater than start.`);if(start??=lastBit+1,start!==lastBit+1)throw new Error(`Packet block ${start} - ${end??start} is not contiguous. It should start from ${lastBit+1}.`);if(0===bits)throw new Error(`Packet block ${start} is invalid. Cannot have a zero bit field.`);for(end??=start+(bits??1)-1,bits??=end-start+1,lastBit=end,_chunk_BMRFU3JQ_mjs__WEBPACK_IMPORTED_MODULE_3__.Rm.debug(`Packet block ${start} - ${lastBit} with label ${label}`);word.length<=bitsPerRow+1&&db.getPacket().length<1e4;){const[block,nextBlock]=getNextFittingBlock({start,end,bits,label},row,bitsPerRow);if(word.push(block),block.end+1===row*bitsPerRow&&(db.pushWord(word),word=[],row++),!nextBlock)break;({start,end,bits,label}=nextBlock)}}db.pushWord(word)},"populate"),getNextFittingBlock=(0,_chunk_BMRFU3JQ_mjs__WEBPACK_IMPORTED_MODULE_3__.K2)((block,row,bitsPerRow)=>{if(void 0===block.start)throw new Error("start should have been set during first phase");if(void 0===block.end)throw new Error("end should have been set during first phase");if(block.start>block.end)throw new Error(`Block start ${block.start} is greater than block end ${block.end}.`);if(block.end+1<=row*bitsPerRow)return[block,void 0];const rowEnd=row*bitsPerRow-1,rowStart=row*bitsPerRow;return[{start:block.start,end:rowEnd,label:block.label,bits:rowEnd-block.start},{start:rowStart,end:block.end,label:block.label,bits:block.end-rowStart}]},"getNextFittingBlock"),parser={parse:(0,_chunk_BMRFU3JQ_mjs__WEBPACK_IMPORTED_MODULE_3__.K2)(async input=>{const ast=await(0,_mermaid_js_parser__WEBPACK_IMPORTED_MODULE_4__.qg)("packet",input);_chunk_BMRFU3JQ_mjs__WEBPACK_IMPORTED_MODULE_3__.Rm.debug(ast),populate(ast)},"parse")},draw=(0,_chunk_BMRFU3JQ_mjs__WEBPACK_IMPORTED_MODULE_3__.K2)((_text,id,_version,diagram2)=>{const db2=diagram2.db,config=db2.getConfig(),{rowHeight,paddingY,bitWidth,bitsPerRow}=config,words=db2.getPacket(),title=db2.getDiagramTitle(),totalRowHeight=rowHeight+paddingY,svgHeight=totalRowHeight*(words.length+1)-(title?0:rowHeight),svgWidth=bitWidth*bitsPerRow+2,svg=(0,_chunk_D33BOVEP_mjs__WEBPACK_IMPORTED_MODULE_2__.D)(id);svg.attr("viewbox",`0 0 ${svgWidth} ${svgHeight}`),(0,_chunk_BMRFU3JQ_mjs__WEBPACK_IMPORTED_MODULE_3__.a$)(svg,svgHeight,svgWidth,config.useMaxWidth);for(const[word,packet]of words.entries())drawWord(svg,packet,word,config);svg.append("text").text(title).attr("x",svgWidth/2).attr("y",svgHeight-totalRowHeight/2).attr("dominant-baseline","middle").attr("text-anchor","middle").attr("class","packetTitle")},"draw"),drawWord=(0,_chunk_BMRFU3JQ_mjs__WEBPACK_IMPORTED_MODULE_3__.K2)((svg,word,rowNumber,{rowHeight,paddingX,paddingY,bitWidth,bitsPerRow,showBits})=>{const group=svg.append("g"),wordY=rowNumber*(rowHeight+paddingY)+paddingY;for(const block of word){const blockX=block.start%bitsPerRow*bitWidth+1,width=(block.end-block.start+1)*bitWidth-paddingX;if(group.append("rect").attr("x",blockX).attr("y",wordY).attr("width",width).attr("height",rowHeight).attr("class","packetBlock"),group.append("text").attr("x",blockX+width/2).attr("y",wordY+rowHeight/2).attr("class","packetLabel").attr("dominant-baseline","middle").attr("text-anchor","middle").text(block.label),!showBits)continue;const isSingleBlock=block.end===block.start,bitNumberY=wordY-2;group.append("text").attr("x",blockX+(isSingleBlock?width/2:0)).attr("y",bitNumberY).attr("class","packetByte start").attr("dominant-baseline","auto").attr("text-anchor",isSingleBlock?"middle":"start").text(block.start),isSingleBlock||group.append("text").attr("x",blockX+width).attr("y",bitNumberY).attr("class","packetByte end").attr("dominant-baseline","auto").attr("text-anchor","end").text(block.end)}},"drawWord"),defaultPacketStyleOptions={byteFontSize:"10px",startByteColor:"black",endByteColor:"black",labelColor:"black",labelFontSize:"12px",titleColor:"black",titleFontSize:"14px",blockStrokeColor:"black",blockStrokeWidth:"1",blockFillColor:"#efefef"},diagram={parser,db,renderer:{draw},styles:(0,_chunk_BMRFU3JQ_mjs__WEBPACK_IMPORTED_MODULE_3__.K2)(({packet}={})=>{const options=(0,_chunk_F7MYA6JM_mjs__WEBPACK_IMPORTED_MODULE_1__.$t)(defaultPacketStyleOptions,packet);return`\n\t.packetByte {\n\t\tfont-size: ${options.byteFontSize};\n\t}\n\t.packetByte.start {\n\t\tfill: ${options.startByteColor};\n\t}\n\t.packetByte.end {\n\t\tfill: ${options.endByteColor};\n\t}\n\t.packetLabel {\n\t\tfill: ${options.labelColor};\n\t\tfont-size: ${options.labelFontSize};\n\t}\n\t.packetTitle {\n\t\tfill: ${options.titleColor};\n\t\tfont-size: ${options.titleFontSize};\n\t}\n\t.packetBlock {\n\t\tstroke: ${options.blockStrokeColor};\n\t\tstroke-width: ${options.blockStrokeWidth};\n\t\tfill: ${options.blockFillColor};\n\t}\n\t`},"styles")}}}]);
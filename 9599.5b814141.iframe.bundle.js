"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9599],{"./src/common/components/ProjectsSection.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>components_ProjectsSection});var react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),chunk_7NLW6UB6=__webpack_require__("./node_modules/@chakra-ui/color-mode/dist/chunk-7NLW6UB6.mjs"),chunk_MPFPK3CX=__webpack_require__("./node_modules/@chakra-ui/layout/dist/chunk-MPFPK3CX.mjs"),chunk_6CSUKJP7=__webpack_require__("./node_modules/@chakra-ui/layout/dist/chunk-6CSUKJP7.mjs"),chunk_ZYO64PFG=__webpack_require__("./node_modules/@chakra-ui/avatar/dist/chunk-ZYO64PFG.mjs"),useTranslation=__webpack_require__("./node_modules/next-translate/lib/esm/useTranslation.js"),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),chunk_MG6WC47T=__webpack_require__("./node_modules/@chakra-ui/media-query/dist/chunk-MG6WC47T.mjs"),chunk_4OGHDZEB=__webpack_require__("./node_modules/@chakra-ui/popover/dist/chunk-4OGHDZEB.mjs"),chunk_3O5UWOX6=__webpack_require__("./node_modules/@chakra-ui/popover/dist/chunk-3O5UWOX6.mjs"),chunk_CRIDK7KT=__webpack_require__("./node_modules/@chakra-ui/layout/dist/chunk-CRIDK7KT.mjs"),chunk_WPAIWTI3=__webpack_require__("./node_modules/@chakra-ui/avatar/dist/chunk-WPAIWTI3.mjs"),chunk_2RQKHYD2=__webpack_require__("./node_modules/@chakra-ui/avatar/dist/chunk-2RQKHYD2.mjs"),chunk_KVBLLJMP=__webpack_require__("./node_modules/@chakra-ui/popover/dist/chunk-KVBLLJMP.mjs"),chunk_BYOOQOH2=__webpack_require__("./node_modules/@chakra-ui/popover/dist/chunk-BYOOQOH2.mjs"),chunk_6YK4VVQO=__webpack_require__("./node_modules/@chakra-ui/popover/dist/chunk-6YK4VVQO.mjs"),chunk_3JH7ZFSI=__webpack_require__("./node_modules/@chakra-ui/popover/dist/chunk-3JH7ZFSI.mjs"),next_router=__webpack_require__("./node_modules/next/router.js"),es=__webpack_require__("./node_modules/date-fns/esm/locale/es/index.js"),format=__webpack_require__("./node_modules/date-fns/esm/format/index.js"),Heading=__webpack_require__("./src/common/components/Heading.jsx"),Text=__webpack_require__("./src/common/components/Text.jsx"),defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),browser=__webpack_require__("./node_modules/websocket/lib/browser.js"),utils=__webpack_require__("./src/utils/index.js"),useAuth=__webpack_require__("./src/common/hooks/useAuth.js"),axios=__webpack_require__("./src/axios.js"),variables=__webpack_require__("./src/utils/variables.js"),logging=__webpack_require__("./src/utils/logging.js"),__jsx=react.createElement;function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){(0,defineProperty.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var ConnectionContext=(0,react.createContext)({usersConnected:[]});function OnlineContext(_ref){var children=_ref.children,_useState=(0,react.useState)({}),usersConnected=_useState[0],setUsersConnected=_useState[1],accessToken=(0,utils.$E)("accessToken"),isLoading=(0,useAuth.A)().isLoading,temporalToken=(0,react.useState)(null)[0],hasLoaded=!isLoading,BREATHECODE_WS=String(variables.UA).replace("https://","");(0,react.useEffect)((function(){hasLoaded&&accessToken&&(axios.Ay.defaults.headers.common.Authorization="Token ".concat(accessToken))}),[isLoading,accessToken]);var actions={connected:function connected(data){setUsersConnected((function(prev){return _objectSpread(_objectSpread({},prev),{},(0,defineProperty.A)({},data.id,!0))}))},disconnected:function disconnected(data){setUsersConnected((function(prev){var updated=_objectSpread({},prev);return delete updated[data.id],updated}))}};(0,react.useEffect)((function(){if(hasLoaded&&null!==temporalToken&&null!=temporalToken&&temporalToken.token){var client=new browser.w3cwebsocket("wss://".concat(BREATHECODE_WS,"/ws/online?token=").concat(temporalToken.token));client.onopen=function(){(0,logging.Rm)("WebSocket Client Connected"),setUsersConnected((function(prev){return _objectSpread(_objectSpread({},prev),{},(0,defineProperty.A)({},null==temporalToken?void 0:temporalToken.user_id,!0))}))},client.onmessage=function(event){var data=JSON.parse(event.data);actions[data.status]&&"object"!=typeof actions[data.status]&&data&&"object"==typeof data&&actions[data.status](data)}}}),[isLoading,temporalToken]);var values=(0,react.useMemo)((function(){return{usersConnected:Object.keys(usersConnected).map((function(key){return Number(key)}))}}),[usersConnected]);return __jsx(ConnectionContext.Provider,{value:values},children)}OnlineContext.displayName="OnlineContext",OnlineContext.propTypes={children:prop_types_default().node.isRequired};OnlineContext.__docgenInfo={description:"",methods:[],displayName:"OnlineContext",props:{children:{description:"",type:{name:"node"},required:!0}}};const hooks_useOnline=function useOnline(){return(0,react.useContext)(ConnectionContext)};var useCohortHandler=__webpack_require__("./src/common/hooks/useCohortHandler.js"),AvatarUser_jsx=react.createElement,AvatarUser=(0,react.memo)((function(_ref){var _user$profile,_user$github,_data$role,_data$role2,data=_ref.data,fullName=_ref.fullName,isTeacherVersion=_ref.isTeacherVersion,containerStyle=_ref.containerStyle,width=_ref.width,height=_ref.height,badge=_ref.badge,customBadge=_ref.customBadge,isWrapped=_ref.isWrapped,index=_ref.index,withoutPopover=_ref.withoutPopover,avatarUrl=_ref.avatarUrl,user=data.user,t=(0,useTranslation.A)("dashboard").t,fullNameLabel=fullName||"".concat(null==user?void 0:user.first_name," ").concat(null==user?void 0:user.last_name),router=(0,next_router.useRouter)(),usersConnected=hooks_useOnline().usersConnected,cohortSession=(0,useCohortHandler.A)().state.cohortSession,isOnlineUser=null==usersConnected?void 0:usersConnected.some((function(id){return id===(null==user?void 0:user.id)})),_useMediaQuery=(0,chunk_MG6WC47T.U)("(max-width: 768px)"),isBelowTablet=(0,slicedToArray.A)(_useMediaQuery,1)[0],dateFormated={en:(null==data?void 0:data.created_at)&&(0,format.A)(new Date(null==data?void 0:data.created_at),"MMMM dd, yyyy"),es:(null==data?void 0:data.created_at)&&(0,format.A)(new Date(null==data?void 0:data.created_at),"dd 'de' MMMM, yyyy",{locale:es.A})},cohortSlug=router.query.cohortSlug,borderColor=(0,chunk_7NLW6UB6.dU)("white","featuredDark"),roles={teacher:t("common:teacher"),assistant:t("common:assistant"),student:t("common:student"),member:t("common:member")},placementCard=isBelowTablet?"auto":"left-end",avatar=(null==user||null===(_user$profile=user.profile)||void 0===_user$profile?void 0:_user$profile.avatar_url)||(null==user||null===(_user$github=user.github)||void 0===_user$github?void 0:_user$github.avatar_url)||avatarUrl;return withoutPopover?AvatarUser_jsx(chunk_CRIDK7KT.Q,{as:"div","aria-expanded":!1,justifyContent:"center",alignItems:"center",style:containerStyle},AvatarUser_jsx(chunk_WPAIWTI3.e,{id:fullNameLabel,width,height,style:{userSelect:"none"},onClick:function onClick(){var _cohortSession$academ2;isTeacherVersion&&null!=user&&user.id&&null!=cohortSession&&null!==(_cohortSession$academ2=cohortSession.academy)&&void 0!==_cohortSession$academ2&&_cohortSession$academ2.id&&router.push("/cohort/".concat(cohortSlug,"/student/").concat(null==user?void 0:user.id,"?academy=").concat(cohortSession.academy.id))},cursor:isTeacherVersion?"pointer":"default",title:fullNameLabel,src:avatar,marginLeft:isWrapped?"-10px":"0px",zIndex:index},customBadge&&customBadge,badge&&isOnlineUser&&AvatarUser_jsx(chunk_2RQKHYD2.N,{boxSize:"11px",bg:"success",top:"-4px",right:isWrapped?"6px":"4px",border:"2px solid",borderColor}))):AvatarUser_jsx(chunk_4OGHDZEB.A,{trigger:"hover",key:fullNameLabel,placement:placementCard},AvatarUser_jsx(chunk_3O5UWOX6.W,null,AvatarUser_jsx(chunk_CRIDK7KT.Q,{as:"div","aria-expanded":!1,justifyContent:"center",alignItems:"center",style:containerStyle},AvatarUser_jsx(chunk_WPAIWTI3.e,{id:fullNameLabel,width,height,style:{userSelect:"none"},onClick:function onClick(){var _cohortSession$academ;isTeacherVersion&&null!=user&&user.id&&null!=cohortSession&&null!==(_cohortSession$academ=cohortSession.academy)&&void 0!==_cohortSession$academ&&_cohortSession$academ.id&&router.push("/cohort/".concat(cohortSlug,"/student/").concat(null==user?void 0:user.id,"?academy=").concat(cohortSession.academy.id))},cursor:isTeacherVersion?"pointer":"default",title:fullNameLabel,src:avatar,marginLeft:isWrapped?"-10px":"0px",zIndex:index,alt:"".concat(fullNameLabel," - image")},customBadge&&customBadge,badge&&isOnlineUser&&AvatarUser_jsx(chunk_2RQKHYD2.N,{boxSize:"11px",bg:"success",top:"-4px",right:isWrapped?"6px":"4px",border:"2px solid",borderColor})))),AvatarUser_jsx(chunk_KVBLLJMP.h,{minWidth:{base:"none",md:null!=data&&data.role?"320px":""},width:null!=data&&data.role?"100%":"auto",pr:!(null!=data&&data.role)&&"20px"},(null==data?void 0:data.role)&&AvatarUser_jsx(chunk_BYOOQOH2.D,null,AvatarUser_jsx(Heading.A,{size:"15px",fontWeight:"semibold",textTransform:"uppercase",py:"4px",px:"8px",dangerouslySetInnerHTML:{__html:"".concat(roles[null==data||null===(_data$role=data.role)||void 0===_data$role?void 0:_data$role.toLowerCase()]||"member")}})),AvatarUser_jsx(chunk_6YK4VVQO.R,null),AvatarUser_jsx(chunk_3JH7ZFSI.e,{className:"popover-bg-color",display:"flex",flexDirection:"row",gridGap:"15px",my:"8px"},AvatarUser_jsx(chunk_WPAIWTI3.e,{id:fullNameLabel,width:null!=data&&data.role?"95px":"38px",height:null!=data&&data.role?"95px":"38px",style:{userSelect:"none"},src:avatar}),AvatarUser_jsx(chunk_6CSUKJP7.az,{display:"flex",flexDirection:"column",justifyContent:"center",gridGap:"10px",height:"auto"},AvatarUser_jsx(Heading.A,{size:"15px"},fullNameLabel),AvatarUser_jsx(Text.A,{size:"sm",fontWeight:"400"},"".concat(t("dashboard:member-since",{role:roles[null==data||null===(_data$role2=data.role)||void 0===_data$role2?void 0:_data$role2.toLowerCase()]||"member"})," ").concat(dateFormated[null==router?void 0:router.locale]))))))}));AvatarUser.propTypes={data:prop_types_default().objectOf(prop_types_default().oneOfType([prop_types_default().any])).isRequired,fullName:prop_types_default().string,containerStyle:prop_types_default().objectOf(prop_types_default().oneOfType([prop_types_default().any])),width:prop_types_default().string,height:prop_types_default().string,badge:prop_types_default().bool,customBadge:prop_types_default().node,isWrapped:prop_types_default().bool,index:prop_types_default().number,withoutPopover:prop_types_default().bool,avatarUrl:prop_types_default().string,isTeacherVersion:prop_types_default().bool},AvatarUser.defaultProps={fullName:"",containerStyle:{},width:"39px",height:"39px",badge:!1,customBadge:null,isWrapped:!1,index:0,withoutPopover:!1,avatarUrl:"",isTeacherVersion:!1};const components_AvatarUser=AvatarUser;AvatarUser.__docgenInfo={description:"",methods:[],displayName:"AvatarUser",props:{fullName:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},containerStyle:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"objectOf",value:{name:"union",value:[{name:"any"}]}},required:!1},width:{defaultValue:{value:"'39px'",computed:!1},description:"",type:{name:"string"},required:!1},height:{defaultValue:{value:"'39px'",computed:!1},description:"",type:{name:"string"},required:!1},badge:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},customBadge:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"node"},required:!1},isWrapped:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},index:{defaultValue:{value:"0",computed:!1},description:"",type:{name:"number"},required:!1},withoutPopover:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},avatarUrl:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},isTeacherVersion:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},data:{description:"",type:{name:"objectOf",value:{name:"union",value:[{name:"any"}]}},required:!0}}};var Icon=__webpack_require__("./src/common/components/Icon/index.jsx"),useStyle=__webpack_require__("./src/common/hooks/useStyle.js"),ProjectsSection_jsx=react.createElement;function ProjectsSection(_ref){var _teacher$user,_teacher$user2,_teacher$user3,_teacher$user4,startsIn=_ref.startsIn,syllabusContent=_ref.syllabusContent,courseProgress=_ref.courseProgress,usersConnected=_ref.usersConnected,assistants=_ref.assistants,teacher=_ref.teacher,isAvailableAsSaas=_ref.isAvailableAsSaas,subscriptionStatus=_ref.subscriptionStatus,t=(0,useTranslation.A)("program-card").t,textColor=(0,chunk_7NLW6UB6.dU)("black","white"),bgColor=(0,chunk_7NLW6UB6.dU)("featuredLight","featuredDark"),now=new Date,hexColor=(0,useStyle.A)().hexColor,isFreeTrial="FREE_TRIAL"===subscriptionStatus,statusActive="ACTIVE"===subscriptionStatus||"FULLY_PAID"===subscriptionStatus,hasStarted="started"===function statusTimeString(start){return start<now?"started":"idle"}(new Date(startsIn)),existsMentors=(null==assistants?void 0:assistants.length)>0||(0,utils.Et)(null==teacher?void 0:teacher.id),countOfMentors=(null==assistants?void 0:assistants.length)+(null!=teacher&&teacher.id?1:0),syllabusArray=function getSyllabusArray(){var contentArray=[];return null!=syllabusContent&&syllabusContent.totalLessons&&contentArray.push({name:"lessons",icon:"book",total:syllabusContent.totalLessons,completed:syllabusContent.completedLessons}),null!=syllabusContent&&syllabusContent.totalProjects&&contentArray.push({name:"projects",icon:"laptop",total:syllabusContent.totalProjects,completed:syllabusContent.completedProjects}),null!=syllabusContent&&syllabusContent.totalExercises&&contentArray.push({name:"exercises",icon:"strength",total:syllabusContent.totalExercises,completed:syllabusContent.completedExercises}),null!=syllabusContent&&syllabusContent.totalQuizzes&&contentArray.push({name:"quizzes",icon:"answer",total:syllabusContent.totalQuizzes,completed:syllabusContent.completedQuizzes}),contentArray}();return((null==syllabusArray?void 0:syllabusArray.length)>0||(null==assistants?void 0:assistants.length)>0)&&ProjectsSection_jsx(chunk_MPFPK3CX.s,{justifyContent:"space-between",alignItems:"center",marginTop:"10px",padding:"10px",borderRadius:"5px",background:bgColor},(null==syllabusArray?void 0:syllabusArray.length)>0&&ProjectsSection_jsx(chunk_6CSUKJP7.az,{display:"flex",flexDirection:"column",gridGap:"8px"},syllabusArray.map((function(elem){return ProjectsSection_jsx(chunk_MPFPK3CX.s,{key:null==elem?void 0:elem.name,fontSize:"xs",lineHeight:"14px",fontWeight:"700",color:textColor,display:"flex"},ProjectsSection_jsx(Icon.A,{width:"14px",height:"14px",mr:"7px",color:hexColor.blueDefault,icon:(null==elem?void 0:elem.icon)||"book"}),ProjectsSection_jsx(chunk_6CSUKJP7.az,null,(!1===isAvailableAsSaas||statusActive||isFreeTrial)&&(hasStarted||courseProgress>0)&&ProjectsSection_jsx(react.Fragment,null,ProjectsSection_jsx(Text.A,{as:"span",color:"blue.default2"},elem.completed||0),"/"),"".concat(elem.total," ").concat(t(elem.name))))}))),existsMentors&&ProjectsSection_jsx(chunk_6CSUKJP7.az,null,ProjectsSection_jsx(Text.A,{fontSize:"xs",lineHeight:"14px",fontWeight:"700",color:textColor,marginBottom:"5px",textAlign:"center"},"".concat(countOfMentors," ").concat(t("mentors-available"))),ProjectsSection_jsx(chunk_6CSUKJP7.az,{display:"flex",justifyContent:"space-between",mt:"10px",gridGap:"22px"},(null==teacher?void 0:teacher.id)&&ProjectsSection_jsx(components_AvatarUser,{width:"42px",height:"42px",key:"".concat(teacher.id," - ").concat(null==teacher||null===(_teacher$user=teacher.user)||void 0===_teacher$user?void 0:_teacher$user.first_name),fullName:"".concat(null==teacher||null===(_teacher$user2=teacher.user)||void 0===_teacher$user2?void 0:_teacher$user2.first_name," ").concat(null==teacher||null===(_teacher$user3=teacher.user)||void 0===_teacher$user3?void 0:_teacher$user3.last_name),data:teacher,isOnline:null==usersConnected?void 0:usersConnected.includes(null==teacher||null===(_teacher$user4=teacher.user)||void 0===_teacher$user4?void 0:_teacher$user4.id),badge:!0,customBadge:ProjectsSection_jsx(chunk_6CSUKJP7.az,{position:"absolute",bottom:"-6px",right:"-8px",background:"blue.default",borderRadius:"50px",p:"5px",border:"2px solid white"},ProjectsSection_jsx(Icon.A,{icon:"teacher1",width:"12px",height:"12px",color:"#FFFFFF"}))}),(null==assistants?void 0:assistants.length)>0&&ProjectsSection_jsx(chunk_ZYO64PFG.Z,{max:(null==assistants?void 0:assistants.length)<=2?2:1,size:"md"},null==assistants?void 0:assistants.map((function(c,i){var _c$user,_c$user2,_c$user3,fullName="".concat(null==c||null===(_c$user=c.user)||void 0===_c$user?void 0:_c$user.first_name," ").concat(null==c||null===(_c$user2=c.user)||void 0===_c$user2?void 0:_c$user2.last_name),isOnline=null==usersConnected?void 0:usersConnected.includes(null==c||null===(_c$user3=c.user)||void 0===_c$user3?void 0:_c$user3.id);return ProjectsSection_jsx(react.Fragment,{key:"".concat(c.id," - ").concat(fullName)},ProjectsSection_jsx(components_AvatarUser,{width:"42px",height:"42px",index:i,isWrapped:!0,fullName,data:c,isOnline,badge:!0}))}))))))}ProjectsSection.propTypes={startsIn:prop_types_default().oneOfType([prop_types_default().instanceOf(Date),prop_types_default().string]),syllabusContent:prop_types_default().objectOf(prop_types_default().oneOfType([prop_types_default().any])),courseProgress:prop_types_default().number,usersConnected:prop_types_default().arrayOf(prop_types_default().number),assistants:prop_types_default().arrayOf(prop_types_default().oneOfType([prop_types_default().any])),teacher:prop_types_default().objectOf(prop_types_default().oneOfType([prop_types_default().any])),isAvailableAsSaas:prop_types_default().bool,subscriptionStatus:prop_types_default().string},ProjectsSection.defaultProps={startsIn:null,syllabusContent:null,courseProgress:null,usersConnected:[],assistants:[],teacher:null,isAvailableAsSaas:!0,subscriptionStatus:""};const components_ProjectsSection=ProjectsSection;ProjectsSection.__docgenInfo={description:"",methods:[],displayName:"ProjectsSection",props:{startsIn:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"union",value:[{name:"instanceOf",value:"Date"},{name:"string"}]},required:!1},syllabusContent:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"objectOf",value:{name:"union",value:[{name:"any"}]}},required:!1},courseProgress:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"number"},required:!1},usersConnected:{defaultValue:{value:"[]",computed:!1},description:"",type:{name:"arrayOf",value:{name:"number"}},required:!1},assistants:{defaultValue:{value:"[]",computed:!1},description:"",type:{name:"arrayOf",value:{name:"union",value:[{name:"any"}]}},required:!1},teacher:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"objectOf",value:{name:"union",value:[{name:"any"}]}},required:!1},isAvailableAsSaas:{defaultValue:{value:"true",computed:!1},description:"",type:{name:"bool"},required:!1},subscriptionStatus:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1}}}}}]);
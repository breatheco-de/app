"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[35],{"./src/common/components/Heading.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _home_runner_work_app_app_node_modules_babel_runtime_helpers_esm_extends_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),_home_runner_work_app_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_chakra_ui_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@chakra-ui/layout/dist/chunk-B2MGPQRJ.mjs"),prop_types__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_4__),_excluded=["children","size"],__jsx=react__WEBPACK_IMPORTED_MODULE_0__.createElement,sizes={xxl:"var(--heading-xxl)",xl:"var(--heading-xl)",l:"var(--heading-l)",m:"var(--heading-m)",sm:"var(--heading-sm)",xsm:"var(--heading-xsm)"};function Heading(_ref){var children=_ref.children,size=_ref.size,rest=(0,_home_runner_work_app_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_1__.Z)(_ref,_excluded);return __jsx(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_2__.X,(0,_home_runner_work_app_app_node_modules_babel_runtime_helpers_esm_extends_js__WEBPACK_IMPORTED_MODULE_3__.Z)({fontSize:sizes[size]||size},rest),children)}Heading.displayName="Heading",Heading.propTypes={size:prop_types__WEBPACK_IMPORTED_MODULE_4___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_4___default().string,prop_types__WEBPACK_IMPORTED_MODULE_4___default().object]),children:prop_types__WEBPACK_IMPORTED_MODULE_4___default().node},Heading.defaultProps={size:"l",children:null},Heading.__docgenInfo={description:"",methods:[],displayName:"Heading",props:{size:{defaultValue:{value:"'l'",computed:!1},description:"",type:{name:"union",value:[{name:"string"},{name:"object"}]},required:!1},children:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"node"},required:!1}}};const __WEBPACK_DEFAULT_EXPORT__=Heading},"./src/common/components/ShowPrices.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _home_runner_work_app_app_node_modules_babel_runtime_helpers_esm_extends_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),_home_runner_work_app_app_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_11__),_chakra_ui_react__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@chakra-ui/layout/dist/chunk-6CSUKJP7.mjs"),_chakra_ui_react__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@chakra-ui/button/dist/chunk-NAA7TEES.mjs"),next_router__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next/router.js"),next_translate_useTranslation__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/next-translate/lib/esm/useTranslation.js"),_Heading__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/common/components/Heading.jsx"),_Text__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/common/components/Text.jsx"),_store_actions_signupAction__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/common/store/actions/signupAction.js"),_hooks_useStyle__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/common/hooks/useStyle.js"),__jsx=react__WEBPACK_IMPORTED_MODULE_0__.createElement;function PlanCard(_ref){var item=_ref.item,handleSelect=_ref.handleSelect,selectedId=_ref.selectedId,isCouponAvailable=_ref.isCouponAvailable,_useStyle=(0,_hooks_useStyle__WEBPACK_IMPORTED_MODULE_6__.Z)(),hexColor=_useStyle.hexColor,backgroundColor2=_useStyle.backgroundColor2,selectedColor=isCouponAvailable?"#256c45":hexColor.blueDefault,isSelected=selectedId===item.plan_id;return __jsx(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_7__.xu,{key:"".concat(item.title," ").concat(null==item?void 0:item.price),display:"flex",onClick:function onClick(){return handleSelect(item)},width:"100%",alignItems:(null==item?void 0:item.isFreeTier)&&"center",justifyContent:"space-between",p:"22px 18px",gridGap:"24px",cursor:"pointer",background:backgroundColor2,border:"4px solid",borderColor:isSelected?selectedColor:"transparent",borderRadius:"8px"},__jsx(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_7__.xu,{display:"flex",flexDirection:"column",width:"100%",gridGap:"12px",minWidth:{base:"none",md:"auto"},height:"fit-content",fontWeight:"400"},!(null!=item&&item.isFreeTier)&&__jsx(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_7__.xu,{fontSize:"18px",fontWeight:"700"},null==item?void 0:item.title),__jsx(_Text__WEBPACK_IMPORTED_MODULE_4__.Z,{size:"md",fontWeight:"500",mb:"6px",dangerouslySetInnerHTML:{__html:null==item?void 0:item.description}})),__jsx(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_7__.xu,{textAlign:"right",display:"flex",minWidth:"FINANCING"!==item.period&&"auto",justifyContent:"center",flexDirection:"column",gridGap:"10px"},__jsx(_Heading__WEBPACK_IMPORTED_MODULE_3__.Z,{as:"span",size:{base:"var(--heading-m)",md:"clamp(0.875rem, 0.3rem + 1.8vw, 2rem)"},width:"FINANCING"===item.period&&"max-content",lineHeight:"1",textTransform:"uppercase",color:isCouponAvailable?hexColor.green:"blue.default"},(null==item?void 0:item.priceText)||(null==item?void 0:item.price)),(null==item?void 0:item.lastPrice)&&__jsx(_Text__WEBPACK_IMPORTED_MODULE_4__.Z,{lineHeight:"21px",fontSize:"21px",fontWeight:"500",color:"#A9A9A9"},__jsx("s",null,null==item?void 0:item.lastPrice))))}function ShowPrices(_ref2){var _data$pricing,data=_ref2.data,title=_ref2.title,secondSectionTitle=_ref2.secondSectionTitle,notReady=_ref2.notReady,list=_ref2.list,finance=_ref2.finance,onSelect=_ref2.onSelect,defaultIndex=_ref2.defaultIndex,defaultFinanceIndex=_ref2.defaultFinanceIndex,externalSelection=_ref2.externalSelection,outOfConsumables=_ref2.outOfConsumables,handleUpgrade=_ref2.handleUpgrade,isTotallyFree=_ref2.isTotallyFree,_useState=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(""),selectedId=_useState[0],setSelectedId=_useState[1],_useState2=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(defaultFinanceIndex),selectedFinanceIndex=_useState2[0],setSelectedFinanceIndex=_useState2[1],t=(0,next_translate_useTranslation__WEBPACK_IMPORTED_MODULE_2__.Z)("profile").t,_useStyle2=(0,_hooks_useStyle__WEBPACK_IMPORTED_MODULE_6__.Z)(),hexColor=_useStyle2.hexColor,fontColor=_useStyle2.fontColor,disabledColor=_useStyle2.disabledColor,featuredColor=_useStyle2.featuredColor,router=(0,next_router__WEBPACK_IMPORTED_MODULE_1__.useRouter)(),_useSignup=(0,_store_actions_signupAction__WEBPACK_IMPORTED_MODULE_5__.Z)(),getPriceWithDiscount=_useSignup.getPriceWithDiscount,state=_useSignup.state,applyDiscountCouponsToPlans=_useSignup.applyDiscountCouponsToPlans,selfAppliedCoupon=state.selfAppliedCoupon,tiersTypes={subscriptions:applyDiscountCouponsToPlans(list,selfAppliedCoupon)||(null==data?void 0:data.pricing.list)||[],finance:applyDiscountCouponsToPlans(finance,selfAppliedCoupon)||(null==data?void 0:data.pricing.finance)||[]},allTiers=[].concat((0,_home_runner_work_app_app_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_8__.Z)(tiersTypes.subscriptions),(0,_home_runner_work_app_app_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_8__.Z)(tiersTypes.finance)),financeSelected={0:tiersTypes.subscriptions.filter((function(l){return l.show&&!l.isFreeTier})),1:tiersTypes.finance.filter((function(l){return l.show&&!l.isFreeTier}))},freeTiers=allTiers.filter((function(l){return l.show&&l.isFreeTier})),dataList=(null==financeSelected?void 0:financeSelected[selectedFinanceIndex])||[],selectedItem=selectedId&&allTiers.find((function(item){return item.plan_id===selectedId})),handleSelect=function handleSelect(item){setSelectedId(item.plan_id),onSelect&&onSelect(item)};(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){1===dataList.length&&handleSelect(dataList[0])}),[]);var handleSelectFinance=function handleSelectFinance(index){setSelectedFinanceIndex(index);var item=financeSelected[index][0];item&&setSelectedId(item.plan_id),onSelect(financeSelected[index][defaultIndex||0])},getTabColor=function getTabColor(index){var tabIsAvailable=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return selectedFinanceIndex===index?{borderBottom:"4px solid",borderColor:selfAppliedCoupon?"white":"blue.default",color:selfAppliedCoupon?"white":"blue.default",cursor:"pointer",fontWeight:"700"}:{borderBottom:"4px solid",borderColor:"gray.400",color:tabIsAvailable?fontColor:disabledColor,cursor:tabIsAvailable?"pointer":"not-allowed",fontWeight:"400"}},paymentTabStyle=getTabColor(0,(null==list?void 0:list.length)>0),financeTabStyle=getTabColor(1,(null==finance?void 0:finance.length)>0),existMoreThanOne=dataList.length>1,isOnlyOneItem=1===[].concat((0,_home_runner_work_app_app_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_8__.Z)(finance),(0,_home_runner_work_app_app_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_8__.Z)(list)).length;(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){var tabSelected=null==financeSelected?void 0:financeSelected[null==externalSelection?void 0:externalSelection.selectedFinanceIndex],elementFound=(null==tabSelected?void 0:tabSelected[null==externalSelection?void 0:externalSelection.selectedIndex])||(null==tabSelected?void 0:tabSelected[0]);(null==externalSelection?void 0:externalSelection.selectedIndex)>=0&&(null==externalSelection?void 0:externalSelection.selectedFinanceIndex)>=0&&(null==tabSelected?void 0:tabSelected.length)>0&&(handleSelectFinance(externalSelection.selectedFinanceIndex),handleSelect(elementFound))}),[externalSelection]);var discountOperation=getPriceWithDiscount(0,selfAppliedCoupon);return __jsx(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,__jsx(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_7__.xu,{position:"relative",borderRadius:"12px",padding:"16px",background:selfAppliedCoupon?hexColor.green:featuredColor,display:"flex",flex:.5,flexDirection:"column",gridGap:"20px"},selfAppliedCoupon&&__jsx(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_7__.xu,{position:"absolute",right:"20px",top:"-20px"},__jsx(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_7__.xu,{borderRadius:"55px",background:hexColor.greenLight2,padding:"2px 8px",position:"relative"},__jsx(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_7__.xu,{top:"-9px",left:"-37px",display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",textAlign:"center",width:"44px",height:"44px",fontSize:"24px",position:"absolute",borderRadius:"41px",padding:"10px",border:"2px solid",borderColor:hexColor.greenLight2,background:hexColor.green},"ðŸ”¥"),__jsx(_Text__WEBPACK_IMPORTED_MODULE_4__.Z,{fontSize:"15px",color:hexColor.green},t("subscription.discount",{discount:null==discountOperation?void 0:discountOperation.discount})))),__jsx(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_7__.xu,{width:"100%",display:"flex",flexWrap:"wrap",gridGap:"5px 10px",justifyContent:{base:"center",sm:"space-between"},alignItems:"center",mb:"6px"},__jsx(_Heading__WEBPACK_IMPORTED_MODULE_3__.Z,{color:selfAppliedCoupon&&"white",as:"h2",size:"sm"},title||(null==data?void 0:data.pricing["choose-plan"])),!isTotallyFree&&financeSelected[1]&&!isOnlyOneItem&&__jsx(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_7__.xu,{display:"flex"},__jsx(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_7__.xu,(0,_home_runner_work_app_app_node_modules_babel_runtime_helpers_esm_extends_js__WEBPACK_IMPORTED_MODULE_9__.Z)({p:{base:"10px 7px",md:"15px 10px",lg:"15px 10px"},onClick:function onClick(){(null==list?void 0:list.length)>0&&handleSelectFinance(0)}},paymentTabStyle),(null==finance?void 0:finance.length)>0?t("subscription.upgrade-modal.one_payment"):t("subscription.upgrade-modal.subscription")),__jsx(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_7__.xu,(0,_home_runner_work_app_app_node_modules_babel_runtime_helpers_esm_extends_js__WEBPACK_IMPORTED_MODULE_9__.Z)({display:(null==finance?void 0:finance.length)>0?"block":"none",p:{base:"10px 7px",md:"15px 10px",lg:"15px 10px"},disabled:(null==finance?void 0:finance.length)>0,onClick:function onClick(){(null==finance?void 0:finance.length)>0&&handleSelectFinance(1)}},financeTabStyle),secondSectionTitle||(null==data?void 0:data.pricing["finance-text"])))),(null==dataList?void 0:dataList.length)>0&&dataList.map((function(item){return __jsx(PlanCard,{key:null==item?void 0:item.plan_id,isCouponAvailable:!!selfAppliedCoupon,item,handleSelect,selectedId})}))),__jsx(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_7__.xu,{mt:"20px",display:"flex",flex:.5,flexDirection:"column",gridGap:"20px"},existMoreThanOne&&(null==freeTiers?void 0:freeTiers.length)>0&&__jsx(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_7__.xu,{display:"flex",alignItems:"center"},__jsx(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_7__.xu,{as:"hr",color:"gray.500",width:"100%"}),__jsx(_Text__WEBPACK_IMPORTED_MODULE_4__.Z,{size:"md",textAlign:"center",width:"100%",margin:"0"},notReady||(null==data||null===(_data$pricing=data.pricing)||void 0===_data$pricing?void 0:_data$pricing["not-ready"])),__jsx(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_7__.xu,{as:"hr",color:"gray.500",width:"100%"})),(null==freeTiers?void 0:freeTiers.length)>0&&__jsx(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_7__.xu,{borderRadius:"12px",padding:"16px",background:featuredColor},freeTiers.map((function(item){return __jsx(PlanCard,{key:null==item?void 0:item.plan_id,item,handleSelect,selectedId})}))),__jsx(_Text__WEBPACK_IMPORTED_MODULE_4__.Z,{size:"12px",fontWeight:400,color:hexColor.fontColor3,lineHeight:"normal"},t("common:money-back-guarantee")),__jsx(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_7__.xu,{mt:"38px"},__jsx(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_10__.z,{display:outOfConsumables&&"none",variant:"default",isDisabled:!selectedId,onClick:function onClick(){var _selectedItem$type;!1===handleUpgrade?router.push("/checkout?syllabus=coding-introduction&plan=".concat(null!=selectedItem&&null!==(_selectedItem$type=selectedItem.type)&&void 0!==_selectedItem$type&&null!==(_selectedItem$type=_selectedItem$type.toLowerCase())&&void 0!==_selectedItem$type&&_selectedItem$type.includes("trial")?"coding-introduction-free-trial":"coding-introduction-financing-options-one-payment")):handleUpgrade(selectedItem)}},t("common:enroll")))))}PlanCard.displayName="PlanCard",ShowPrices.propTypes={data:prop_types__WEBPACK_IMPORTED_MODULE_11___default().objectOf(prop_types__WEBPACK_IMPORTED_MODULE_11___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_11___default().any])),title:prop_types__WEBPACK_IMPORTED_MODULE_11___default().string,secondSectionTitle:prop_types__WEBPACK_IMPORTED_MODULE_11___default().string,notReady:prop_types__WEBPACK_IMPORTED_MODULE_11___default().string,list:prop_types__WEBPACK_IMPORTED_MODULE_11___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_11___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_11___default().any])),finance:prop_types__WEBPACK_IMPORTED_MODULE_11___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_11___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_11___default().any])),onSelect:prop_types__WEBPACK_IMPORTED_MODULE_11___default().func,defaultIndex:prop_types__WEBPACK_IMPORTED_MODULE_11___default().number,defaultFinanceIndex:prop_types__WEBPACK_IMPORTED_MODULE_11___default().number,outOfConsumables:prop_types__WEBPACK_IMPORTED_MODULE_11___default().bool,handleUpgrade:prop_types__WEBPACK_IMPORTED_MODULE_11___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_11___default().func,prop_types__WEBPACK_IMPORTED_MODULE_11___default().bool]),isTotallyFree:prop_types__WEBPACK_IMPORTED_MODULE_11___default().bool,externalSelection:prop_types__WEBPACK_IMPORTED_MODULE_11___default().objectOf(prop_types__WEBPACK_IMPORTED_MODULE_11___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_11___default().any]))},ShowPrices.defaultProps={data:null,title:null,secondSectionTitle:null,notReady:null,list:null,finance:null,onSelect:function onSelect(){},defaultIndex:null,defaultFinanceIndex:0,outOfConsumables:!1,handleUpgrade:!1,isTotallyFree:!1,externalSelection:{}},ShowPrices.__docgenInfo={description:"",methods:[],displayName:"ShowPrices",props:{data:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"objectOf",value:{name:"union",value:[{name:"any"}]}},required:!1},title:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"string"},required:!1},secondSectionTitle:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"string"},required:!1},notReady:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"string"},required:!1},list:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"arrayOf",value:{name:"union",value:[{name:"any"}]}},required:!1},finance:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"arrayOf",value:{name:"union",value:[{name:"any"}]}},required:!1},onSelect:{defaultValue:{value:"() => { }",computed:!1},description:"",type:{name:"func"},required:!1},defaultIndex:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"number"},required:!1},defaultFinanceIndex:{defaultValue:{value:"0",computed:!1},description:"",type:{name:"number"},required:!1},outOfConsumables:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},handleUpgrade:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"union",value:[{name:"func"},{name:"bool"}]},required:!1},isTotallyFree:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},externalSelection:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"objectOf",value:{name:"union",value:[{name:"any"}]}},required:!1}}};const __WEBPACK_DEFAULT_EXPORT__=ShowPrices},"./src/common/hooks/useSession.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>hooks_useSession});var react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),asyncToGenerator=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),regenerator=__webpack_require__("./node_modules/@babel/runtime/regenerator/index.js"),regenerator_default=__webpack_require__.n(regenerator),next_router=__webpack_require__("./node_modules/next/router.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),utils=__webpack_require__("./src/utils/index.js"),axios=__webpack_require__("./node_modules/axios/lib/axios.js"),console=__webpack_require__("./node_modules/console-browserify/index.js");const hooks_useGoogleMaps=function useGoogleMaps(apiKey){var libraries=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"places",_useState=(0,react.useState)({loaded:!1,error:!1}),gmapStatus=_useState[0],setGmapStatus=_useState[1];(0,react.useEffect)((function(){if(window.google)setGmapStatus({loaded:!0,error:!1});else{var script=document.createElement("script");script.type="text/javascript",script.src="https://maps.google.com/maps/api/js?key=".concat(apiKey,"&libraries=").concat(libraries);var headScript=document.getElementsByTagName("script")[0];headScript.parentNode.insertBefore(script,headScript),script.addEventListener("load",(function(){setGmapStatus({loaded:!0,error:!1})})),script.addEventListener("error",(function(){setGmapStatus({loaded:!0,error:!0})}))}}),[apiKey,libraries]);var geocode=function geocode(request){if(utils.FJ&&gmapStatus.loaded){var google=window.google,geocoder=new google.maps.Geocoder;return new Promise((function(resolve,reject){geocoder.geocode(request,(function(result,geocodeStatus){geocodeStatus===google.maps.GeocoderStatus.OK?resolve(result):reject(result)}))}))}return null},geolocate=function(){var _ref=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee(key){var result;return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!gmapStatus.loaded||!key){_context.next=11;break}return _context.prev=1,_context.next=4,axios.Z.post("https://www.googleapis.com/geolocation/v1/geolocate?key=".concat(key));case 4:return result=_context.sent,_context.abrupt("return",result);case 8:_context.prev=8,_context.t0=_context.catch(1),console.error(_context.t0);case 11:return _context.abrupt("return",null);case 12:case"end":return _context.stop()}}),_callee,null,[[1,8]])})));return function geolocate(_x){return _ref.apply(this,arguments)}}(),getUserLocation=function(){var _ref2=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee2(){var setCoords,userLocation,_yield$geolocate,data,loc,_args2=arguments;return regenerator_default().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(setCoords=_args2.length>0&&void 0!==_args2[0]?_args2[0]:function(){},userLocation=localStorage.getItem("user-location"),!gmapStatus.loaded||!apiKey||userLocation){_context2.next=15;break}return _context2.next=5,geolocate(apiKey);case 5:return _yield$geolocate=_context2.sent,data=_yield$geolocate.data,loc={},data&&(setCoords({latitude:data.location.lat,longitude:data.location.lng}),loc.coordinates={latitude:data.location.lat,longitude:data.location.lng}),_context2.next=11,geocode({location:data.location});case 11:return _context2.sent[0].address_components.forEach((function(comp){comp.types.includes("locality")&&(loc.city=comp.long_name),comp.types.includes("country")&&(loc.country=comp.long_name,loc.countryShort=comp.short_name)})),localStorage.setItem("user-location",JSON.stringify(loc)),_context2.abrupt("return",loc);case 15:if(!userLocation){_context2.next=17;break}return _context2.abrupt("return",JSON.parse(userLocation));case 17:return _context2.abrupt("return",null);case 18:case"end":return _context2.stop()}}),_callee2)})));return function getUserLocation(){return _ref2.apply(this,arguments)}}();return{gmapStatus,geocode,geolocate,getUserLocation}};var logging=__webpack_require__("./src/utils/logging.js"),process=__webpack_require__("./node_modules/process/browser.js"),__jsx=react.createElement;function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){(0,defineProperty.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var initialUserSession={utm_placement:"",utm_medium:"",utm_source:"",utm_term:"",utm_content:"",utm_campaign:"",conversion_url:"",landing_url:"",user_agent:"",internal_cta_placement:"",internal_cta_content:"",internal_cta_campaign:""},SessionContext=(0,react.createContext)({userSession:initialUserSession,location:null});function SessionProvider(_ref){var children=_ref.children,_useState=(0,react.useState)(initialUserSession),userSession=_useState[0],_setUserSession=_useState[1],router=(0,next_router.useRouter)(),_useState2=(0,react.useState)(null),location=_useState2[0],setLocation=_useState2[1],GOOGLE_KEY=process.env.GOOGLE_GEO_KEY,_useGoogleMaps=hooks_useGoogleMaps(GOOGLE_KEY,"places"),gmapStatus=_useGoogleMaps.gmapStatus,getUserLocation=_useGoogleMaps.getUserLocation,initLocation=function(){var _ref2=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee(){var loc;return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,getUserLocation();case 3:loc=_context.sent,setLocation(loc),_context.next=10;break;case 7:_context.prev=7,_context.t0=_context.catch(0),(0,logging.vU)("function getUserLocation()",_context.t0);case 10:case"end":return _context.stop()}}),_callee,null,[[0,7]])})));return function initLocation(){return _ref2.apply(this,arguments)}}();(0,react.useEffect)((function(){initLocation()}),[gmapStatus]);return(0,react.useEffect)((function(){!function handleUserSession(){if(utils.FJ){var conversionUrl,storedSession=JSON.parse(localStorage.getItem("userSession")),userAgent=window.navigator.userAgent,landingUrl=null!=storedSession&&storedSession.landing_url&&""!==(null==storedSession?void 0:storedSession.landing_url)?null==storedSession?void 0:storedSession.landing_url:window.location.pathname;conversionUrl=["/checkout","/pricing"].some((function(path){return window.location.pathname.includes(path)}))?null==storedSession?void 0:storedSession.conversion_url:window.location.pathname;var utm_placement=(0,utils.Wz)("utm_placement")||(null==storedSession?void 0:storedSession.utm_placement),utm_medium=(0,utils.Wz)("utm_medium")||(null==storedSession?void 0:storedSession.utm_medium),utm_source=(0,utils.Wz)("utm_source")||(null==storedSession?void 0:storedSession.utm_source),utm_term=(0,utils.Wz)("utm_term")||(null==storedSession?void 0:storedSession.utm_term),utm_content=(0,utils.Wz)("utm_content")||(null==storedSession?void 0:storedSession.utm_content),utm_campaign=(0,utils.Wz)("utm_campaign")||(null==storedSession?void 0:storedSession.utm_campaign),internal_cta_placement=(0,utils.Wz)("internal_cta_placement")||(null==storedSession?void 0:storedSession.internal_cta_placement),internal_cta_content=(0,utils.Wz)("internal_cta_content")||(null==storedSession?void 0:storedSession.internal_cta_content),internal_cta_campaign=(0,utils.Wz)("internal_cta_campaign")||(null==storedSession?void 0:storedSession.internal_cta_campaign),cleanedStore=_objectSpread(_objectSpread({},storedSession),{},{translations:void 0}),session=_objectSpread(_objectSpread({},cleanedStore),{},{user_agent:userAgent,landing_url:landingUrl,conversion_url:conversionUrl,utm_placement,utm_medium,utm_source,utm_term,utm_content,utm_campaign,internal_cta_placement,internal_cta_content,internal_cta_campaign});_setUserSession(session),localStorage.setItem("userSession",JSON.stringify(session))}}()}),[router]),__jsx(SessionContext.Provider,{value:{userSession,setUserSession:function setUserSession(session){localStorage.setItem("userSession",JSON.stringify(session)),_setUserSession(_objectSpread(_objectSpread({},userSession),session))},location,setConversionUrl:function setConversionUrl(){if(utils.FJ){if(["/checkout","/pricing"].some((function(path){return window.location.pathname.includes(path)})))return;var session=_objectSpread(_objectSpread({},userSession),{},{conversion_url:window.location.pathname});_setUserSession(session),localStorage.setItem("userSession",JSON.stringify(session))}}}},children)}SessionProvider.displayName="SessionProvider",SessionProvider.propTypes={children:prop_types_default().node},SessionProvider.defaultProps={children:null},SessionProvider.__docgenInfo={description:"",methods:[],displayName:"SessionProvider",props:{children:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"node"},required:!1}}};const hooks_useSession=function useSession(){return(0,react.useContext)(SessionContext)}},"./src/common/store/actions/signupAction.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>signupAction});var objectWithoutProperties=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),asyncToGenerator=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),regenerator=__webpack_require__("./node_modules/@babel/runtime/regenerator/index.js"),regenerator_default=__webpack_require__.n(regenerator),es=__webpack_require__("./node_modules/react-redux/es/index.js"),chunk_ENIANY67=__webpack_require__("./node_modules/@chakra-ui/toast/dist/chunk-ENIANY67.mjs"),useTranslation=__webpack_require__("./node_modules/next-translate/lib/esm/useTranslation.js"),next_router=__webpack_require__("./node_modules/next/router.js"),types=__webpack_require__("./src/common/store/types/index.js"),utils=__webpack_require__("./src/utils/index.js"),breathecode=__webpack_require__("./src/common/services/breathecode.js"),variables=__webpack_require__("./src/utils/variables.js"),usePersistent=__webpack_require__("./src/common/hooks/usePersistent.js"),useSession=__webpack_require__("./src/common/hooks/useSession.js"),useAuth=__webpack_require__("./src/common/hooks/useAuth.js"),utils_requests=__webpack_require__("./src/utils/requests.js"),toConsumableArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),console=__webpack_require__("./node_modules/console-browserify/index.js");function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){(0,defineProperty.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var processPlans=function processPlans(data){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_ref$monthly=_ref.monthly,monthly=void 0===_ref$monthly||_ref$monthly,_ref$quarterly=_ref.quarterly,quarterly=void 0===_ref$quarterly||_ref$quarterly,_ref$halfYearly=_ref.halfYearly,halfYearly=void 0===_ref$halfYearly||_ref$halfYearly,_ref$yearly=_ref.yearly,yearly=void 0===_ref$yearly||_ref$yearly,_ref$planType=_ref.planType,planType=void 0===_ref$planType?"":_ref$planType,translations=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(resolve,reject){var process=function(){var _ref2=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee(){var _data$financing_optio,_data$financing_optio2,_data$financing_optio3,_data$plans,_data$plans2,slug,resp,planPropsData,owner,existsAmountPerHalf,existsAmountPerMonth,existsAmountPerQuarter,existsAmountPerYear,hasPayaBleSuscription,financingOptionsExists,financingOptionsManyMonthsExists,financingOptionsOnePaymentExists,singlePlan,isTotallyFree,hasSubscriptionMethod,financingOptions,financingOptionsOnePayment,relevantInfo,textInfo,trialPlanDescription,onePaymentFinancing,trialPlan,monthPlan,quarterPlan,halfPlan,yearPlan,financingOption,planList,paymentList,financingList;return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,slug=encodeURIComponent(null==data?void 0:data.slug),_context.next=4,breathecode.Z.payment().getPlanProps(slug);case 4:if(resp=_context.sent){_context.next=7;break}throw new Error("The plan does not exist");case 7:planPropsData=null==resp?void 0:resp.data,owner=null==data?void 0:data.owner,existsAmountPerHalf=(null==data?void 0:data.price_per_half)>0,existsAmountPerMonth=(null==data?void 0:data.price_per_month)>0,existsAmountPerQuarter=(null==data?void 0:data.price_per_quarter)>0,existsAmountPerYear=(null==data?void 0:data.price_per_year)>0,hasPayaBleSuscription=existsAmountPerHalf||existsAmountPerMonth||existsAmountPerQuarter||existsAmountPerYear,financingOptionsExists=(null==data||null===(_data$financing_optio=data.financing_options)||void 0===_data$financing_optio?void 0:_data$financing_optio.length)>0,financingOptionsManyMonthsExists=financingOptionsExists&&(null==data||null===(_data$financing_optio2=data.financing_options)||void 0===_data$financing_optio2?void 0:_data$financing_optio2.some((function(l){return(null==l?void 0:l.monthly_price)>0&&(null==l?void 0:l.how_many_months)>1}))),financingOptionsOnePaymentExists=financingOptionsExists&&(null==data||null===(_data$financing_optio3=data.financing_options)||void 0===_data$financing_optio3?void 0:_data$financing_optio3.some((function(l){return(null==l?void 0:l.monthly_price)>0&&1===(null==l?void 0:l.how_many_months)}))),singlePlan=(null==data||null===(_data$plans=data.plans)||void 0===_data$plans?void 0:_data$plans.length)>0?null==data||null===(_data$plans2=data.plans)||void 0===_data$plans2?void 0:_data$plans2[0]:data,isTotallyFree=!hasPayaBleSuscription&&0===(null==singlePlan?void 0:singlePlan.trial_duration)&&!financingOptionsExists,hasSubscriptionMethod=hasPayaBleSuscription||isTotallyFree||(null==singlePlan?void 0:singlePlan.trial_duration_unit)>0,financingOptions=financingOptionsManyMonthsExists?null==data?void 0:data.financing_options.filter((function(l){return(null==l?void 0:l.monthly_price)>0&&(null==l?void 0:l.how_many_months)>1})).sort((function(a,b){return a.monthly_price-b.monthly_price})):[],financingOptionsOnePayment=financingOptionsOnePaymentExists?null==data?void 0:data.financing_options.filter((function(l){return(null==l?void 0:l.monthly_price)>0&&1===(null==l?void 0:l.how_many_months)})):[],relevantInfo={plan_slug:null==singlePlan?void 0:singlePlan.slug,currency:null==singlePlan?void 0:singlePlan.currency,featured_info:planPropsData||[],trial_duration:(null==singlePlan?void 0:singlePlan.trial_duration)||0,trial_duration_unit:(null==singlePlan?void 0:singlePlan.trial_duration_unit)||"",planType,show:!0,isFreeTier:!1,owner},textInfo={free:(null==translations?void 0:translations.free)||"Free",totally_free:(null==translations?void 0:translations.totally_free)||"Totally free",free_trial:(null==translations?void 0:translations.free_trial)||"Free trial",one_payment:(null==translations?void 0:translations.one_payment)||"One payment",monthly_payment:(null==translations?void 0:translations.monthly_payment)||"Monthly payment",quarterly_payment:(null==translations?void 0:translations.quarterly_payment)||"Quarterly payment",half_yearly_payment:(null==translations?void 0:translations.half_yearly_payment)||"Half yearly payment",yearly_payment:(null==translations?void 0:translations.yearly_payment)||"Yearly payment",many_months_payment:function many_months_payment(qty){return(null==translations?void 0:translations.many_months_payment(qty))||"Payment for ".concat(qty," months")},label:{free_trial_period:function free_trial_period(qty,period){var periodToLowerCase=null==period?void 0:period.toLowerCase();return(null==translations?void 0:translations.free_trial_period(qty,periodToLowerCase))||"Free trial for ".concat(qty," ").concat(periodToLowerCase)},free:(null==translations?void 0:translations.free)||"Free",monthly:(null==translations?void 0:translations.monthly)||"Monthly",quarterly:(null==translations?void 0:translations.quarterly)||"Quarterly",half_yearly:(null==translations?void 0:translations.half_yearly)||"Half yearly",yearly:(null==translations?void 0:translations.yearly)||"Yearly",financing:(null==translations?void 0:translations.financing)||"Financing"}},trialPlanDescription=isTotallyFree?textInfo.totally_free:textInfo.label.free_trial_period(null==singlePlan?void 0:singlePlan.trial_duration,null==singlePlan?void 0:singlePlan.trial_duration_unit),onePaymentFinancing=financingOptionsOnePaymentExists?financingOptionsOnePayment.map((function(item){return _objectSpread(_objectSpread({},relevantInfo),{},{title:textInfo.one_payment,price:null==item?void 0:item.monthly_price,priceText:"$".concat(null==item?void 0:item.monthly_price),period:"ONE_TIME",period_label:textInfo.one_payment,plan_id:"f-".concat(null==item?void 0:item.monthly_price,"-").concat(null==item?void 0:item.how_many_months),description:(null==translations?void 0:translations.one_payment_description)||"",how_many_months:null==item?void 0:item.how_many_months,type:"PAYMENT"})})):[{}],trialPlan=financingOptionsExists||hasPayaBleSuscription?{}:_objectSpread(_objectSpread({},relevantInfo),{},{title:null!=singlePlan&&singlePlan.title?null==singlePlan?void 0:singlePlan.title:(0,utils.I4)(String(null==singlePlan?void 0:singlePlan.slug)),price:0,priceText:isTotallyFree?textInfo.free:textInfo.free_trial,plan_id:"p-".concat(null==singlePlan?void 0:singlePlan.trial_duration,"-trial"),description:trialPlanDescription,period:isTotallyFree?"FREE":null==singlePlan?void 0:singlePlan.trial_duration_unit,period_label:trialPlanDescription,type:isTotallyFree?"FREE":"TRIAL",isFreeTier:!0}),monthPlan=monthly&&existsAmountPerMonth?_objectSpread(_objectSpread({},relevantInfo),{},{title:null!=singlePlan&&singlePlan.title?null==singlePlan?void 0:singlePlan.title:textInfo.monthly_payment,price:null==data?void 0:data.price_per_month,priceText:"$".concat(null==data?void 0:data.price_per_month),plan_id:"p-".concat(null==data?void 0:data.price_per_month),description:(null==translations?void 0:translations.yearly_payment_description)||"",period:"MONTH",period_label:textInfo.label.monthly,type:"PAYMENT"}):{},quarterPlan=quarterly&&existsAmountPerQuarter?_objectSpread(_objectSpread({},relevantInfo),{},{title:null!=singlePlan&&singlePlan.title?null==singlePlan?void 0:singlePlan.title:textInfo.quarterly_payment,price:null==data?void 0:data.price_per_quarter,priceText:"$".concat(null==data?void 0:data.price_per_quarter),plan_id:"p-".concat(null==data?void 0:data.price_per_quarter),description:(null==translations?void 0:translations.quarterly_payment_description)||"",period:"QUARTER",period_label:textInfo.label.quarterly,type:"PAYMENT",show:!1}):{},halfPlan=halfYearly&&existsAmountPerHalf?_objectSpread(_objectSpread({},relevantInfo),{},{title:null!=singlePlan&&singlePlan.title?null==singlePlan?void 0:singlePlan.title:textInfo.half_yearly_payment,price:null==data?void 0:data.price_per_half,priceText:"$".concat(null==data?void 0:data.price_per_half),plan_id:"p-".concat(null==data?void 0:data.price_per_half),description:(null==translations?void 0:translations.half_yearly_payment_description)||"",period:"HALF",period_label:textInfo.label.half_yearly,type:"PAYMENT",show:!1}):{},yearPlan=yearly&&existsAmountPerYear?_objectSpread(_objectSpread({},relevantInfo),{},{title:null!=singlePlan&&singlePlan.title?null==singlePlan?void 0:singlePlan.title:textInfo.yearly_payment,price:null==data?void 0:data.price_per_year,priceText:"$".concat(null==data?void 0:data.price_per_year),plan_id:"p-".concat(null==data?void 0:data.price_per_year),description:(null==translations?void 0:translations.yearly_payment_description)||"",period:"YEAR",period_label:textInfo.label.yearly,type:"PAYMENT"}):{},financingOption=financingOptionsExists?financingOptions.map((function(item,index){var financingTitle=translations.many_months_payment(null==item?void 0:item.how_many_months),financingOptionsDescription=null==translations?void 0:translations.financing_description(null==item?void 0:item.monthly_price,null==item?void 0:item.how_many_months);return _objectSpread(_objectSpread({},relevantInfo),{},{financingId:index+1,title:null!=singlePlan&&singlePlan.title?null==singlePlan?void 0:singlePlan.title:financingTitle,price:null==item?void 0:item.monthly_price,priceText:"$".concat(null==item?void 0:item.monthly_price," x ").concat(null==item?void 0:item.how_many_months),plan_id:"f-".concat(null==item?void 0:item.monthly_price,"-").concat(null==item?void 0:item.how_many_months),description:financingOptionsDescription||"",period:"FINANCING",period_label:textInfo.label.financing,how_many_months:null==item?void 0:item.how_many_months,type:"PAYMENT"})})):[{}],planList=[trialPlan,onePaymentFinancing[0],monthPlan,quarterPlan,halfPlan,yearPlan].concat((0,toConsumableArray.Z)(financingOption)).filter((function(plan){return Object.keys(plan).length>0&&plan.show})),paymentList=[onePaymentFinancing[0],monthPlan,yearPlan,trialPlan].filter((function(plan){return Object.keys(plan).length>0})),financingList=null==financingOption?void 0:financingOption.filter((function(plan){return Object.keys(plan).length>0})),resolve(_objectSpread(_objectSpread({},data),{},{title:(null==data?void 0:data.title)||(0,utils.rV)(null==data?void 0:data.slug),isTotallyFree,isTrial:!hasPayaBleSuscription&&!financingOptionsExists,plans:planList,featured_info:planPropsData||[],paymentOptions:paymentList,financingOptions:financingList,hasSubscriptionMethod})),_context.next=42;break;case 38:_context.prev=38,_context.t0=_context.catch(0),console.error("Error processing plans:",_context.t0),reject(_context.t0);case 42:case"end":return _context.stop()}}),_callee,null,[[0,38]])})));return function process(){return _ref2.apply(this,arguments)}}();process()}))},generatePlan=function(){var _ref3=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee2(planSlug,translationsObj){var resp,data;return regenerator_default().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.prev=0,_context2.next=3,breathecode.Z.payment().getPlan(planSlug);case 3:return resp=_context2.sent,_context2.next=6,processPlans(null==resp?void 0:resp.data,{},translationsObj);case 6:return data=_context2.sent,_context2.abrupt("return",data);case 10:return _context2.prev=10,_context2.t0=_context2.catch(0),console.error("Error generating plan:",_context2.t0),_context2.abrupt("return",{});case 14:case"end":return _context2.stop()}}),_callee2,null,[[0,10]])})));return function generatePlan(_x,_x2){return _ref3.apply(this,arguments)}}(),signupAction_console=__webpack_require__("./node_modules/console-browserify/index.js"),_excluded=["service_items"];function signupAction_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function signupAction_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?signupAction_ownKeys(Object(t),!0).forEach((function(r){(0,defineProperty.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):signupAction_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}const signupAction=function useSignup(){var isAuthenticated=(0,useAuth.Z)().isAuthenticated,userSession=(0,useSession.Z)().userSession,state=(0,es.v9)((function(sl){return sl.signupReducer})),_usePersistent=(0,usePersistent.K)("subscription-process",null),setSubscriptionProcess=(0,slicedToArray.Z)(_usePersistent,2)[1],t=(0,useTranslation.Z)("signup").t,toast=(0,chunk_ENIANY67.p)(),router=(0,next_router.useRouter)(),locale=router.locale,dispatch=(0,es.I0)(),accessToken=(0,utils.qn)("accessToken"),redirect=(0,utils.qn)("redirect"),redirectedFrom=(0,utils.qn)("redirected-from"),couponsQuery=(0,utils.Wz)("coupons"),planTranslationsObj=function getTranslations(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return{one_payment:t("signup:one_payment"),free_trial:t("signup:free_trial"),monthly_payment:t("signup:monthly_payment"),quarterly_payment:t("signup:quarterly_payment"),half_yearly_payment:t("signup:half_yearly_payment"),yearly_payment:t("signup:yearly_payment"),free:t("signup:free"),totally_free:t("signup:totally_free"),free_trial_period:function free_trial_period(qty,period){var periodValue=null==period?void 0:period.toLowerCase(),singularTranslation={day:t("common:word-connector.day"),week:t("common:word-connector.week"),month:t("common:word-connector.month"),year:t("common:word-connector.year")},pluralTranslation={day:t("common:word-connector.days"),week:t("common:word-connector.weeks"),month:t("common:word-connector.months"),year:t("common:word-connector.years")};return t("signup:info.free-trial-period",{qty,period:qty>1?pluralTranslation[periodValue]:singularTranslation[periodValue]})},one_payment_description:t("signup:one_payment_description"),monthly_payment_description:t("signup:monthly_payment_description"),quarterly_payment_description:t("signup:quarterly_payment_description"),half_yearly_payment_description:t("signup:half_yearly_payment_description"),yearly_payment_description:t("signup:yearly_payment_description"),financing_description:function financing_description(price,months){return t("signup:financing_many_months_description",{monthly_price:price,many_months:months})},monthly:t("signup:info.monthly"),quarterly:t("signup:info.quarterly"),half_yearly:t("signup:info.half-yearly"),yearly:t("signup:info.yearly"),financing:t("signup:info.financing"),many_months_payment:function many_months_payment(qty){return t("signup:many_months_payment",{qty})}}}(t),_router$query=router.query,syllabus=_router$query.syllabus,academy=_router$query.academy,nextMonthText=(0,utils.n4)(1).translation[locale],stepIndex=state.stepIndex,checkoutData=state.checkoutData,dateProps=state.dateProps,cohortPlans=state.cohortPlans,selectedPlanCheckoutData=state.selectedPlanCheckoutData,isFirstStep=0===stepIndex,isSecondStep=1===stepIndex,isThirdStep=2===stepIndex,isFourthStep=3===stepIndex,handleStep=function handleStep(step){return dispatch({type:types.Aq,payload:step})},setDateProps=function setDateProps(payload){return dispatch({type:types.AU,payload})},setCheckoutData=function setCheckoutData(payload){return dispatch({type:types.w6,payload})},setLoader=function setLoader(payload,value){return dispatch({type:types.c0,payload,value})},setPaymentMethods=function setPaymentMethods(payload){return dispatch({type:types.a5,payload})},setPlanProps=function setPlanProps(payload){return dispatch({type:types.OZ,payload})},toggleIfEnrolled=function toggleIfEnrolled(payload){return dispatch({type:types.M1,payload})},setSelfAppliedCoupon=function setSelfAppliedCoupon(payload){return dispatch({type:types.vc,payload})},getPaymentMethods=function(){var _ref3=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee3(ownerId){var resp;return regenerator_default().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(_context3.prev=0,!isAuthenticated){_context3.next=9;break}return setLoader("paymentMethods",!1),setLoader("paymentMethods",!0),_context3.next=6,breathecode.Z.payment({academy_id:ownerId,lang:router.locale}).getpaymentMethods();case 6:(resp=_context3.sent).status<400&&setPaymentMethods(resp.data),setLoader("paymentMethods",!1);case 9:_context3.next=15;break;case 11:_context3.prev=11,_context3.t0=_context3.catch(0),signupAction_console.log(_context3.t0),setLoader("paymentMethods",!1);case 15:case"end":return _context3.stop()}}),_callee3,null,[[0,11]])})));return function getPaymentMethods(_x3){return _ref3.apply(this,arguments)}}(),getPriceWithDiscount=function getPriceWithDiscount(price,couponData){var discount=null==couponData?void 0:couponData.discount_value,discountType=null==couponData?void 0:couponData.discount_type;if(discount){if("PERCENT_OFF"===discountType||"HAGGLING"===discountType)return{originalPrice:price,price:Math.round(100*(price-price*discount+Number.EPSILON))/100,discount:"".concat(100*discount,"%"),discountType};if("FIXED_PRICE"===discountType)return{originalPrice:price,price:price-discount,discount:"$".concat(discount),discountType}}return{price,discount:"0%"}},getSelfAppliedCoupon=function(){var _ref4=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee4(plan){var _yield$bc$payment$ver,data,coupon;return regenerator_default().wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(_context4.prev=0,!plan){_context4.next=8;break}return _context4.next=4,breathecode.Z.payment({plan}).verifyCoupon();case 4:_yield$bc$payment$ver=_context4.sent,data=_yield$bc$payment$ver.data,(coupon=data[0])&&setSelfAppliedCoupon(signupAction_objectSpread(signupAction_objectSpread({},coupon),{},{plan}));case 8:_context4.next=13;break;case 10:_context4.prev=10,_context4.t0=_context4.catch(0),signupAction_console.log(_context4.t0);case 13:case"end":return _context4.stop()}}),_callee4,null,[[0,10]])})));return function getSelfAppliedCoupon(_x4){return _ref4.apply(this,arguments)}}();return{state,isFirstStep,isSecondStep,isThirdStep,isFourthStep,toggleIfEnrolled,nextStep:function nextStep(){return dispatch({type:types.By})},prevStep:function prevStep(){return dispatch({type:types.bD})},setLoader,handleStep,setDateProps,setCheckoutData,setPaymentMethods,setPaymentStatus:function setPaymentStatus(payload){return dispatch({type:types.f2,payload})},setIsSubmittingCard:function setIsSubmittingCard(payload){return dispatch({type:types.$R,payload})},setIsSubmittingPayment:function setIsSubmittingPayment(payload){return dispatch({type:types.uB,payload})},setPaymentInfo:function setPaymentInfo(payload,value){return dispatch({type:types.gH,payload,value})},setSelfAppliedCoupon,handlePayment:function handlePayment(data){var disableRedirects=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((function(resolve,reject){var manyInstallmentsExists=(null==selectedPlanCheckoutData?void 0:selectedPlanCheckoutData.how_many_months)>0||"FINANCING"===(null==selectedPlanCheckoutData?void 0:selectedPlanCheckoutData.period),isTtrial=["FREE","TRIAL"].includes(null==selectedPlanCheckoutData?void 0:selectedPlanCheckoutData.type),requests=function getRequests(){return isTtrial?{type:(null==data?void 0:data.type)||checkoutData.type,token:(null==data?void 0:data.token)||checkoutData.token}:{type:(null==data?void 0:data.type)||checkoutData.type,token:(null==data?void 0:data.token)||checkoutData.token,how_many_installments:(null==data?void 0:data.installments)||(null==selectedPlanCheckoutData?void 0:selectedPlanCheckoutData.how_many_months)||void 0,chosen_period:manyInstallmentsExists?void 0:(null==selectedPlanCheckoutData?void 0:selectedPlanCheckoutData.period)||"HALF",coupons:null==checkoutData?void 0:checkoutData.coupons}}();breathecode.Z.payment().pay(signupAction_objectSpread(signupAction_objectSpread({},requests),{},{conversion_info:signupAction_objectSpread({},userSession)})).then(function(){var _ref=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee(response){var transactionData,_dateProps$plan,currency,simplePlans,_cohortPlans$;return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,response.json();case 2:"FULFILLED"===(null==(transactionData=_context.sent)?void 0:transactionData.status)?(setSubscriptionProcess({status:types.pi,id:null==dateProps?void 0:dateProps.id,slug:null==dateProps?void 0:dateProps.slug,plan_slug:null==dateProps||null===(_dateProps$plan=dateProps.plan)||void 0===_dateProps$plan?void 0:_dateProps$plan.slug,academy_info:null==dateProps?void 0:dateProps.academy}),currency="USD",simplePlans=[],cohortPlans&&(currency=(null===(_cohortPlans$=cohortPlans[0])||void 0===_cohortPlans$||null===(_cohortPlans$=_cohortPlans$.plan)||void 0===_cohortPlans$||null===(_cohortPlans$=_cohortPlans$.currency)||void 0===_cohortPlans$?void 0:_cohortPlans$.code)||"USD",simplePlans=cohortPlans.map((function(cohortPlan){var plan=cohortPlan.plan;plan.service_items;return{plan:signupAction_objectSpread({},(0,objectWithoutProperties.Z)(plan,_excluded))}}))),(0,utils_requests._1)({dataLayer:{event:"purchase",value:null==selectedPlanCheckoutData?void 0:selectedPlanCheckoutData.price,currency,payment_type:"Credit card",plan:null==selectedPlanCheckoutData?void 0:selectedPlanCheckoutData.plan_slug,period_label:null==selectedPlanCheckoutData?void 0:selectedPlanCheckoutData.period_label,items:simplePlans,agent:(0,utils.S7)()}}),disableRedirects||(redirect&&(null==redirect?void 0:redirect.length)>0||redirectedFrom&&redirectedFrom.length>0?(router.push(redirect||redirectedFrom),localStorage.removeItem("redirect"),localStorage.removeItem("redirected-from")):router.push("/choose-program")),(void 0===transactionData||transactionData.status>=400)&&toast({position:"top",title:t("alert-message:payment-error"),status:"error",duration:7e3,isClosable:!0}),resolve(transactionData)):resolve(transactionData);case 4:case"end":return _context.stop()}}),_callee)})));return function(_x){return _ref.apply(this,arguments)}}()).catch((function(error){signupAction_console.error("Error handling payment bc.payment().pay",error),reject(error)}))}))},setPlanData:function setPlanData(payload){return dispatch({type:types.tW,payload})},setSelectedPlanCheckoutData:function setSelectedPlanCheckoutData(payload){return dispatch({type:types.oK,payload})},handleChecking:function handleChecking(cohortData){return new Promise((function(resolve,reject){if(null!=cohortData&&cohortData.id){var _getTimeProps=(0,utils.qF)(cohortData),kickoffDate=_getTimeProps.kickoffDate,weekDays=_getTimeProps.weekDays,availableTime=_getTimeProps.availableTime;setDateProps(signupAction_objectSpread(signupAction_objectSpread({},cohortData),{},{kickoffDate,weekDays,availableTime}))}(function getChecking(cohortData){return new Promise((function(resolve,reject){var _cohortData$academy,_dateProps$academy,selectedPlan=null!=cohortData&&cohortData.plan?null==cohortData?void 0:cohortData.plan:void 0,cohortPlan=(null==cohortPlans?void 0:cohortPlans.length)>0?cohortPlans[(null==cohortData?void 0:cohortData.index)||0]:selectedPlan,checkingBody={type:"PREVIEW",cohort:(null==cohortData?void 0:cohortData.id)||(null==dateProps?void 0:dateProps.id),academy:(null==cohortData||null===(_cohortData$academy=cohortData.academy)||void 0===_cohortData$academy?void 0:_cohortData$academy.id)||(null==dateProps||null===(_dateProps$academy=dateProps.academy)||void 0===_dateProps$academy?void 0:_dateProps$academy.id)||Number(academy)||void 0,syllabus,plans:[(null==selectedPlan?void 0:selectedPlan.slug)||((null==cohortPlans?void 0:cohortPlans.length)>0?null==cohortPlan?void 0:cohortPlan.slug:void 0)],coupons:couponsQuery?[couponsQuery]:void 0};fetch("".concat(variables.k1,"/v1/payments/checking"),{method:"PUT",headers:new Headers({"content-type":"application/json",Authorization:"Token ".concat((null==cohortData?void 0:cohortData.token)||accessToken)}),body:JSON.stringify(checkingBody)}).then(function(){var _ref2=(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee2(response){var _data$plans,data,currentPlan,planSlug,finalData;return regenerator_default().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,response.json();case 2:return data=_context2.sent,currentPlan=null==data||null===(_data$plans=data.plans)||void 0===_data$plans?void 0:_data$plans[0],planSlug=encodeURIComponent(null==currentPlan?void 0:currentPlan.slug),_context2.next=7,generatePlan(planSlug,planTranslationsObj).then((function(respData){return respData}));case 7:finalData=_context2.sent,setPlanProps(null==finalData?void 0:finalData.featured_info),response.status<400&&(setCheckoutData(signupAction_objectSpread(signupAction_objectSpread(signupAction_objectSpread({},data),finalData),{},{id:data.id})),resolve(signupAction_objectSpread(signupAction_objectSpread(signupAction_objectSpread({},data),finalData),{},{id:data.id}))),response.status>=400&&reject(response);case 11:case"end":return _context2.stop()}}),_callee2)})));return function(_x2){return _ref2.apply(this,arguments)}}()).catch((function(error){reject(error)})).finally((function(){setLoader("date",!1)}))}))})(cohortData).then((function(data){resolve(data)})).catch((function(err){reject(err),400===(null==err?void 0:err.status)?(handleStep(1),toggleIfEnrolled(!0)):signupAction_console.err(err)}))}))},setPlanProps,setCohortPlans:function setCohortPlans(payload){return dispatch({type:types.qA,payload})},getPaymentText:function getPaymentText(){var planIsNotTrial="TRIAL"!==(null==selectedPlanCheckoutData?void 0:selectedPlanCheckoutData.type),period=null==selectedPlanCheckoutData?void 0:selectedPlanCheckoutData.period;if(planIsNotTrial){var _selectedPlanCheckout,_selectedPlanCheckout2,_selectedPlanCheckout3,_selectedPlanCheckout8,_selectedPlanCheckout9,_selectedPlanCheckout10,_selectedPlanCheckout15,_selectedPlanCheckout16,_selectedPlanCheckout17,_selectedPlanCheckout18;if("FINANCING"===period){var totalAmount=(null==selectedPlanCheckoutData?void 0:selectedPlanCheckoutData.price)*(null==selectedPlanCheckoutData?void 0:selectedPlanCheckoutData.how_many_months);return t("info.will-pay-month",{price:null==selectedPlanCheckoutData?void 0:selectedPlanCheckoutData.price,qty_months:null==selectedPlanCheckoutData?void 0:selectedPlanCheckoutData.how_many_months,total_amount:Math.round(100*totalAmount)/100})}if((null==selectedPlanCheckoutData||null===(_selectedPlanCheckout=selectedPlanCheckoutData.financing_options)||void 0===_selectedPlanCheckout?void 0:_selectedPlanCheckout.length)>0&&(null==selectedPlanCheckoutData||null===(_selectedPlanCheckout2=selectedPlanCheckoutData.financing_options[0])||void 0===_selectedPlanCheckout2?void 0:_selectedPlanCheckout2.monthly_price)>0&&1===(null==selectedPlanCheckoutData||null===(_selectedPlanCheckout3=selectedPlanCheckoutData.financing_options[0])||void 0===_selectedPlanCheckout3?void 0:_selectedPlanCheckout3.how_many_months)){var _selectedPlanCheckout4,_selectedPlanCheckout5,_selectedPlanCheckout6,_selectedPlanCheckout7,_totalAmount=(null==selectedPlanCheckoutData||null===(_selectedPlanCheckout4=selectedPlanCheckoutData.financing_options[0])||void 0===_selectedPlanCheckout4?void 0:_selectedPlanCheckout4.monthly_price)*(null==selectedPlanCheckoutData||null===(_selectedPlanCheckout5=selectedPlanCheckoutData.financing_options[0])||void 0===_selectedPlanCheckout5?void 0:_selectedPlanCheckout5.how_many_months);return t("info.will-pay-month",{price:null==selectedPlanCheckoutData||null===(_selectedPlanCheckout6=selectedPlanCheckoutData.financing_options[0])||void 0===_selectedPlanCheckout6?void 0:_selectedPlanCheckout6.monthly_price,qty_months:null==selectedPlanCheckoutData||null===(_selectedPlanCheckout7=selectedPlanCheckoutData.financing_options[0])||void 0===_selectedPlanCheckout7?void 0:_selectedPlanCheckout7.how_many_months,total_amount:Math.round(100*_totalAmount)/100})}if((null==selectedPlanCheckoutData||null===(_selectedPlanCheckout8=selectedPlanCheckoutData.financing_options)||void 0===_selectedPlanCheckout8?void 0:_selectedPlanCheckout8.length)>0&&(null==selectedPlanCheckoutData||null===(_selectedPlanCheckout9=selectedPlanCheckoutData.financing_options[0])||void 0===_selectedPlanCheckout9?void 0:_selectedPlanCheckout9.monthly_price)>0&&(null==selectedPlanCheckoutData||null===(_selectedPlanCheckout10=selectedPlanCheckoutData.financing_options[0])||void 0===_selectedPlanCheckout10?void 0:_selectedPlanCheckout10.how_many_months)>0){var _selectedPlanCheckout11,_selectedPlanCheckout12,_selectedPlanCheckout13,_selectedPlanCheckout14,_totalAmount2=(null==selectedPlanCheckoutData||null===(_selectedPlanCheckout11=selectedPlanCheckoutData.financing_options[0])||void 0===_selectedPlanCheckout11?void 0:_selectedPlanCheckout11.monthly_price)*(null==selectedPlanCheckoutData||null===(_selectedPlanCheckout12=selectedPlanCheckoutData.financing_options[0])||void 0===_selectedPlanCheckout12?void 0:_selectedPlanCheckout12.how_many_months);return t("info.will-pay-monthly",{price:null==selectedPlanCheckoutData||null===(_selectedPlanCheckout13=selectedPlanCheckoutData.financing_options[0])||void 0===_selectedPlanCheckout13?void 0:_selectedPlanCheckout13.monthly_price,qty_months:null==selectedPlanCheckoutData||null===(_selectedPlanCheckout14=selectedPlanCheckoutData.financing_options[0])||void 0===_selectedPlanCheckout14?void 0:_selectedPlanCheckout14.how_many_months,total_amount:Math.round(100*_totalAmount2)/100,next_month:nextMonthText})}if((null==selectedPlanCheckoutData||null===(_selectedPlanCheckout15=selectedPlanCheckoutData.financing_options)||void 0===_selectedPlanCheckout15?void 0:_selectedPlanCheckout15.length)>0&&(null==selectedPlanCheckoutData||null===(_selectedPlanCheckout16=selectedPlanCheckoutData.financing_options[0])||void 0===_selectedPlanCheckout16?void 0:_selectedPlanCheckout16.monthly_price)>0&&0===(null==selectedPlanCheckoutData||null===(_selectedPlanCheckout17=selectedPlanCheckoutData.financing_options[0])||void 0===_selectedPlanCheckout17?void 0:_selectedPlanCheckout17.how_many_months))return t("info.will-pay-now",{price:null==selectedPlanCheckoutData||null===(_selectedPlanCheckout18=selectedPlanCheckoutData.financing_options[0])||void 0===_selectedPlanCheckout18?void 0:_selectedPlanCheckout18.monthly_price});if("MONTH"===period)return t("info.will-pay-per-month",{price:null==selectedPlanCheckoutData?void 0:selectedPlanCheckoutData.price});if("QUARTER"===period)return t("info.will-pay-per-quarter",{price:null==selectedPlanCheckoutData?void 0:selectedPlanCheckoutData.price});if("HALF"===period)return t("info.will-pay-per-half-year",{price:null==selectedPlanCheckoutData?void 0:selectedPlanCheckoutData.price});if("YEAR"===period)return t("info.will-pay-per-year",{price:null==selectedPlanCheckoutData?void 0:selectedPlanCheckoutData.price});if("ONE_TIME"===period)return t("info.one-time-connector",{value:null==selectedPlanCheckoutData?void 0:selectedPlanCheckoutData.price})}return""},handleServiceToConsume:function handleServiceToConsume(data){for(var discountRatio=null==data?void 0:data.discount_ratio,bundleSize=null==data?void 0:data.bundle_size,pricePerUnit=null==data?void 0:data.price_per_unit,maxItems=null==data?void 0:data.max_items,maxNumItems=Math.floor(maxItems/bundleSize),allItems=[],num=1;num<=maxNumItems;num+=1){var numItems=num*bundleSize;if(numItems%bundleSize==0){var _data$serviceInfo,_data$serviceInfo2,price=(0,utils._L)({numItems,maxItems,discountRatio,bundleSize,pricePerUnit,startDiscountFrom:1});allItems.push({id:num,slug:"".concat(numItems,"-").concat(null==data||null===(_data$serviceInfo=data.serviceInfo)||void 0===_data$serviceInfo?void 0:_data$serviceInfo.type),title:"".concat(numItems," ").concat("mentorship"===(null==data||null===(_data$serviceInfo2=data.serviceInfo)||void 0===_data$serviceInfo2?void 0:_data$serviceInfo2.type)?"mentorship sessions":"events"),qty:numItems,pricePerUnit:price.discounted/numItems,price:price.original,priceText:(0,utils.T4)(price.discounted,!0),priceDiscounted:price.discounted,type:"CONSUMABLE"})}}!function setServiceProps(payload){dispatch({type:types.gZ,payload})}(signupAction_objectSpread(signupAction_objectSpread({},data),{},{list:allItems}))},setSelectedService:function setSelectedService(payload){return dispatch({type:types.U_,payload})},getPaymentMethods,getPriceWithDiscount,getSelfAppliedCoupon,applyDiscountCouponsToPlans:function applyDiscountCouponsToPlans(pricingList,coupon){return coupon?pricingList.map((function(item){var price=item.price;if(price<1)return item;var discountOperation=getPriceWithDiscount(price,coupon);return signupAction_objectSpread(signupAction_objectSpread({},item),{},{price:discountOperation.price,priceText:item.priceText.replace(item.price,discountOperation.price),lastPrice:item.priceText})})):pricingList}}}}}]);